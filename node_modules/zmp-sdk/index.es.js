/**
 * @timeBuild 16-05-2025 09:46:37
 * @license zmp-sdk
 *
 * Copyright @ 2025. Zalo Group.
 *
 * This source code is licensed under the MIT license found in the LICENSE file in the root directory of this source tree.
 */

function e(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var t,n=1048576,r=window.zAppID,i=window.APP_ID,a="https://zalo.me/s",o="https://h5.zdn.vn/zapps",s="h5.zdn.vn",u="/zapps",c={ZOAUTH:"h5.zdn.vn_zoauth",ZACC_SESSION:"h5.zdn.vn_zacc_session",JS_TOKEN:"h5.zdn.vn_zlink3rd",ZOAUTH_VRF:"h5.zdn.vn_zoauth_vrf",DEVICE_ID:"h5.zdn.vn_deviceID",CONTEXT_ID:"h5.zdn.vn_contextID",CONTEXT_TYPE:"h5.zdn.vn_contextType",UTOKEN_ZPI:"h5.zdn.vn_utoken_zpi",GTOKEN_ZPI:"h5.zdn.vn_gtoken_zpi",ZPP_ZPI:"h5.zdn.vn_zpp_zpi",ZPT_ZPI:"h5.zdn.vn_zpt_zpi"},l={GET_USER_INFO:"https://graph.zalo.me/v2.0/me",GET_ACCESS_TOKEN:"https://h5.zalo.me/openapi/access_token",GET_ACCESS_TOKEN_V3:"https://oauth.zaloapp.com/v3/access_token",GET_LIST_USER_INFO:"https://graph.zalo.me/v2.0/me/friends/list",CREATE_ORDER:"https://payment-mini.zalo.me/api/order/create",GET_APP_INFO:"https://h5.zalo.me/apps/get-info",SEND_ACTION_LOG:"https://h5.zalo.me/log/async",CREATE_SHARE_LINK:"https://h5.zalo.me/openapi/create-sharelink",CHECK_INTERACT_OA:"https://h5.zalo.me/openapi/check-interact-oa",GET_AUTH_SETTING:"https://h5.zalo.me/apis/users/auth-settings"};!function(e){e.REQUEST="REQUEST",e.MODIFIED_REQUEST="MODIFIED_REQUEST",e.RESPONSE="RESPONSE",e.MODIFIED_RESPONSE="MODIFIED_RESPONSE",e.NOT_FOUND="NOT_FOUND"}(t||(t={}));var d,p,f,h,m,v,g,y,_,b,w,T,E,I,P,S,A,O,N,C,k,M,R,D,x,U=0,L=-2e3,j=-1400,Z=-1500,B=-1401,z=-1404,W=-1408,F=-1409,G=-2004,V=-2005,H=-2006,K=-2007,J="Success",q="Unknown error. Please try again later.",Q="Request limit exceeded. Please try again later.",Y="Request timeout. Please try again later.",$="Please login (https://miniapp.zalo.me/docs/api/login) before to call this api",X="Login failed",ee="This API is not supported in this version of Zalo",te="User Authentication Required. Please grant User Authentication permission before requesting User Permission",ne="Unable to pick media",re="Unable to save image",ie="Unable to save video",ae="Unable to save file",oe={SUCCESS:{code:U,message:J},UNKNOWN_ERROR:{code:L,message:q},UNAUTHORIZED:{code:B,message:$},FORBIDDEN:{code:-1403,message:"You don't have permission to call this api"},CLIENT_NOT_SUPPORT:{code:z,message:ee},DECODE_FAILED:{code:-2001,message:"Can not decode id. Please check your params again."},TIME_OUT:{code:W,message:Y},USER_DENIED:{code:-2002,message:"User denied"},USER_CANCEL:{code:-2003,message:"User cancel"},DUPLICATE_REQUEST:{code:-1410,message:"Duplicate request. Please try again later."},DEVICE_NOT_SUPPORT:{code:-600,message:"This device does not support NFC"},SERVICE_NOT_READY:{code:-602,message:"NFC service is not ready. Please check in your setting"},UNREADABLE:{code:-603,message:"NFC tag is unreadable"},INVALID_MRZ:{code:-604,message:"Invalid MRZ data. Please try again later."},PROCESSING:{code:-605,message:"Processing NFC tag. Please wait a moment."},CANCEL:{code:-606,message:"User cancel"},SCAN_TIMEOUT:{code:-601,message:"NFC scan timeout. Please try again later."},MPDS_ACTION_INVALID:{code:-3e3,message:"Action name from input data does not match declared API actions"},MPDS_SOURCE_INVALID:{code:-3005,message:"This API not called from Mini App"},MPDS_APPID_INVALID:{code:-3006,message:"AppId from input data does not match the currently opened AppId"}},se={addRating:{limit:1},authorize:{},isAllowedInteractWithOA:{},favoriteApp:{},followOA:{},getLocation:{},getPhoneNumber:{},getShareableLink:{},getSetting:{},getAppInfo:{},getUserInfo:{},interactOA:{},openProfilePicker:{},openShareSheet:{},unfollowOA:{},checkTransaction:{limit:5},createOrder:{limit:5},createOrderIAP:{limit:5},selectPaymentMethod:{},requestSendNotification:{}},ue={GET_DOWNLOADED_STICKER:{haveCallback:!0},OPEN_SHARE_STICKER:{},OPEN_PROFILE:{requireAccessToken:!0},OPEN_FEED_DETAIL:{},OPEN_FRIEND_RADA:{},OPEN_INAPP:{},OPEN_OUTAPP:{requireAccessToken:!0},OPEN_PAGE:{},OPEN_PHOTODETAIL:{},OPEN_GALARY:{},OPEN_GAMECENTER:{},OPEN_GAMENEWS:{},OPEN_TAB_CONTACT:{},OPEN_TAB_SOCIAL:{},OPEN_FRIENDSUGGEST:{},OPEN_GROUPLIST:{},OPEN_NEARBY:{},OPEN_ROOM:{},OPEN_STICKERSTORE:{},OPEN_CREATECHAT:{},COPY_LINK_CATESTICKER:{},REQUEST_BUY_STICKER:{},OPEN_CHAT:{requireAccessToken:!0},OPEN_TAB_CHAT:{},OPEN_CHATGROUP:{},OPEN_ADDFRIEND:{},OPEN_TAB_MORE:{},OPEN_POSTFEED:{requireAccessToken:!0},OPEN_LOGINDEVICES:{},OPEN_SENDSTICKER:{},REPORT_ABUSE:{haveCallback:!0},FOLLOW_OA:{haveCallback:!0,requireAccessToken:!0,errorList:{android:{"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},UNFOLLOW_OA:{haveCallback:!0,requireAccessToken:!0,errorList:{android:{"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},OPEN_GAMEDETAIL:{},OPEN_SHARESHEET:{haveCallback:!0,requireAccessToken:!0,errorList:{android:{"-101":{mapTo:oe.CLIENT_NOT_SUPPORT}},iOS:{"-101":{mapTo:oe.CLIENT_NOT_SUPPORT}}}},REQUEST_PERMISSION_CAMERA:{errorList:{android:{"-2":{mapTo:oe.USER_DENIED}},iOS:{"-2":{mapTo:oe.USER_DENIED}}}},CHANGE_TITLE_HEADER:{skipJump:!0},WEBVIEW_CLEARCACHE:{},WEBVIEW_CONFIRMCACHE:{},WEBVIEW_ISVISIBLE:{},WEBVIEW_NETWORKTYPE:{skipJump:!0},CHANGE_BUTTON_HEADER:{},CREATE_OPTIONS_MENU:{skipJump:!0,haveCallback:!0},CREATE_SHORTCUT:{requireAccessToken:!0},CHANGE_ACTIONBAR_LEFTBUTTON_TYPE:{skipJump:!0,haveCallback:!0},WINDOW_CLOSE:{skipJump:!0,haveCallback:!0},WEBVIEW_CHECKRESERROR:{},IAP_REQUESTPAYMENT:{haveCallback:!0},ZBROWSER_GETSTATS:{},ZBROWSER_JSBRIDGE:{skipJump:!0,haveCallback:!0},PROMPT_AUTHENTICATION:{},CHANGE_ACTIONBAR_COLOR:{skipJump:!0},PROMPT_AUTHENTICATION_CHECK_STATE:{},OPEN_APPSTORE:{},GET_LOCATION:{haveCallback:!0,errorList:{android:{"-1":{mapTo:oe.USER_DENIED},"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-1":{mapTo:oe.USER_DENIED},"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},QUERY_LOCATION_HIDE:{haveCallback:!0},SHOW_TOAST:{haveCallback:!0,timeout:2},OPEN_APP:{},HIDE_KEYBOARD:{},OPEN_PHONE:{},OPEN_QR:{},OPEN_SMS:{errorList:{iOS:{"-9":{mapTo:oe.UNKNOWN_ERROR},"-10":{mapTo:oe.USER_CANCEL}}}},VIEW_MYQR:{haveCallback:!0,timeout:!0,requireAccessToken:!0},KEEP_SCREEN:{haveCallback:!0,timeout:2},CHANGE_AUTOROTATE:{skipJump:!0},CHECK_APP_INSTALLED:{},QUERY_SHOW:{},QUERY_HIDE:{},OPEN_INAPPRW:{},ZALORUN_GETTRACKINGSTATUS:{haveCallback:!0},ZALORUN_SETTRACKINGSTATUS:{haveCallback:!0},ZALORUN_GETDAYSTEP:{haveCallback:!0},ZALORUN_FORCESUBMITDATA:{haveCallback:!0},ZALORUN_SETWEIGHT:{haveCallback:!0},OPEN_PROFILE_EXT:{},DOWNLOAD_CATE:{haveCallback:!0},JUMP_LOGIN:{skipJump:!0,whiteList:!0},OPEN_ADTIMA_ADS_INTERSTITIAL:{},OPEN_ADTIMA_ADS:{},GET_ADIDCLIENT:{},SCAN_IBEACON:{},SAVE_VIDEO_GALLERY:{versionLive:{iOS:628},errorList:{android:{"-101":{mapTo:{code:H,message:ie},needMoreDetail:!0},"-102":{mapTo:{code:H,message:ie},needMoreDetail:!0}},iOS:{"-10":{mapTo:{code:H,message:ie},needMoreDetail:!0}}}},INTERACTIVE_VIBRATION:{},SAVE_IMAGE_GALLERY:{versionLive:{iOS:408},errorList:{android:{"-101":{mapTo:{code:V,message:re},needMoreDetail:!0},"-102":{mapTo:{code:V,message:re},needMoreDetail:!0}},iOS:{"-10":{mapTo:{code:V,message:re},needMoreDetail:!0}}}},OPEN_MP:{versionLive:{iOS:402}},CHANGE_ACTIONBAR:{haveCallback:!0,timeout:2,versionLive:{iOS:402},skipJump:!0},ZBROWSER_MPDS:{haveCallback:!0,timeout:2,versionLive:{iOS:402},errorList:{android:{"-100":{mapTo:oe.MPDS_ACTION_INVALID},"-101":{mapTo:oe.UNKNOWN_ERROR},"-105":{mapTo:oe.MPDS_SOURCE_INVALID},"-106":{mapTo:oe.MPDS_APPID_INVALID}},iOS:{"-10":{mapTo:oe.MPDS_ACTION_INVALID},"-101":{mapTo:oe.MPDS_APPID_INVALID},"-102":{mapTo:oe.UNKNOWN_ERROR}}}},ZBROWSER_MPDS_SYNC:{versionLive:{iOS:402},errorList:{android:{"-100":{mapTo:oe.MPDS_ACTION_INVALID},"-101":{mapTo:oe.UNKNOWN_ERROR},"-105":{mapTo:oe.MPDS_SOURCE_INVALID},"-106":{mapTo:oe.MPDS_APPID_INVALID}},iOS:{"-10":{mapTo:oe.MPDS_ACTION_INVALID},"-101":{mapTo:oe.MPDS_APPID_INVALID},"-102":{mapTo:oe.UNKNOWN_ERROR}}}},WEBVIEW_SET_RESULT:{versionLive:{iOS:416}},MP_GET_NUMBER:{versionLive:{iOS:416},errorList:{android:{"-1":{mapTo:oe.USER_DENIED},"-101":{mapTo:oe.USER_DENIED},"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-1":{mapTo:oe.USER_DENIED},"-10":{mapTo:oe.USER_DENIED},"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},MP_OPEN_PROFILE_PICKER:{requireAccessToken:!0,versionLive:{iOS:432},errorList:{android:{"-101":{mapTo:oe.USER_CANCEL}},iOS:{"-101":{mapTo:oe.USER_CANCEL}}}},GET_SUPPORTED_ACTIONS:{whiteList:!0},MP_JOIN_WIFI:{haveCallback:!0,timeout:!0,versionLive:{android:0,iOS:0},havePermission:!1,whiteList:!1},PICK_MEDIA:{requireAccessToken:!0,versionLive:{iOS:440},errorList:{android:{"-101":{mapTo:oe.USER_CANCEL},999:{mapTo:{code:G,message:ne},needMoreDetail:!0}},iOS:{"-10":{mapTo:{code:G,message:ne}}}}},MP_CLOSE_LOADINGVIEW:{skipJump:!0},CHANGE_BOTTOMBAR:{haveCallback:!0,timeout:2,skipJump:!0},MA_MENU_MINIMIZE:{skipJump:!1,versionLive:{iOS:520}},MA_MENU_PERMISSION:{skipJump:!1,versionLive:{iOS:520}},MA_MENU_FAVORITES:{skipJump:!1,versionLive:{iOS:520}},MP_SEND_NOTIFICATION:{skipJump:!1,versionLive:{iOS:530},errorList:{android:{"-1":{mapTo:oe.USER_DENIED},"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-1":{mapTo:oe.USER_DENIED},"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},MP_ADD_RATING:{skipJump:!1},MP_ADD_MYFAVORITES:{skipJump:!1},MP_INTERACT_OA:{skipJump:!1,errorList:{android:{"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},MP_USER_AUTHORIZE:{skipJump:!1,errorList:{android:{"-400":{mapTo:oe.DUPLICATE_REQUEST}},iOS:{"-400":{mapTo:oe.DUPLICATE_REQUEST}}}},MP_SELECT_PAYMENT_METHOD:{skipJump:!1},CHECK_NFC:{skipJump:!1,versionLive:{iOS:626},errorList:{all:{"-1":{mapTo:oe.UNKNOWN_ERROR},"-600":{mapTo:oe.DEVICE_NOT_SUPPORT},"-602":{mapTo:oe.SERVICE_NOT_READY}}}},SCAN_NFC:{skipJump:!1,haveCallback:!0,timeout:65,errorList:{all:{"-1":{mapTo:oe.UNKNOWN_ERROR},"-600":{mapTo:oe.DEVICE_NOT_SUPPORT},"-601":{mapTo:oe.SCAN_TIMEOUT},"-602":{mapTo:oe.SERVICE_NOT_READY},"-603":{mapTo:oe.UNREADABLE},"-604":{mapTo:oe.INVALID_MRZ},"-605":{mapTo:oe.PROCESSING},"-606":{mapTo:oe.CANCEL}}}},MP_CONFIRM_REQUEST_PAYMENT:{skipJump:!1},SAVE_FILE:{versionLive:{iOS:628},skipJump:!1,errorList:{android:{"-101":{mapTo:{code:K,message:ae},needMoreDetail:!0},"-102":{mapTo:{code:K,message:ae},needMoreDetail:!0}},iOS:{"-10":{mapTo:{code:K,message:ae},needMoreDetail:!0}}}},MP_APP_LIFECYCLE_TRACKING:{skipJump:!1}},ce={android:{"-4":oe.DECODE_FAILED,"-5":oe.CLIENT_NOT_SUPPORT,"-14":oe.TIME_OUT},iOS:{"-9":oe.DECODE_FAILED,"-5":oe.CLIENT_NOT_SUPPORT,"-14":oe.TIME_OUT}},le={android:12100615,iOS:460,wp:0,unknown:0},de=5*n,pe="https://payment-mini.zalo.me/api/order/create-v2",fe="https://payment-mini.zalo.me/api/order/iap-create",he="https://payment-mini.zalo.me/api/transaction",me="https://payment-mini.zalo.me/api/order/purchase",ve="DEFERRED",ge="IMMEDIATE_AND_CHARGE_FULL_PRICE",ye={SHOW_BACK:0,HIDE_BACK:3,SHOW_HOME:1,HIDE_HOME:0},_e=5,be=6,we="#1843EF",Te=0,Ee={"-12101":"Invalid params","-12102":"Session expire","-12103":"Not permission","-12104":"Not Authorize","-12105":"Unknown exception","-12106":"Cannot create order","-12107":"Transaction not found","-12108":"Cannot update order","-12109":"Cannot decode param","-12110":"Version not support","-12111":"Receipt expire","-12112":"Product not found","-12113":"Subscription other GW","-12114":"Product already subcription","-12115":"Not exist","-12116":"Already exist","-12117":"Not allow","-12118":"Not permit","-12119":"Internal error","-2":"Unable to pay","-6":"Unable to register","-7":"Registered account","-832":"Purchased by another account","-833":"Register for another account","-834":"Unable to register","-2010":"System is maintaining","-3999":"Not in Vietnam","-12129":"Purchased by another account",123:"An error has occurred"};function Ie(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ie(a,r,i,o,s,"next",e)}function s(e){Ie(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Oe(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Ne(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||Ae(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function ke(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];try{return e.apply(void 0,Ne(n))}catch(e){return"undefined"!=typeof console&&console.error&&console.error(e),null}}}function Me(e){var t=new URL(window.location.href).searchParams.get("env");return{isMp:window.location.hostname.includes(s)&&("TESTING_LOCAL"==t||window.location.pathname.startsWith(u)),isMpWeb:window.location.hostname.includes("localhost")}}!function(e){e.DEV_TRACKING="devTracking"}(d||(d={})),function(e){e[e.APP_INITIALIZING=95]="APP_INITIALIZING",e[e.APP_READY=96]="APP_READY"}(p||(p={})),ke.async=function(e){return Pe((function(){var t,n,r,i,a=arguments;return Ce(this,(function(o){switch(o.label){case 0:for(t=a.length,n=new Array(t),r=0;r<t;r++)n[r]=a[r];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.apply(void 0,Ne(n))];case 2:return[2,o.sent()];case 3:return i=o.sent(),"undefined"!=typeof console&&console.error&&console.error(i),[2,null];case 4:return[2]}}))}))},function(e){e.none="none",e.wifi="wifi",e.cellular="cellular",e.unknown="unknown"}(f||(f={})),function(e){e.wp="wp",e.android="android",e.iOS="iOS",e.unknown="unknown"}(h||(h={})),function(e){e.AppPaused="h5.event.paused",e.AppResumed="h5.event.resumed",e.NetworkChanged="h5.event.connection.changed",e.OnDataCallback="h5.event.webview.result",e.WebviewClosed="h5.event.webview.close",e.OpenApp="h5.event.open.mp",e.AppClose="h5.event.action.close",e.PaymentCallback="payment.callback",e.PaymentResult="action.payment.result",e.PaymentDone="action.payment.done",e.PaymentClose="action.payment.close",e.DownloadProgress="h5.event.webview.download.progress"}(m||(m={})),function(e){e.DOING="doing",e.DONE="done"}(v||(v={})),function(e){e[e.user=1]="user",e[e.oa=0]="oa",e[e.aliasOA=2]="aliasOA"}(g||(g={})),function(e){e[e.user=1]="user",e[e.oa=0]="oa"}(y||(y={})),function(e){e[e.image=1]="image",e[e.multi_image=2]="multi_image",e[e.link=4]="link",e[e.profile=5]="profile"}(_||(_={})),function(e){e[e.cccd=1]="cccd"}(b||(b={})),function(e){e[e.image=1]="image",e[e.gif=11]="gif",e[e.video=12]="video",e[e.link=4]="link",e[e.oa=5]="oa",e[e.zmp=20]="zmp",e[e.multi_image=21]="multi_image",e[e.zmp_deep_link=4]="zmp_deep_link",e[e.text=22]="text"}(w||(w={})),function(e){e[e.auto=1]="auto",e[e.portrait=2]="portrait",e[e.landscape=3]="landscape"}(T||(T={})),function(e){e[e.oneShot=0]="oneShot"}(E||(E={})),function(e){e[e.zcamera=3]="zcamera",e[e.zcamera_photo=1]="zcamera_photo",e[e.zcamera_video=2]="zcamera_video",e[e.zcamera_scan=7]="zcamera_scan",e[e.photo=4]="photo",e[e.video=5]="video",e[e.file=6]="file"}(I||(I={})),function(e){e.SUBSCRIPTION="SUBSCRIPTION",e.ONETIME="ONETIME"}(P||(P={})),function(e){e[e.UNKNOW=0]="UNKNOW",e[e.DEFERRED=1]="DEFERRED",e[e.IMMEDIATE_AND_CHARGE_FULL_PRICE=2]="IMMEDIATE_AND_CHARGE_FULL_PRICE"}(S||(S={})),function(e){e[e.normal=1]="normal",e[e.hidden=0]="hidden",e[e.transparent=2]="transparent"}(A||(A={})),function(e){e[e.show=1]="show",e[e.hide=0]="hide"}(O||(O={})),function(e){e[e.show=1]="show",e[e.hide=0]="hide"}(N||(N={})),function(e){e[e.left=0]="left",e[e.center=1]="center"}(C||(C={})),function(e){e.OnFrameCallback="h5.event.camera.frame",e.OnStartCallback="h5.event.camera.start",e.OnStopCallback="h5.event.camera.stop"}(k||(k={})),function(e){e.FRONT="user",e.BACK="environment"}(M||(M={})),function(e){e.WEBP="image/webp",e.PNG="image/png",e.JPEG="image/jpeg"}(R||(R={})),function(e){e.HIGH="high",e.NORMAL="normal",e.LOW="low"}(D||(D={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(x||(x={}));var Re,De=function(e){return e.isAndroid?h.android:e.isIOS?h.iOS:h.unknown};function xe(e){var t=e.split("zalo")[1];return t&&t.replace(" ","").split("/")[1]||""}function Ue(){var e=function(){var e=ke((function(){return window.navigator.userAgent.toLowerCase()}))();if(e){var t=function(e){return{isAndroid:/android/i.test(e)&&!/iemobile/.test(e),isIOS:/iphone|ios|ipad|ipod/.test(e)&&!/iemobile/.test(e),isMobile:/android|iphone|ios|ipad|ipod|iemobile/.test(e),isZalo:/zalo/.test(e)}}(e);return{appEnv:Me(),platform:t,platformName:De(t),zaloVersion:xe(e).trim()}}}();if(e)return e}var Le=(null===(Re=Ue())||void 0===Re?void 0:Re.appEnv)||{};function je(e){je.on&&je.engine(e)}je.on=!1,je.engine=function(e){var t=e.name,n=e.type,r=e.state,i=e.request,a=e.response,o=e.stage;console[n]([t,o,r,i,a].filter(Boolean).map((function(e){return"object"==typeof e?JSON.stringify(e):e})).join("; "))};var Ze=function(e,n){var r,i={error:-1404,errorMessage:"".concat(e," is not found")};null==n||null===(r=n.fail)||void 0===r||r.call(n,i),je({stage:t.NOT_FOUND,type:"error",name:e,request:n,state:"fail",response:i})};function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Be(e,t,n[t])}))}return e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||Ae(e)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e){return e&&e.constructor===Symbol?"symbol":typeof e}function Ge(e){return"function"==typeof window.Debug?window.Debug(e):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}}var Ve=Object.prototype.toString;var He="[object Null]",Ke="[object Undefined]";function Je(e){return null==e?void 0===e?Ke:He:function(e){return Ve.call(e)}(e)}function qe(e){return null!=e&&"object"==typeof e}var Qe={isEmpty:function(e){return null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isFunction:function(e){return"function"==typeof e},isObject:function(e){return null!==e&&("function"==typeof e||"object"==typeof e)},isString:function(e){return null!=e&&"string"==typeof e.valueOf()},isNumber:function(e){return"number"==typeof e||qe(e)&&"[object Number]"==Je(e)},isArray:function(e){return Array.isArray(e)},isRegExp:function(e){return qe(e)&&"[object RegExp]"==Je(e)},get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=function(n){return String.prototype.split.call(t,n).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e)},i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return void 0===i||i===e?n:i},isPromise:function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}};function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}function et(e){return Xe(e)}function tt(e,t,n){return tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=et(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}},tt(e,t,n)}function nt(e,t,n){return tt(e,t,n)}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=et(e);if(t){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?at(e):t}(this,n)}}var st,ut,ct=(st=function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,a),!0;case 6:return l.fn.call(l.context,t,r,i,a,o),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},st(ut={exports:{}},ut.exports),ut.exports),lt={enablePaymentDone:!1};function dt(e){var t=e.data;return{orderId:t.zmpOrderId||t.orderId,transId:t.appTransID||t.apptransid||t.transId}}var pt="ACTION_CALLBACK";function ft(e,t,n,r){switch(!0){case"string"==typeof n||null===n:return[{eventName:e,eventId:t,data:n}];case e===m.OpenApp&&(null==r?void 0:r.enablePaymentDone):var i=function(e){var t=new URL(e,window.location.origin),n=t.pathname.split("/")[3].toUpperCase().replace(/-/g,"_"),r={},i=t.searchParams.get("orderId"),a=t.searchParams.get("zmpOrderId"),o=t.searchParams.get("appTransID")||t.searchParams.get("apptransid");switch(n){case"MOMO":case"MOMO_SANDBOX":r.orderId=a,r.transId=i;break;default:r.orderId=a||i,r.transId=o}return r}(n.path);return[{eventName:m.PaymentDone,eventId:t,data:i}];case e===m.OnDataCallback:if(["PAY_BY_BANK","PAY_BY_CUSTOM_METHOD"].includes(null==n?void 0:n.eventType))return[{eventName:m.OnDataCallback,eventId:t,data:n},{eventName:m.PaymentDone,eventId:t,data:dt(n)}];break;default:return[{eventName:e,eventId:t,data:n}]}}var ht=function(e){it(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.apply(this,arguments)).debug=Ge("zmp:event-emitter"),e}var r=n.prototype;return r.h5ConfirmHandleEvent=function(e,t,n){ZaloJavaScriptInterface.jsH5EventCallback(e,t,n||"")},r.on=function(e,t,r){var i=this;if(e===pt||e===m.PaymentCallback)return nt(et(n.prototype),"on",this).call(this,e,t,r);this.debug("register ".concat(String(e),": ").concat(r));return nt(et(n.prototype),"on",this).call(this,e,(function(n,a){i.h5ConfirmHandleEvent(n,e,r),t(a)}),r)},r.once=function(e,t,r){var i=this;if(e===pt)return nt(et(n.prototype),"once",this).call(this,e,t,r);this.debug("register once ".concat(String(e),": ").concat(r));return nt(et(n.prototype),"once",this).call(this,e,(function(n,a){i.h5ConfirmHandleEvent(n,e,r),t(a)}),r)},n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(ct);function mt(e){ht.getInstance().emit(pt,e)}function vt(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(void 0===r)return;if(null===r)return void t.push(n);t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}return t.join("&")}window.onNativeMessage=function(e,t){return function(n){mt({serialId:e,actionName:t,result:n})}},window.zaloJSV2={zalo_h5_event_handler:function(e,t,n){var r=Ge("zmp:zalo_h5_event_handler");r("eventId: ".concat(e,", eventName: ").concat(t,", eventData: ").concat(n));var a=Ht(n);r("stringToData",a);var o=function(e,t){if(!t||"string"==typeof t)return t;try{if(e===m.OpenApp){var n=t.url,r=new URL(n),a=r.pathname.split("/zapps/".concat(i))[1];return{path:"".concat(a||"/").concat(r.search)}}return t}catch(e){return t}}(t,a);ft(t,e,o,lt).forEach((function(e){ht.getInstance().emit(e.eventName,e.eventId,e.data)}))}},window.zaloNative2JS={nativeCall:function(e,t,n){ht.getInstance().emit(m.PaymentCallback,e,t,n)}};var gt={encode:vt,decode:function(e,t){var n={};if(""===e)return n;for(var r=e.split("&"),i=0;i<r.length;i++){var a=r[i].split("=",2),o=decodeURIComponent(a[0]);if(t&&Object.prototype.hasOwnProperty.call(n,o))throw new URIError("Duplicate key: "+o);n[o]=2===a.length?decodeURIComponent(a[1]):null}return n},appendToUrl:function(e,t){return e+(-1!==e.indexOf("?")?"&":"?")+("string"==typeof t?t:vt(t))},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getParamsAsObject:function(e){var t={};return e?(e.split("&").map((function(e){var n=e.split("=");n&&2==n.length&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))})),t):t},toQueryString:function(e){if(!e)return"";if("object"!=(void 0===e||void 0===e?"undefined":Fe(e)))return e;var t=Object.keys(e),n=[];return t.map((function(t){var r=e[t],i=[t,r="object"==(void 0===r||void 0===r?"undefined":Fe(r))?JSON.stringify(r):encodeURIComponent(r)].join("=");n.push(i)})),n.join("&")}},yt={},_t=function(e,t,n){var r=t||"default";return function(){return(r in yt?yt[r](e,n):e).apply(this,arguments)}};_t.setWrapper=function(e){yt[arguments.length<=1||void 0===arguments[1]?"default":arguments[1]]=e};var bt={error:{code:1,error_subcode:1357046,message:"Received Invalid JSON reply.",type:"http"}};function wt(e){try{return null===e?bt:JSON.parse(e)}catch(e){return bt}}var Tt,Et={execute:function(e,t,n,r){n.suppress_http_code=1;var i=gt.encode(n);"post"!=t&&(e=gt.appendToUrl(e,i),i="");var a=function(e,t){if(!self.XMLHttpRequest)return null;var n=new XMLHttpRequest,r=function(){};if(!("withCredentials"in n))return null;n.open(e,t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var i={send:function(e){n.send(e)}},a=_t((function(){a=r,"onload"in i&&i.onload(n)}),"entry","XMLHttpRequest:load"),o=_t((function(){o=r,"onerror"in i&&i.onerror(n)}),"entry","XMLHttpRequest:error");return n.onload=function(){a()},n.onerror=function(){o()},n.onreadystatechange=function(){4==n.readyState&&(200==n.status?a():o())},i}(t,e);return!!a&&(a.onload=function(e){r(wt(e.responseText))},a.onerror=function(e){e.responseText?r(wt(e.responseText)):r({error:{code:1,error_subcode:1357045,message:"unknown error (empty response)",status:e.status,type:"http"}})},a.send(i),!0)}},It=(Tt=Pe((function(e,t,n){var r,i,a,o;return Ce(this,(function(s){switch(s.label){case 0:return r={appId:e,versionStatus:t},Qe.isUndefined(n)||(r.currentVersion=n),i=gt.appendToUrl(l.GET_APP_INFO,r),[4,fetch(i,{credentials:"include"})];case 1:return(a=s.sent()).ok?[4,a.json()]:[3,3];case 2:if((o=s.sent()).err<0||!o.data)throw new Error(o);return[2,{name:o.data.name,version:o.data.version,description:o.data.description,appUrl:o.data.appUrl,qrCodeUrl:o.data.qrCodeUrl,logoUrl:o.data.logoUrl,cateID:o.data.cateType}];case 3:throw new Error("Can't get app info")}}))})),function(e,t,n){return Tt.apply(this,arguments)});function Pt(e){try{var t=e.map((function(e){return{action:e.action,error:e.error,message:e.message,data:e.data}}));Et.execute(l.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(t)},(function(){}))}catch(e){}}var St=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))},At=function(){var e;return"android"===((null===(e=Ue())||void 0===e?void 0:e.platformName)||"").toLowerCase()},Ot=function(){var e=0;if(window.zaloVersionCode)e=window.zaloVersionCode;else{var t,n=Number((null===(t=Ue())||void 0===t?void 0:t.zaloVersion)||"");if(n>=24112e3)e=n;else{var r,i=((null===(r=Ue())||void 0===r?void 0:r.platformName)||"").toLowerCase();"android"===i?e=n%1e4:"ios"===i&&(e=n)}}return e},Nt=function(e,t){var n=Ot();return At()&&n<e||function(){var e;return"ios"===((null===(e=Ue())||void 0===e?void 0:e.platformName)||"").toLowerCase()}()&&n<t};function Ct(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var kt,Mt=function(){function e(t,n,r,i){Ye(this,e),this.code=t,this.message=n,this.api=r,this.detail=i}var t=e.prototype;return t.toString=function(){return"api: ".concat(String(this.api),"; code: ").concat(this.code,"; message: ").concat(JSON.stringify(this.message))},t.toJSON=function(){return{code:this.code,message:this.message,api:this.api,detail:this.detail}},e}(),Rt=function(e,t){return Ct(e,Mt)?function(e,t){return e.api=t,e.toJSON()}(e,t):function(e,t){return Ct(e,Error)?new Mt(L,e.message,t).toJSON():Qe.isEmpty(null==e?void 0:e.message)||Qe.isEmpty(null==e?void 0:e.code)?new Mt(L,q,t,e).toJSON():new Mt(e.code,e.message,t,e.detail).toJSON()}(e,t)},Dt=(kt=Pe((function(e){var t;return Ce(this,(function(n){switch(n.label){case 0:return t={headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:"Bearer ".concat(e)}},[4,fetch(l.GET_AUTH_SETTING,ze({method:"GET"},t))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))})),function(e){return kt.apply(this,arguments)}),xt=Pe((function(){return Ce(this,(function(e){return[2,new Promise(function(){var e=Pe((function(e,t){var n,r,i,a;return Ce(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Wt.jumpAndGetToken()];case 1:return o.sent(),(r=null===(n=Wt.miniProgramConfig)||void 0===n?void 0:n.jwt)||t(new Mt(B,$,"getSetting")),[4,Dt(r)];case 2:return(i=o.sent())&&0===i.err?e({authSetting:i.data}):t(new Mt(i.err,i.msg,"getSetting")),[3,4];case 3:return a=o.sent(),t(a),[3,4];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}())]}))})),Ut=function(){var e,t,n,r=Ue(),i={},a=ht.getInstance(),o=[],s=!1;return s||(t=function(e){var t=e.serialId,n=Kt(e.result),r=Yt(null==n?void 0:n.action),s=Qe.isEmpty(null==n?void 0:n.error_code)?0:null==n?void 0:n.error_code,u=null==n?void 0:n.error_message,c=(null==n?void 0:n.data)||n;if(r&&0===s){var l=JSON.parse(null==n?void 0:n.data);s=Qe.isEmpty(null==l?void 0:l.error_code)?0:null==l?void 0:l.error_code,u=null==l?void 0:l.error_message,c=(null==l?void 0:l.data)||l}var d={error_code:s,error_message:u,data:c,action:(null==n?void 0:n.action)||e.actionName};if(t&&i[t]){var p=i[t],f=p.callback,h=p.timeout,v=p.isMultiCallback,g=p.options,y=p.downloadListener;!function(e,t){var n=t||{},r=n.success,i=n.fail;0===e.error_code?Qe.isFunction(r)&&r(e):Qe.isFunction(i)&&i(e)}(d,f),!v&&delete i[t],h&&clearTimeout(h);var _={action:null==d?void 0:d.action,error:null==d?void 0:d.error_code,message:null==d?void 0:d.error_message,data:{}};try{if("action.open.inapp"===d.action||"action.open.outapp"===d.action){var b=new URL(null==g?void 0:g.url),w="".concat(b.protocol,"//").concat(b.host).concat(b.pathname);_.data={url:w}}if("action.follow.oa"===d.action||"action.unfollow.oa"===d.action){var T=null==g?void 0:g.uid;_.data={uid:T}}if("action.open.chat"===d.action){var E=null==g?void 0:g.uId,I=null==g?void 0:g.type;_.data={uid:E,openChatType:I}}(null==g?void 0:g.onProgress)&&y&&a.off(m.DownloadProgress,y)}catch(e){}o.push(_)}},ht.getInstance().on(pt,t),a.on(m.AppPaused,(function(){if(o.length>0){var e=o;o=[],Pt(e)}})),e?clearInterval(e):e=setInterval((function(){if(o.length>0){var e=o;o=[],Pt(e)}}),5e3),s=!0),n=Pe((function(e,t,n,o){var s,u,c,l,d,p,f,h,v,g,y,_,b,w,T,E,I,P,S,A,O,N,C;return Ce(this,(function(k){switch(k.label){case 0:return u=Math.floor(1e6*Math.random()),c="".concat(e,"_").concat(u),l=tn(e),(null==o?void 0:o.actionName)&&o.actionName.length>0&&(l=null==o?void 0:o.actionName),d=(null==o?void 0:o.isMultiCallback)||!1,p=!1!==(null==o?void 0:o.timeout)&&((null==o?void 0:o.timeout)||!0),f=(null==o?void 0:o.haveCallback)||!1,h=(null==o?void 0:o.skipJump)||!1,v=(null==o?void 0:o.requireAccessToken)||!1,g=$t(l),t&&n&&(i[c]={options:t,callback:n,isMultiCallback:d},p&&f&&(i[c].timeout=setTimeout((function(){return mt({serialId:c,result:{error_code:W,error_message:Y,data:{timeout:p},action:e}}),null}),!0===p?8e3:1e3*p))),g?[4,xt()]:[3,2];case 1:if(!1===(null==(_=k.sent())||null===(y=_.authSetting)||void 0===y?void 0:y["scope.userInfo"]))return mt({serialId:c,result:{error_code:B,error_message:te,data:{isMobile:null==r||null===(b=r.platform)||void 0===b?void 0:b.isMobile},action:e}}),[2];k.label=2;case 2:return w=Yt(l),!(null==r||null===(s=r.platform)||void 0===s?void 0:s.isMobile)||!e||Qe.isUndefined(ZaloJavaScriptInterface)||r.platform.isIOS&&!Vt(e)||w&&!1===w.isSupported?(mt({serialId:c,result:{error_code:z,error_message:ee,data:{isMobile:null==r||null===(T=r.platform)||void 0===T?void 0:T.isMobile},action:e}}),[2]):(E=Gt(t),h?[3,4]:[4,Wt.getJSAccessToken()]);case 3:return P=k.sent(),[3,5];case 4:P="",k.label=5;case 5:I=P,k.label=6;case 6:return k.trys.push([6,10,,11]),h||!v?[3,8]:[4,Wt.getAccessToken()];case 7:return A=k.sent(),[3,9];case 8:A="",k.label=9;case 9:return S=A,[3,11];case 10:return O=k.sent(),mt({serialId:c,result:{error_code:null==O?void 0:O.code,error_message:null==O?void 0:O.message,action:e}}),[2];case 11:try{t&&(null==t?void 0:t.onProgress)&&(N=function(e){!function(e,t){var n=e.progress;t&&t(n)}(e,null==t?void 0:t.onProgress)},i[c].downloadListener=N,a.on(m.DownloadProgress,N))}catch(e){}return C=r.platform.isIOS?window.onNativeMessage(c,l):'window.onNativeMessage("'.concat(c,'", "').concat(l,'")'),[2,ZaloJavaScriptInterface.jsCall(I,l,S,E,C)]}}))})),function(e,t,r,i){return n.apply(this,arguments)}}(),Lt={success:function(e,t){return{code:U,message:t||J,data:e||{}}},error:{failLimit:function(){return new Mt(F,Q)},badRequest:function(e){return new Mt(j,e)},loginFailed:function(e){return new Mt(B,"".concat(X,": ").concat(e))},loginRequired:function(){return new Mt(B,$)},cannotGetShareInfo:function(){return new Mt(Z,"Can not get app info to share")},createIAPOrderFailed:function(e){var t=Object.keys(Ee).find((function(t){return t===e.toString()}));return new Mt(e,t||q)},clientNotSupport:function(){return new Mt(z,ee)}}},jt=function(e){var t,n,r,i=null===(t=Ue())||void 0===t?void 0:t.platformName,a=en(e.action),o=ue[a],s=(null==o?void 0:o.skipJump)||!1,u=(null==o?void 0:o.errorList)||{};if("JUMP_LOGIN"===a)return new Mt(L,"Can not get auth code: ".concat(e.error_message));if(Wt.jumpStatus!==v.DONE&&!s)return new Mt(oe.UNAUTHORIZED.code,oe.UNAUTHORIZED.message);if("permission required!"===String(e.error_message).toLowerCase()||"no permission!"===String(e.error_message).toLowerCase())return new Mt(oe.FORBIDDEN.code,oe.FORBIDDEN.message);if(i&&(null===(n=ce[i])||void 0===n?void 0:n[e.error_code]))return new Mt(ce[i][e.error_code].code,ce[i][e.error_code].message);var c=null==u||null===(r=u[i])||void 0===r?void 0:r[String(e.error_code)];if(c){var l,d,p,f=null===(l=c.mapTo)||void 0===l?void 0:l.message;if(null==c?void 0:c.needMoreDetail)f="".concat(null==c||null===(p=c.mapTo)||void 0===p?void 0:p.message,": ").concat(e.error_message);return new Mt(null===(d=c.mapTo)||void 0===d?void 0:d.code,f)}return new Mt(e.error_code,e.error_message)},Zt=function(e,n,r,i){var a=function(e,n){function r(r){return function(i){var a=Qe.isEmpty(n)?void 0:n[r];if(a)return je({stage:t.RESPONSE,type:"log",state:r,name:e,response:i}),a("fail"===r?jt(i):null==i?void 0:i.data)}}return Qe.isUndefined(e)&&(e=""),Object.assign({},{success:r("success"),fail:r("fail")})}(e,r),o=ue[e],s=(null==i?void 0:i.delay)||0;setTimeout((function(){Ut(e,n,a,ze({},i,o))}),s)},Bt=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("MP_USER_AUTHORIZE",{scopes:e,forceUpdate:!0},{success:function(e){Qe.isEmpty(e)||t(e)},fail:function(e){n(e)}},{isMultiCallback:!1,timeout:!1})}))]}))}));return function(t){return e.apply(this,arguments)}}(),zt=function(){function e(){Ye(this,e),this._jumpStatus=void 0,this.WAITING_QUEUE=[],this.getAccessTokenCount=0,this._accessToken="",this._jsAccessToken="",this.refreshToken="",this._cookies=[],this.accessTokenExpiresIn=0,this.prevGetAccessTokenTimestamp=(new Date).getTime(),this.manualSetAccessToken=!1,this._miniProgramConfig={},this.retryLimitMap={}}var n,a,s,u=e.prototype;return u.initRetryLimit=function(e){var t=se[e],n={lastCall:(new Date).getTime(),limit:t&&t.limit?t.limit:3,retry:0};return this.retryLimitMap[e]=n,n},u.resetRetryLimit=function(e){this.retryLimitMap[e].lastCall=(new Date).getTime(),this.retryLimitMap[e].retry=0},u.getRetryLimit=function(e){var t=this.retryLimitMap[e];return t&&t.lastCall&&t.retry||(t=this.initRetryLimit(e)),t},u.increaseRetryLimit=function(e){this.retryLimitMap[e].retry++},u.jump=function(){var e=this;return Pe((function(){return Ce(this,(function(n){return[2,new Promise((function(n,r){e._jumpStatus?e._jumpStatus===v.DONE?n(v.DONE):n(v.DOING):(e._jumpStatus=v.DOING,je({stage:t.REQUEST,type:"log",name:"jump"}),Ut("JUMP_LOGIN",{},{success:function(t){var r=t.data;e._miniProgramConfig=(null==r?void 0:r.miniProgramConfig)||{};var i=(null==r?void 0:r.cookiesOAuthLogins)||[],a=i.find((function(e){return e.name===c.JS_TOKEN}));a&&(e._jsAccessToken=a.value,window.ZJSBridge.setJSToken&&window.ZJSBridge.setJSToken(a.value)),e._cookies=i;var o=e._cookies.find((function(e){return e.name===c.ZOAUTH}));(null==o?void 0:o.value)||Pt([{action:"action.jump.login",error:-102,message:"no zoauth",data:{}}]),n(v.DONE)},fail:function(e){Pt([{action:"action.jump.login",error:-101,message:e.message||"jump error",data:{}}]),r(e)}},{skipJump:!0}))}))]}))}))()},u.loginZaloV3=function(e,t,n){var r=this;return Pe((function(){var i;return Ce(this,(function(a){switch(a.label){case 0:return i="".concat(l.GET_ACCESS_TOKEN_V3,"?app_id=").concat(t,"&redirect_uri=").concat(o,"/").concat(e,"/&code=").concat(n,"&isSDK=true"),[4,fetch(i).then(function(){var e=Pe((function(e){var t,n,i;return Ce(this,(function(a){switch(a.label){case 0:return[4,e.json()];case 1:return t=a.sent(),n=null==t?void 0:t.access_token,r._accessToken=n,i=1e3*parseInt(t.expires_in),r.accessTokenExpiresIn=i,r.prevGetAccessTokenTimestamp=(new Date).getTime(),window.ZJSBridge.setZAccSession&&window.ZJSBridge.setZAccSession(r._accessToken||""),[2,n]}}))}));return function(t){return e.apply(this,arguments)}}())];case 1:return[2,a.sent()]}}))}))()},u.loginZaloV4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this;return Pe((function(){var i,a;return Ce(this,(function(o){switch(o.label){case 0:return(i=new URLSearchParams).append("app_id",e),i.append("code",t),i.append("code_verifier",n),Qe.isNull(r.refreshToken)||0===r.refreshToken.length?i.append("grant_type","authorization_code"):(i.append("grant_type","refresh_token"),i.append("refresh_token",r.refreshToken||"")),a={headers:{"Content-Type":"application/x-www-form-urlencoded"}},[4,fetch(l.GET_ACCESS_TOKEN,ze({method:"POST",body:i},a)).then(function(){var e=Pe((function(e){var t,n,i,a;return Ce(this,(function(o){switch(o.label){case 0:return[4,e.json()];case 1:return t=o.sent(),n=(null==t?void 0:t.access_token)||"",i=(null==t?void 0:t.refresh_token)||"",r.refreshToken=i,r._accessToken=n,a=1e3*parseInt(null==t?void 0:t.expires_in),r.accessTokenExpiresIn=a,r.prevGetAccessTokenTimestamp=(new Date).getTime(),window.ZJSBridge.setZAccSession&&window.ZJSBridge.setZAccSession(n),[2,n]}}))}));return function(t){return e.apply(this,arguments)}}())];case 1:return[2,o.sent()]}}))}))()},u.getAccessToken=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return Pe((function(){var n,a,o,s,u,l,d,p,f;function h(){return m.apply(this,arguments)}function m(){return(m=Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){var t=setInterval((function(){(a.getAccessTokenCount<=1||a._accessToken)&&(e("done"),clearInterval(t))}),200)}))];case 1:return[2,e.sent()]}}))}))).apply(this,arguments)}return Ce(this,(function(m){switch(m.label){case 0:return n=(new Date).getTime()-t.prevGetAccessTokenTimestamp,(a=t).getAccessTokenCount++,t.getAccessTokenCount>1?[4,h()]:[3,2];case 1:m.sent(),m.label=2;case 2:return t.manualSetAccessToken?(a.getAccessTokenCount--,[2,Promise.resolve(t._accessToken)]):e?[4,t.verifyUserAuthorized()]:[3,4];case 3:return s=m.sent(),[3,5];case 4:s=!0,m.label=5;case 5:return o=s,t._accessToken.length>0&&n<t.accessTokenExpiresIn&&o?(a.getAccessTokenCount--,[2,Promise.resolve(t._accessToken)]):(t.accessToken="",[4,t.jumpAndGetToken(c.ZOAUTH)]);case 6:return u=m.sent(),[4,t.jumpAndGetToken(c.ZOAUTH_VRF)];case 7:if(l=m.sent(),d="zmp.getaccesstoken.fail",!o)throw a.getAccessTokenCount--,Pt([{action:d,error:-104,message:"no user auth",data:{}}]),Lt.error.loginFailed("User Authentication Required");if(!u)return[3,15];m.label=8;case 8:return m.trys.push([8,13,,14]),l?[4,t.loginZaloV4(i,u,l)]:[3,10];case 9:return p=m.sent(),[3,12];case 10:return[4,t.loginZaloV3(i,r,u)];case 11:p=m.sent(),m.label=12;case 12:return[3,14];case 13:return f=m.sent(),p="",console.log("Can not get access token",f),Pt([{action:d,error:-103,message:String(f)||"Can not get access token",data:{}}]),[3,14];case 14:return a.getAccessTokenCount--,p?[2,Promise.resolve(t._accessToken)]:(Pt([{action:d,error:-101,message:"no accessToken",data:{}}]),[2,Promise.reject(Lt.error.loginFailed("Can't get accessToken. Please try again later."))]);case 15:throw a.getAccessTokenCount--,Pt([{action:d,error:-102,message:"no oauth",data:{}}]),Lt.error.loginFailed("Zalo app has not been activated")}}))}))()},u.verifyUserAuthorized=function(){var e=this;return Pe((function(){var t,n,r,i,a,o;return Ce(this,(function(s){switch(s.label){case 0:return n=!0,[4,e.jumpAndGetToken()];case 1:if(s.sent(),!1!==(null===(t=e._miniProgramConfig)||void 0===t?void 0:t.userAuthorized))return[3,7];s.label=2;case 2:return s.trys.push([2,6,,7]),(r=Yt("action.mp.user.authorize"))&&r.isSupported?[4,xt()]:[3,5];case 3:return!1!==(null==(a=s.sent())||null===(i=a.authSetting)||void 0===i?void 0:i["scope.userInfo"])?[3,5]:[4,Bt()];case 4:o=s.sent(),n=(null==o?void 0:o["scope.userInfo"])||!1,s.label=5;case 5:return[3,7];case 6:return s.sent(),n=!1,[3,7];case 7:return[2,n]}}))}))()},u.setAccessToken=function(e){this.manualSetAccessToken=!0,this._accessToken=e,window.ZJSBridge.setZAccSession&&window.ZJSBridge.setZAccSession(e)},u.getJSAccessToken=function(){var e=this;return Pe((function(){var t;return Ce(this,(function(n){switch(n.label){case 0:return e._jsAccessToken.length>0?[2,Promise.resolve(e._jsAccessToken)]:[4,e.jumpAndGetToken(c.JS_TOKEN)];case 1:return t=n.sent(),[2,Promise.resolve(t)]}}))}))()},u.getSync=function(e){var t;return null===(t=this._cookies.find((function(t){return t.name===e})))||void 0===t?void 0:t.value},u.jumpAndGetToken=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return new Promise(function(){var r=Pe((function(r){var i,a,o,s;return Ce(this,(function(u){switch(u.label){case 0:return!t&&n._cookies.length>0?Qe.isString(e)?(i=n._cookies.find((function(t){return t.name===e})),[2,r(null==i?void 0:i.value)]):[2,r("")]:(t&&n._jumpStatus===v.DONE&&(n._jumpStatus=void 0),a={name:e,cb:function(e){return r(e)}},[4,n.jump()]);case 1:return(o=u.sent())===v.DONE?(n._jumpStatus=o,n.WAITING_QUEUE.length&&(n.WAITING_QUEUE.forEach((function(e){var t=n._cookies.find((function(t){return t.name===e.name}));e.cb(null==t?void 0:t.value)})),n.WAITING_QUEUE=[]),s=n._cookies.find((function(e){return e.name===a.name})),a.cb(null==s?void 0:s.value)):n.WAITING_QUEUE.push(a),[2]}}))}));return function(e){return r.apply(this,arguments)}}())},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},n=e,(a=[{key:"jumpStatus",get:function(){return this._jumpStatus}},{key:"accessToken",set:function(e){this._accessToken=e,window.ZJSBridge.setZAccSession&&window.ZJSBridge.setZAccSession(e)}},{key:"miniProgramConfig",get:function(){return this._miniProgramConfig}}])&&$e(n.prototype,a),s&&$e(n,s),e}(),Wt=zt.getInstance(),Ft=Ge("zmp:utils:common"),Gt=function(e){if(Qe.isObject(JSON)&&JSON.stringify)return JSON.stringify(e);if(void 0===e)return"undefined";if(null===e)return"null";try{if("string"==typeof e||null!==e.constructor.toString().match(/string/i))return'"'+e.replace(/"/g,'\\"')+'"'}catch(e){console.log(e)}var t;if(null!==Object.prototype.toString.call(e).match(/array/i)){t=[];for(var n=e.length,r=0;r<n;r++)t.push(Gt(e[r]));return"["+t.join(",")+"]"}if("object"==typeof e){for(var i in t=[],e)t.push('"'+i+'":'+Gt(e[i]));return"{"+t.join(",")+"}"}return e.toString()},Vt=function(e){var t,n,r=ue[e],i=(null===(t=Ue())||void 0===t?void 0:t.zaloVersion)||0,a="versionLive"in r&&(null==r||null===(n=r.versionLive)||void 0===n?void 0:n.iOS)||0;return!!(Array.isArray(window.ignoreCheckSupport)&&window.ignoreCheckSupport.length>0&&window.ignoreCheckSupport.includes(e))||Number(i)>=a},Ht=function(e){try{if(e){Ft(e);var t=e.replace(/\\/g,"").replace(/&#39;/g,"'");try{t=decodeURIComponent(atob(e))}catch(e){}var n=JSON.parse(t);return Ft("formattedValue",t,n,void 0===n?"undefined":Fe(n)),n}return null}catch(t){return Ft("parse json error:",t),e}},Kt=function(e){if(Qe.isObject(JSON)&&JSON.parse&&Qe.isString(e)){var t=e.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\x00/g,"");return JSON.parse(t,(function(e,t){return t}))}return Qe.isObject(e)?e:new Function("return "+e)()},Jt=function(e){for(var t=document.getElementsByTagName("meta"),n=0;n<t.length;n++)if(t[n].getAttribute("name")===e||t[n].getAttribute("property")===e)return t[n].getAttribute("content");return""},qt=function(e){return btoa(encodeURIComponent(JSON.stringify(e)))};var Qt=function(e){return"hidden"===e?A.hidden:"transparent"===e?A.transparent:A.normal},Yt=function(e){if(void 0!==e){var t=Wt.miniProgramConfig;return((null==t?void 0:t.dynamicApis)||[]).find((function(t){return t.action===e&&!1===t.clientHandle}))}},$t=function(e){if(void 0===e)return!1;var t=Wt.miniProgramConfig;return((null==t?void 0:t.requiredAuthenList)||[]).indexOf(e)>=0},Xt=function(){var e=Pe((function(){return Ce(this,(function(e){return[2,new Promise(function(){var e=Pe((function(e,t){var n;return Ce(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Wt.jumpAndGetToken()];case 1:return t.sent(),n=Wt.miniProgramConfig,e(!0===(null==n?void 0:n.canUseAccessTokenByDefault)),[3,3];case 2:return t.sent(),e(!1),[3,3];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}())]}))}));return function(){return e.apply(this,arguments)}}(),en=function(e){return e.replace("action.","").replace(/\./g,"_").toUpperCase()},tn=function(e){return"action.".concat(e.replace(/\_/g,".").toLowerCase())};function nn(e,t,n,r){var i,a;!function(e,t){if(se[e]){var n=Wt.getRetryLimit(e);n.lastCall&&(new Date).getTime()-n.lastCall>1e3&&Wt.resetRetryLimit(e);var r=n.limit||3;if(n.retry&&n.retry>=r)throw Rt(Lt.error.failLimit(),e);Wt.increaseRetryLimit(e)}}(e);var o=Array.isArray(n)&&n.length>0&&(null===(i=n[0])||void 0===i?void 0:i.success),s=Array.isArray(n)&&n.length>0&&(null===(a=n[0])||void 0===a?void 0:a.fail);try{var u=n;t.length>0&&t.forEach((function(t,r){var i=t.safeParse(n[r]);if(!i.success){var a,o=null===(a=i.error)||void 0===a?void 0:a.issues,s=o.map((function(e,t){var n=e.path.length>0?e.path.map((function(e,t){return t>0?"[".concat(e,"]"):e})).join(""):"arg";return"Error ".concat(t+1,": Code: ").concat(e.code," ~ Path: ").concat(n," ~ Message: ").concat(e.message)})).join(" | "),c=Lt.error.badRequest(s);throw c.detail=o,Rt(c,e)}u.push(i.data)}));var c=r.apply(void 0,Ne(u));return Qe.isPromise(c)?new Promise((function(t,n){c.then((function(e){if(!Qe.isNull(o)&&Qe.isFunction(o))return o(e);t(c)})).catch((function(t){var r=Rt(t,e);if(!Qe.isNull(s)&&Qe.isFunction(s))return s(r);n(r)}))})):c}catch(t){if(!Qe.isNull(s)&&Qe.isFunction(s))return s(t);throw Rt(t,e)}}function rn(e){return an.apply(this,arguments)}function an(){return(an=Pe((function(e){return Ce(this,(function(t){return[2,nn("login",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Wt.jumpAndGetToken(c.ZOAUTH)]:[3,2];case 1:return e.sent(),[2,"Success"];case 2:return Le.isMpWeb?[2,Promise.resolve("")]:[2,Promise.reject(Ze("login",{}))]}}))})))]}))}))).apply(this,arguments)}function on(e){return sn.apply(this,arguments)}function sn(){return(sn=Pe((function(e){return Ce(this,(function(t){return[2,nn("getAccessToken",[],[e],Pe((function(){var e;return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Xt()]:[3,3];case 1:return e=!t.sent(),[4,Wt.getAccessToken(e)];case 2:return[2,t.sent()||""];case 3:return Le.isMpWeb?[2,Promise.resolve("")]:[2,Promise.reject(Ze("getAccessToken",{}))]}}))})))]}))}))).apply(this,arguments)}var un,cn="2.45.2";function ln(){return nn("getVersion",[],[],(function(){return cn}))}function dn(){var e,t;return{version:Jt("version-id")||"",apiVersion:cn,zaloVersion:(null===(e=Ue())||void 0===e?void 0:e.zaloVersion)||"",platform:(null===(t=Ue())||void 0===t?void 0:t.platformName)||"",language:navigator.language,zaloLanguage:window.zLanguage||"vi",zaloTheme:window.zTheme||"light"}}function pn(){return nn("getSystemInfo",[],[],(function(){return dn()}))}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(un||(un={}));const fn=un.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),hn=e=>{switch(typeof e){case"undefined":return fn.undefined;case"string":return fn.string;case"number":return isNaN(e)?fn.nan:fn.number;case"boolean":return fn.boolean;case"function":return fn.function;case"bigint":return fn.bigint;case"symbol":return fn.symbol;case"object":return Array.isArray(e)?fn.array:null===e?fn.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?fn.promise:"undefined"!=typeof Map&&e instanceof Map?fn.map:"undefined"!=typeof Set&&e instanceof Set?fn.set:"undefined"!=typeof Date&&e instanceof Date?fn.date:fn.object;default:return fn.unknown}},mn=un.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class vn extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,un.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}vn.create=e=>new vn(e);const gn=(e,t)=>{let n;switch(e.code){case mn.invalid_type:n=e.received===fn.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case mn.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,un.jsonStringifyReplacer)}`;break;case mn.unrecognized_keys:n=`Unrecognized key(s) in object: ${un.joinValues(e.keys,", ")}`;break;case mn.invalid_union:n="Invalid input";break;case mn.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${un.joinValues(e.options)}`;break;case mn.invalid_enum_value:n=`Invalid enum value. Expected ${un.joinValues(e.options)}, received '${e.received}'`;break;case mn.invalid_arguments:n="Invalid function arguments";break;case mn.invalid_return_type:n="Invalid function return type";break;case mn.invalid_date:n="Invalid date";break;case mn.invalid_string:"object"==typeof e.validation?"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:un.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case mn.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(e.minimum)}`:"Invalid input";break;case mn.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(e.maximum)}`:"Invalid input";break;case mn.custom:n="Invalid input";break;case mn.invalid_intersection_types:n="Intersection results could not be merged";break;case mn.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case mn.not_finite:n="Number must be finite";break;default:n=t.defaultError,un.assertNever(e)}return{message:n}};let yn=gn;function _n(){return yn}const bn=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};let s="";const u=r.filter((e=>!!e)).slice().reverse();for(const e of u)s=e(o,{data:t,defaultError:s}).message;return{...i,path:a,message:i.message||s}};function wn(e,t){const n=bn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,_n(),gn].filter((e=>!!e))});e.common.issues.push(n)}class Tn{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return En;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return Tn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return En;if("aborted"===i.status)return En;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),(void 0!==i.value||r.alwaysSet)&&(n[t.value]=i.value)}return{status:e.value,value:n}}}const En=Object.freeze({status:"aborted"}),In=e=>({status:"dirty",value:e}),Pn=e=>({status:"valid",value:e}),Sn=e=>"aborted"===e.status,An=e=>"dirty"===e.status,On=e=>"valid"===e.status,Nn=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Cn;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Cn||(Cn={}));class kn{constructor(e,t,n,r){this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._path.concat(this._key)}}const Mn=(e,t)=>{if(On(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new vn(e.common.issues)}};function Rn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:i}}class Dn{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return hn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:hn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Tn,ctx:{common:e.parent.common,data:e.data,parsedType:hn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Nn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:hn(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Mn(r,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:hn(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(Nn(r)?r:Promise.resolve(r));return Mn(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const i=e(t),a=()=>r.addIssue({code:mn.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(a(),!1))):!!i||(a(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new yr({schema:this,typeName:Nr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return _r.create(this,this._def)}nullable(){return br.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $n.create(this,this._def)}promise(){return gr.create(this,this._def)}or(e){return nr.create([this,e],this._def)}and(e){return or.create(this,e,this._def)}transform(e){return new yr({...Rn(this._def),schema:this,typeName:Nr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new wr({...Rn(this._def),innerType:this,defaultValue:t,typeName:Nr.ZodDefault})}brand(){return new Pr({typeName:Nr.ZodBranded,type:this,...Rn(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Tr({...Rn(this._def),innerType:this,catchValue:t,typeName:Nr.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Sr.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xn=/^c[^\s-]{8,}$/i,Un=/^[a-z][a-z0-9]*$/,Ln=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,jn=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|([^-]([a-zA-Z0-9-]*\.)+[a-zA-Z]{2,}))$/;class Zn extends Dn{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement((t=>e.test(t)),{validation:t,code:mn.invalid_string,...Cn.errToObj(n)}),this.nonempty=e=>this.min(1,Cn.errToObj(e)),this.trim=()=>new Zn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==fn.string){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.string,received:t.parsedType}),En}const t=new Tn;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,a=e.data.length<i.value;(r||a)&&(n=this._getOrReturnCtx(e,n),r?wn(n,{code:mn.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&wn(n,{code:mn.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)jn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"email",code:mn.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Ln.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"uuid",code:mn.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)xn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"cuid",code:mn.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Un.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"cuid2",code:mn.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),wn(n,{validation:"url",code:mn.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"regex",code:mn.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){((r=i).precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):0===r.precision?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else un.assertNever(i);var r;return{status:t.value,value:e.data}}_addCheck(e){return new Zn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Cn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Cn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Cn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Cn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Cn.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...Cn.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Cn.errToObj(t)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Cn.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Cn.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Cn.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Cn.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Cn.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Bn(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}Zn.create=e=>{var t;return new Zn({checks:[],typeName:Nr.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Rn(e)})};class zn extends Dn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==fn.number){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.number,received:t.parsedType}),En}let t;const n=new Tn;for(const r of this._def.checks)if("int"===r.kind)un.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Bn(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.not_finite,message:r.message}),n.dirty()):un.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Cn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Cn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Cn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Cn.toString(t))}setLimit(e,t,n,r){return new zn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Cn.toString(r)}]})}_addCheck(e){return new zn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Cn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Cn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Cn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Cn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Cn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Cn.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Cn.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&un.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}zn.create=e=>new zn({checks:[],typeName:Nr.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Rn(e)});class Wn extends Dn{_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==fn.bigint){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.bigint,received:t.parsedType}),En}return Pn(e.data)}}Wn.create=e=>{var t;return new Wn({typeName:Nr.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Rn(e)})};class Fn extends Dn{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==fn.boolean){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.boolean,received:t.parsedType}),En}return Pn(e.data)}}Fn.create=e=>new Fn({typeName:Nr.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Rn(e)});class Gn extends Dn{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==fn.date){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.date,received:t.parsedType}),En}if(isNaN(e.data.getTime())){return wn(this._getOrReturnCtx(e),{code:mn.invalid_date}),En}const t=new Tn;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):un.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gn({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Cn.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Cn.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Gn.create=e=>new Gn({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Nr.ZodDate,...Rn(e)});class Vn extends Dn{_parse(e){if(this._getType(e)!==fn.symbol){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.symbol,received:t.parsedType}),En}return Pn(e.data)}}Vn.create=e=>new Vn({typeName:Nr.ZodSymbol,...Rn(e)});class Hn extends Dn{_parse(e){if(this._getType(e)!==fn.undefined){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.undefined,received:t.parsedType}),En}return Pn(e.data)}}Hn.create=e=>new Hn({typeName:Nr.ZodUndefined,...Rn(e)});class Kn extends Dn{_parse(e){if(this._getType(e)!==fn.null){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.null,received:t.parsedType}),En}return Pn(e.data)}}Kn.create=e=>new Kn({typeName:Nr.ZodNull,...Rn(e)});class Jn extends Dn{constructor(){super(...arguments),this._any=!0}_parse(e){return Pn(e.data)}}Jn.create=e=>new Jn({typeName:Nr.ZodAny,...Rn(e)});class qn extends Dn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pn(e.data)}}qn.create=e=>new qn({typeName:Nr.ZodUnknown,...Rn(e)});class Qn extends Dn{_parse(e){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.never,received:t.parsedType}),En}}Qn.create=e=>new Qn({typeName:Nr.ZodNever,...Rn(e)});class Yn extends Dn{_parse(e){if(this._getType(e)!==fn.undefined){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.void,received:t.parsedType}),En}return Pn(e.data)}}Yn.create=e=>new Yn({typeName:Nr.ZodVoid,...Rn(e)});class $n extends Dn{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==fn.array)return wn(t,{code:mn.invalid_type,expected:fn.array,received:t.parsedType}),En;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(wn(t,{code:e?mn.too_big:mn.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(wn(t,{code:mn.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(wn(t,{code:mn.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new kn(t,e,t.path,n))))).then((e=>Tn.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>r.type._parseSync(new kn(t,e,t.path,n))));return Tn.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new $n({...this._def,minLength:{value:e,message:Cn.toString(t)}})}max(e,t){return new $n({...this._def,maxLength:{value:e,message:Cn.toString(t)}})}length(e,t){return new $n({...this._def,exactLength:{value:e,message:Cn.toString(t)}})}nonempty(e){return this.min(1,e)}}var Xn;function er(e){if(e instanceof tr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=_r.create(er(r))}return new tr({...e._def,shape:()=>t})}return e instanceof $n?$n.create(er(e.element)):e instanceof _r?_r.create(er(e.unwrap())):e instanceof br?br.create(er(e.unwrap())):e instanceof sr?sr.create(e.items.map((e=>er(e)))):e}$n.create=(e,t)=>new $n({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Nr.ZodArray,...Rn(t)}),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Xn||(Xn={}));class tr extends Dn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=un.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==fn.object){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.object,received:t.parsedType}),En}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Qn&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||a.push(e);const o=[];for(const e of i){const t=r[e],i=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new kn(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Qn){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of a)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)a.length>0&&(wn(n,{code:mn.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new kn(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>Tn.mergeObjectSync(t,e))):Tn.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return new tr({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,a,o;const s=null!==(a=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==a?a:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=Cn.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}})}strip(){return new tr({...this._def,unknownKeys:"strip"})}passthrough(){return new tr({...this._def,unknownKeys:"passthrough"})}extend(e){return new tr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Xn.mergeShapes(this._def.shape(),e._def.shape()),typeName:Nr.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new tr({...this._def,catchall:e})}pick(e){const t={};return un.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new tr({...this._def,shape:()=>t})}omit(e){const t={};return un.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new tr({...this._def,shape:()=>t})}deepPartial(){return er(this)}partial(e){const t={};return un.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new tr({...this._def,shape:()=>t})}required(e){const t={};return un.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof _r;)e=e._def.innerType;t[n]=e}})),new tr({...this._def,shape:()=>t})}keyof(){return hr(un.objectKeys(this.shape))}}tr.create=(e,t)=>new tr({shape:()=>e,unknownKeys:"strip",catchall:Qn.create(),typeName:Nr.ZodObject,...Rn(t)}),tr.strictCreate=(e,t)=>new tr({shape:()=>e,unknownKeys:"strict",catchall:Qn.create(),typeName:Nr.ZodObject,...Rn(t)}),tr.lazycreate=(e,t)=>new tr({shape:e,unknownKeys:"strip",catchall:Qn.create(),typeName:Nr.ZodObject,...Rn(t)});class nr extends Dn{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new vn(e.ctx.common.issues)));return wn(t,{code:mn.invalid_union,unionErrors:n}),En}));{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map((e=>new vn(e)));return wn(t,{code:mn.invalid_union,unionErrors:i}),En}}get options(){return this._def.options}}nr.create=(e,t)=>new nr({options:e,typeName:Nr.ZodUnion,...Rn(t)});const rr=e=>e instanceof pr?rr(e.schema):e instanceof yr?rr(e.innerType()):e instanceof fr?[e.value]:e instanceof mr?e.options:e instanceof vr?Object.keys(e.enum):e instanceof wr?rr(e._def.innerType):e instanceof Hn?[void 0]:e instanceof Kn?[null]:null;class ir extends Dn{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fn.object)return wn(t,{code:mn.invalid_type,expected:fn.object,received:t.parsedType}),En;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(wn(t,{code:mn.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),En)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=rr(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new ir({typeName:Nr.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Rn(n)})}}function ar(e,t){const n=hn(e),r=hn(t);if(e===t)return{valid:!0,data:e};if(n===fn.object&&r===fn.object){const n=un.objectKeys(t),r=un.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of r){const r=ar(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}if(n===fn.array&&r===fn.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=ar(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===fn.date&&r===fn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class or extends Dn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Sn(e)||Sn(r))return En;const i=ar(e.value,r.value);return i.valid?((An(e)||An(r))&&t.dirty(),{status:t.value,value:i.data}):(wn(n,{code:mn.invalid_intersection_types}),En)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}or.create=(e,t,n)=>new or({left:e,right:t,typeName:Nr.ZodIntersection,...Rn(n)});class sr extends Dn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==fn.array)return wn(n,{code:mn.invalid_type,expected:fn.array,received:n.parsedType}),En;if(n.data.length<this._def.items.length)return wn(n,{code:mn.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&n.data.length>this._def.items.length&&(wn(n,{code:mn.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new kn(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>Tn.mergeArray(t,e))):Tn.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new sr({...this._def,rest:e})}}sr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sr({items:e,typeName:Nr.ZodTuple,rest:null,...Rn(t)})};class ur extends Dn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==fn.object)return wn(n,{code:mn.invalid_type,expected:fn.object,received:n.parsedType}),En;const r=[],i=this._def.keyType,a=this._def.valueType;for(const e in n.data)r.push({key:i._parse(new kn(n,e,n.path,e)),value:a._parse(new kn(n,n.data[e],n.path,e))});return n.common.async?Tn.mergeObjectAsync(t,r):Tn.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ur(t instanceof Dn?{keyType:e,valueType:t,typeName:Nr.ZodRecord,...Rn(n)}:{keyType:Zn.create(),valueType:e,typeName:Nr.ZodRecord,...Rn(t)})}}class cr extends Dn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==fn.map)return wn(n,{code:mn.invalid_type,expected:fn.map,received:n.parsedType}),En;const r=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map((([e,t],a)=>({key:r._parse(new kn(n,e,n.path,[a,"key"])),value:i._parse(new kn(n,t,n.path,[a,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of a){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return En;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of a){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return En;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}cr.create=(e,t,n)=>new cr({valueType:t,keyType:e,typeName:Nr.ZodMap,...Rn(n)});class lr extends Dn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==fn.set)return wn(n,{code:mn.invalid_type,expected:fn.set,received:n.parsedType}),En;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(wn(n,{code:mn.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(wn(n,{code:mn.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function a(e){const n=new Set;for(const r of e){if("aborted"===r.status)return En;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map(((e,t)=>i._parse(new kn(n,e,n.path,t))));return n.common.async?Promise.all(o).then((e=>a(e))):a(o)}min(e,t){return new lr({...this._def,minSize:{value:e,message:Cn.toString(t)}})}max(e,t){return new lr({...this._def,maxSize:{value:e,message:Cn.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}lr.create=(e,t)=>new lr({valueType:e,minSize:null,maxSize:null,typeName:Nr.ZodSet,...Rn(t)});class dr extends Dn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fn.function)return wn(t,{code:mn.invalid_type,expected:fn.function,received:t.parsedType}),En;function n(e,n){return bn({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),gn].filter((e=>!!e)),issueData:{code:mn.invalid_arguments,argumentsError:n}})}function r(e,n){return bn({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),gn].filter((e=>!!e)),issueData:{code:mn.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;return this._def.returns instanceof gr?Pn((async(...e)=>{const t=new vn([]),o=await this._def.args.parseAsync(e,i).catch((r=>{throw t.addIssue(n(e,r)),t})),s=await a(...o);return await this._def.returns._def.type.parseAsync(s,i).catch((e=>{throw t.addIssue(r(s,e)),t}))})):Pn(((...e)=>{const t=this._def.args.safeParse(e,i);if(!t.success)throw new vn([n(e,t.error)]);const o=a(...t.data),s=this._def.returns.safeParse(o,i);if(!s.success)throw new vn([r(o,s.error)]);return s.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new dr({...this._def,args:sr.create(e).rest(qn.create())})}returns(e){return new dr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new dr({args:e||sr.create([]).rest(qn.create()),returns:t||qn.create(),typeName:Nr.ZodFunction,...Rn(n)})}}class pr extends Dn{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pr.create=(e,t)=>new pr({getter:e,typeName:Nr.ZodLazy,...Rn(t)});class fr extends Dn{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return wn(t,{received:t.data,code:mn.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:e.data}}get value(){return this._def.value}}function hr(e,t){return new mr({values:e,typeName:Nr.ZodEnum,...Rn(t)})}fr.create=(e,t)=>new fr({value:e,typeName:Nr.ZodLiteral,...Rn(t)});class mr extends Dn{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return wn(t,{expected:un.joinValues(n),received:t.parsedType,code:mn.invalid_type}),En}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return wn(t,{received:t.data,code:mn.invalid_enum_value,options:n}),En}return Pn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return mr.create(e)}exclude(e){return mr.create(this.options.filter((t=>!e.includes(t))))}}mr.create=hr;class vr extends Dn{_parse(e){const t=un.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==fn.string&&n.parsedType!==fn.number){const e=un.objectValues(t);return wn(n,{expected:un.joinValues(e),received:n.parsedType,code:mn.invalid_type}),En}if(-1===t.indexOf(e.data)){const e=un.objectValues(t);return wn(n,{received:n.data,code:mn.invalid_enum_value,options:e}),En}return Pn(e.data)}get enum(){return this._def.values}}vr.create=(e,t)=>new vr({values:e,typeName:Nr.ZodNativeEnum,...Rn(t)});class gr extends Dn{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fn.promise&&!1===t.common.async)return wn(t,{code:mn.invalid_type,expected:fn.promise,received:t.parsedType}),En;const n=t.parsedType===fn.promise?t.data:Promise.resolve(t.data);return Pn(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}gr.create=(e,t)=>new gr({type:e,typeName:Nr.ZodPromise,...Rn(t)});class yr extends Dn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null;if("preprocess"===r.type){const e=r.transform(n.data);return n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}const i={addIssue:e=>{wn(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?En:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?En:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!On(e))return e;const a=r.transform(e.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>On(e)?Promise.resolve(r.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}un.assertNever(r)}}yr.create=(e,t,n)=>new yr({schema:e,typeName:Nr.ZodEffects,effect:t,...Rn(n)}),yr.createWithPreprocess=(e,t,n)=>new yr({schema:t,effect:{type:"preprocess",transform:e},typeName:Nr.ZodEffects,...Rn(n)});class _r extends Dn{_parse(e){return this._getType(e)===fn.undefined?Pn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_r.create=(e,t)=>new _r({innerType:e,typeName:Nr.ZodOptional,...Rn(t)});class br extends Dn{_parse(e){return this._getType(e)===fn.null?Pn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}br.create=(e,t)=>new br({innerType:e,typeName:Nr.ZodNullable,...Rn(t)});class wr extends Dn{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===fn.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}wr.create=(e,t)=>new wr({innerType:e,typeName:Nr.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Rn(t)});class Tr extends Dn{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t,common:{...t.common,issues:[]}}});return Nn(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue()}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue()}}removeCatch(){return this._def.innerType}}Tr.create=(e,t)=>new Tr({innerType:e,typeName:Nr.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Rn(t)});class Er extends Dn{_parse(e){if(this._getType(e)!==fn.nan){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:fn.nan,received:t.parsedType}),En}return{status:"valid",value:e.data}}}Er.create=e=>new Er({typeName:Nr.ZodNaN,...Rn(e)});const Ir=Symbol("zod_brand");class Pr extends Dn{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Sr extends Dn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?En:"dirty"===e.status?(t.dirty(),In(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?En:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Sr({in:e,out:t,typeName:Nr.ZodPipeline})}}const Ar=(e,t={},n)=>e?Jn.create().superRefine(((r,i)=>{if(!e(r)){const e="function"==typeof t?t(r):t,a="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...a,fatal:n})}})):Jn.create(),Or={object:tr.lazycreate};var Nr;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"}(Nr||(Nr={}));const Cr=Zn.create,kr=zn.create,Mr=Er.create,Rr=Wn.create,Dr=Fn.create,xr=Gn.create,Ur=Vn.create,Lr=Hn.create,jr=Kn.create,Zr=Jn.create,Br=qn.create,zr=Qn.create,Wr=Yn.create,Fr=$n.create,Gr=tr.create,Vr=tr.strictCreate,Hr=nr.create,Kr=ir.create,Jr=or.create,qr=sr.create,Qr=ur.create,Yr=cr.create,$r=lr.create,Xr=dr.create,ei=pr.create,ti=fr.create,ni=mr.create,ri=vr.create,ii=gr.create,ai=yr.create,oi=_r.create,si=br.create,ui=yr.createWithPreprocess,ci=Sr.create,li={string:e=>Zn.create({...e,coerce:!0}),number:e=>zn.create({...e,coerce:!0}),boolean:e=>Fn.create({...e,coerce:!0}),bigint:e=>Wn.create({...e,coerce:!0}),date:e=>Gn.create({...e,coerce:!0})},di=En;var pi=Object.freeze({__proto__:null,defaultErrorMap:gn,setErrorMap:function(e){yn=e},getErrorMap:_n,makeIssue:bn,EMPTY_PATH:[],addIssueToContext:wn,ParseStatus:Tn,INVALID:En,DIRTY:In,OK:Pn,isAborted:Sn,isDirty:An,isValid:On,isAsync:Nn,get util(){return un},ZodParsedType:fn,getParsedType:hn,ZodType:Dn,ZodString:Zn,ZodNumber:zn,ZodBigInt:Wn,ZodBoolean:Fn,ZodDate:Gn,ZodSymbol:Vn,ZodUndefined:Hn,ZodNull:Kn,ZodAny:Jn,ZodUnknown:qn,ZodNever:Qn,ZodVoid:Yn,ZodArray:$n,get objectUtil(){return Xn},ZodObject:tr,ZodUnion:nr,ZodDiscriminatedUnion:ir,ZodIntersection:or,ZodTuple:sr,ZodRecord:ur,ZodMap:cr,ZodSet:lr,ZodFunction:dr,ZodLazy:pr,ZodLiteral:fr,ZodEnum:mr,ZodNativeEnum:vr,ZodPromise:gr,ZodEffects:yr,ZodTransformer:yr,ZodOptional:_r,ZodNullable:br,ZodDefault:wr,ZodCatch:Tr,ZodNaN:Er,BRAND:Ir,ZodBranded:Pr,ZodPipeline:Sr,custom:Ar,Schema:Dn,ZodSchema:Dn,late:Or,get ZodFirstPartyTypeKind(){return Nr},coerce:li,any:Zr,array:Fr,bigint:Rr,boolean:Dr,date:xr,discriminatedUnion:Kr,effect:ai,enum:ni,function:Xr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ar((t=>t instanceof e),t,!0),intersection:Jr,lazy:ei,literal:ti,map:Yr,nan:Mr,nativeEnum:ri,never:zr,null:jr,nullable:si,number:kr,object:Gr,oboolean:()=>Dr().optional(),onumber:()=>kr().optional(),optional:oi,ostring:()=>Cr().optional(),pipeline:ci,preprocess:ui,promise:ii,record:Qr,set:$r,strictObject:Vr,string:Cr,symbol:Ur,transformer:ai,tuple:qr,undefined:Lr,union:Hr,unknown:Br,void:Wr,NEVER:di,ZodIssueCode:mn,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:vn}),fi=function(){function e(){var t,n,r,a,s,u,c,l,d,p,f,h,m,v,g,y,_,b,w,T,E,I,P,S,A,O,N;Ye(this,e),this.initConfig=window.APP_CONFIG;var C=Qe.isString(null===(t=this.initConfig)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.headerColor)&&(null===(r=this.initConfig)||void 0===r||null===(a=r.app)||void 0===a||null===(s=a.headerColor)||void 0===s?void 0:s.length)>0?_e:be;this.hideIOSSafeAreaBottom=!!(null===(u=this.initConfig)||void 0===u||null===(c=u.app)||void 0===c?void 0:c.hideIOSSafeAreaBottom),this.hideAndroidBottomNavigationBar=!!(null===(l=this.initConfig)||void 0===l||null===(d=l.app)||void 0===d?void 0:d.hideAndroidBottomNavigationBar);var k,M,R="none"===(null===(p=this.initConfig)||void 0===p||null===(f=p.app)||void 0===f?void 0:f.leftButton)||"home"===(null===(h=this.initConfig)||void 0===h||null===(m=h.app)||void 0===m?void 0:m.leftButton)?ye.HIDE_BACK:ye.SHOW_BACK,D="home"===(null===(v=this.initConfig)||void 0===v||null===(g=v.app)||void 0===g?void 0:g.leftButton)||"both"===(null===(y=this.initConfig)||void 0===y||null===(_=y.app)||void 0===_?void 0:_.leftButton)?ye.SHOW_HOME:ye.HIDE_HOME,x=new URL(location.href),U=Qt(null===(b=this.initConfig)||void 0===b||null===(w=b.app)||void 0===w?void 0:w.statusBar);"boolean"==typeof(null===(T=this.initConfig)||void 0===T||null===(E=T.app)||void 0===E?void 0:E.actionBarHidden)&&(C=(null===(k=this.initConfig)||void 0===k||null===(M=k.app)||void 0===M?void 0:M.actionBarHidden)?be:_e);this.config={actionbarType:C,buttonType:R,statusbarType:U,dataConfig:{backgroundColor:(null===(I=this.initConfig)||void 0===I||null===(P=I.app)||void 0===P?void 0:P.headerColor)||we,textColor:(null===(S=this.initConfig)||void 0===S||null===(A=S.app)||void 0===A?void 0:A.textColor)||"",textAlign:(null===(O=this.initConfig)||void 0===O||null===(N=O.app)||void 0===N?void 0:N.textAlign)||Te,viewInLeftType:R,confirmToExit:1},homeConfig:{enable:D,url:"".concat(o,"/").concat(i,"/").concat(x.search)}}}var t=e.prototype;return t.setNavigationBarTitle=function(e){return Pe((function(){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("CHANGE_TITLE_HEADER",{title:e},{success:function(){t(),document.title=e},fail:function(e){n(e)}},{timeout:!1})}))]}))}))()},t.setNavigationBarLeftButton=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.dataConfig.confirmToExit,n=this;return Pe((function(){var r,i;return Ce(this,(function(a){return void 0===(void 0===e?"undefined":Fe(e))&&null===(void 0===e?"undefined":Fe(e))||(r="none"===e||"home"===e?ye.HIDE_BACK:ye.SHOW_BACK,i="home"===e||"both"===e?ye.SHOW_HOME:ye.HIDE_HOME,n.config.buttonType=r,n.config.dataConfig.viewInLeftType=r,n.config.homeConfig.enable=i),n.config.dataConfig.confirmToExit=t,[2,new Promise((function(e,t){Zt("CHANGE_ACTIONBAR_LEFTBUTTON_TYPE",ze({},n.config),{success:function(){e()},fail:function(e){t(e)}},{timeout:!1})}))]}))}))()},t.setAndroidBottomNavigationBar=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return Pe((function(){var n,r,i;return Ce(this,(function(a){return r=e?O.hide:O.show,i=null===(n=Ue())||void 0===n?void 0:n.platform,[2,new Promise((function(n,a){if(!(null==i?void 0:i.isAndroid))return n();Zt("CHANGE_BOTTOMBAR",{bottombarType:r},{success:function(){t.hideAndroidBottomNavigationBar=!!e,window.ANDROID_BOTTOM_NAVIGATION_BAR_HIDDEN=!!e,n()},fail:function(e){a(e)}},{timeout:!1})}))]}))}))()},t.setIOSBottomSafeArea=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return Pe((function(){var n,r,i;return Ce(this,(function(a){return r=e?N.hide:N.show,i=null===(n=Ue())||void 0===n?void 0:n.platform,[2,new Promise((function(n,a){if(!(null==i?void 0:i.isIOS))return n();Zt("CHANGE_BOTTOMBAR",{bottombarType:r},{success:function(){t.hideIOSSafeAreaBottom=!!e,window.IOS_BOTTOM_SAFE_AREA_HIDDEN=!!e,n()},fail:function(e){a(e)}},{timeout:!1,delay:200})}))]}))}))()},t.configHeader=function(e){var t=this;return Pe((function(){var n;return Ce(this,(function(r){return n=t.config,Qe.isString(e.headerColor)&&(n.dataConfig.backgroundColor=e.headerColor),Qe.isString(e.headerTextColor)&&(n.dataConfig.textColor=e.headerTextColor),Qe.isString(e.textAlign)&&("left"===e.textAlign?n.dataConfig.textAlign=C.left:"center"===e.textAlign&&(n.dataConfig.textAlign=C.center)),!0===e.hideActionBar?n.actionbarType=be:!1===e.hideActionBar&&(n.actionbarType=_e),"normal"===e.statusBarType?n.statusbarType=A.normal:"hidden"===e.statusBarType?n.statusbarType=A.hidden:"transparent"===e.statusBarType&&(n.statusbarType=A.transparent),[2,new Promise((function(r,i){Zt("CHANGE_ACTIONBAR",ze({},n),{success:function(){var i;t.config=ze({},n);var a,o=null===(i=Ue())||void 0===i?void 0:i.platform;window.STATUS_BAR_TYPE=(a=t.config.statusbarType)===A.hidden?"hidden":a===A.transparent?"transparent":"normal",window.ACTION_BAR_HIDDEN=t.config.actionbarType===be;var s=null===document||void 0===document?void 0:document.querySelector(":root");if(null==o?void 0:o.isAndroid){var u=0;if(("hidden"===e.statusBarType||"transparent"===e.statusBarType)&&e.hideActionBar){var c=window.ANDROID_STATUS_BAR_HEIGHT;isNaN(c)&&(c=Math.round(ZaloJavaScriptInterface.getStatusBarHeight()/window.devicePixelRatio)),u=c}u?null==s||s.style.setProperty("--zaui-safe-area-inset-top","".concat(u,"px")):null==s||s.style.setProperty("--zaui-safe-area-inset-top","env(safe-area-inset-top, 0px)")}r()},fail:function(e){i(e)}},{timeout:!1})}))]}))}))()},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}(),hi=fi.getInstance(),mi=[Gr({title:Cr()}).optional()];function vi(e){return gi.apply(this,arguments)}function gi(){return gi=Pe((function(e){return Ce(this,(function(t){return[2,nn("setNavigationBarTitle",mi,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,hi.setNavigationBarTitle(e.title)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("setNavigationBarTitle",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),gi.apply(this,arguments)}var yi=[Gr({color:Cr(),textColor:pi.enum(["black","white"]).optional(),statusBarColor:Cr().optional()}).optional()];function _i(e){return bi.apply(this,arguments)}function bi(){return bi=Pe((function(e){return Ce(this,(function(t){return[2,nn("setNavigationBarColor",yi,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,hi.configHeader({hideActionBar:!(e.color.length>0),headerTextColor:e.textColor,headerColor:e.color.length>0?e.color:e.statusBarColor})]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("setNavigationBarColor",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),bi.apply(this,arguments)}var wi=[Gr({type:pi.enum(["none","back","home","both"])}).optional()];function Ti(e){return Ei.apply(this,arguments)}function Ei(){return Ei=Pe((function(e){return Ce(this,(function(t){return[2,nn("setNavigationBarLeftButton",wi,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,hi.setNavigationBarLeftButton(e.type)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("setNavigationBarLeftButton",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Ei.apply(this,arguments)}function Ii(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Pi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ii(e,t,"get"))}function Si(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ai(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ii(e,t,"set"),n),n}var Oi,Ni,Ci,ki=function(){function e(){Ye(this,e)}var t=e.prototype;return t.getSynchronize=function(e){return new Map},t.setSynchronize=function(e){return{errorKeys:[]}},t.getInfoSynchronize=function(){return{currentSize:0,limitSize:0}},t.removeSynchronize=function(e){return{errorKeys:[]}},t.clearSynchronize=function(){},t.getItem=function(e){return this.getSynchronize([e]).get(e)||null},t.setItem=function(e,t){if(this.setSynchronize(Be({},e,t)).errorKeys.length>0)throw new Error("Failed to set item: ".concat(e))},t.removeItem=function(e){this.removeSynchronize([e])},t.clear=function(){this.clearSynchronize()},t.getStorageInfo=function(){return this.getInfoSynchronize()},e}(),Mi=new WeakMap,Ri=new WeakMap,Di=new WeakMap,xi=function(e){it(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),Si(at(r=t.call(this)),Mi,{writable:!0,value:localStorage}),Si(at(r),Ri,{writable:!0,value:void 0}),Si(at(r),Di,{writable:!0,value:void 0}),Ai(at(r),Di,{keys:new Set,currentSize:0,limitSize:de}),Ai(at(r),Ri,e),r.findAllCurrentDataByApp(e),r}var r=n.prototype;return r.findAllCurrentDataByApp=function(e){try{var t;for(t in Pi(this,Mi)){if(e)if(t.split("_")[0]!==e)continue;Pi(this,Di).keys.add(t)}}catch(e){}},r.get=function(e){var t=this,n=new Map;return e.forEach((function(e){n.set(e,t.getSync(e))})),Promise.resolve(n)},r.getSync=function(e){return Pi(this,Ri)&&(e="".concat(Pi(this,Ri),"_").concat(e)),Pi(this,Di).keys.has(e)?Pi(this,Mi).getItem(e):null},r.set=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){return Object.entries(e).forEach((function(e){var n=We(e,2),r=n[0],i=n[1];t.setSync(r,i.replace(/\\"/g,'"'))})),[2,Promise.resolve({errorKeys:[]})]}))}))()},r.setSync=function(e,t){Pi(this,Ri)&&(e="".concat(Pi(this,Ri),"_").concat(e)),Pi(this,Mi).setItem(e,t),Pi(this,Di).keys.add(e)},r.getInfo=function(){var e=this;return Pe((function(){return Ce(this,(function(t){return[2,Promise.resolve(e.getInfoSync())]}))}))()},r.getInfoSync=function(){var e=function(e,t){var n,r=0;for(n in e){var i=n.split("_")[0];e.hasOwnProperty(n)&&(t&&i!==t||(r+=2*(e[n].length+n.length)))}return r}(Pi(this,Mi),Pi(this,Ri));return{currentSize:Qe.isNumber(e)?Number((e/1024).toFixed(2)):0,limitSize:Number((de/1024).toFixed(2))}},r.remove=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){return e.forEach((function(e){t.removeSync(e)})),[2,Promise.resolve({errorKeys:[]})]}))}))()},r.removeSync=function(e){Pi(this,Ri)&&(e="".concat(Pi(this,Ri),"_").concat(e)),Pi(this,Di).keys.has(e)&&(Pi(this,Mi).removeItem(e),Pi(this,Di).keys.delete(e))},r.clearAsync=function(){var e=this;return Pe((function(){return Ce(this,(function(t){return[2,Promise.resolve(e.clearSync())]}))}))()},r.clearSync=function(){var e=this;Pi(this,Di).keys.forEach((function(t){Pi(e,Ri)&&t.indexOf(Pi(e,Ri))<0||(Pi(e,Mi).removeItem(t),Pi(e,Di).keys.delete(t))}))},r.setSynchronize=function(e){var t=this;return Object.entries(e).forEach((function(e){var n=We(e,2),r=n[0],i=n[1];t.setSync(r,i)})),{errorKeys:[]}},r.getSynchronize=function(e){var t=this,n=new Map;return e.forEach((function(e){n.set(e,t.getSync(e))})),n},r.getInfoSynchronize=function(){return this.getInfoSync()},r.clearSynchronize=function(){this.clearSync()},n}(ki),Ui=new WeakMap,Li=new WeakMap,ji=function(e){it(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),Si(at(r=t.call(this)),Ui,{writable:!0,value:void 0}),Si(at(r),Li,{writable:!0,value:void 0}),Ai(at(r),Li,{keys:new Set,currentSize:0,limitSize:de}),Ai(at(r),Ui,e),r}var r=n.prototype;return r.get=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){return[2,new Promise((function(n,r){Zt("ZBROWSER_MPDS",{mpds_action:"mpds.get",mpds_data:{keys:e},appId:Pi(t,Ui)},{success:function(e){var t=new Map;e&&e.mpds_data&&e.mpds_data.map&&(t=new Map(Object.entries(e.mpds_data.map))),n(t)},fail:function(e){r(e)}},{isMultiCallback:!1})}))]}))}))()},r.getSynchronize=function(e){var t={mpds_action:"mpds.get",mpds_data:{keys:e},appId:Pi(this,Ui)},n=new Map,r=this.handleResult(t);return r&&r.mpds_data&&r.mpds_data.map&&(n=new Map(Object.entries(r.mpds_data.map))),n},r.set=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){return[2,new Promise((function(n,r){Zt("ZBROWSER_MPDS",{mpds_action:"mpds.set",mpds_data:{map:e},appId:Pi(t,Ui)},{success:function(e){var t=[];e&&e.mpds_data&&e.mpds_data.error_keys&&(t=e.mpds_data.error_keys),n({errorKeys:t})},fail:function(e){r(e)}},{isMultiCallback:!1})}))]}))}))()},r.setSynchronize=function(e){var t={mpds_action:"mpds.set",mpds_data:{map:e},appId:Pi(this,Ui)},n=[],r=this.handleResult(t);return r&&r.mpds_data&&r.mpds_data.error_keys&&(n=r.mpds_data.error_keys),{errorKeys:n}},r.getInfo=function(){var e=this;return Pe((function(){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("ZBROWSER_MPDS",{mpds_action:"mpds.get.size",mpds_data:{},appId:Pi(e,Ui)},{success:function(e){var n=0;e&&e.mpds_data&&e.mpds_data.size&&(n=e.mpds_data.size),t({currentSize:Qe.isNumber(n)?Number(Number(n)/1024):0,limitSize:Number(de/1024)})},fail:function(e){n(e)}},{isMultiCallback:!1})}))]}))}))()},r.getInfoSynchronize=function(){var e={mpds_action:"mpds.get.size",mpds_data:{},appId:Pi(this,Ui)},t=0,n=this.handleResult(e);return n&&n.mpds_data&&n.mpds_data.size&&(t=n.mpds_data.size),{currentSize:Qe.isNumber(t)?Number(Number(t)/1024):0,limitSize:Number(de/1024)}},r.remove=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){return[2,new Promise((function(n,r){Zt("ZBROWSER_MPDS",{mpds_action:"mpds.remove.key",mpds_data:{keys:e},appId:Pi(t,Ui)},{success:function(e){var t=[];e&&e.mpds_data&&e.mpds_data.error_keys&&(t=e.mpds_data.error_keys),n({errorKeys:t})},fail:function(e){r(e)}},{isMultiCallback:!1})}))]}))}))()},r.removeSynchronize=function(e){var t={mpds_action:"mpds.remove.key",mpds_data:{keys:e},appId:Pi(this,Ui)},n=[],r=this.handleResult(t);return r&&r.mpds_data&&r.mpds_data.error_keys&&(n=r.mpds_data.error_keys),{errorKeys:n}},r.clearAsync=function(){var e=this;return Pe((function(){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("ZBROWSER_MPDS",{mpds_action:"mpds.clear.appData",mpds_data:{},appId:Pi(e,Ui)},{success:function(){t()},fail:function(e){n(e)}},{isMultiCallback:!1})}))]}))}))()},r.clearSynchronize=function(){var e={mpds_action:"mpds.clear.appData",mpds_data:{},appId:Pi(this,Ui)};this.handleResult(e)},r.handleResult=function(e){var t=null;try{var n=ZaloJavaScriptInterface.processActionMPDS(JSON.stringify(e));if(n=JSON.parse(n)){if(0===n.error_code)return n.data;t=jt(n).toJSON()}}catch(e){t=e}finally{if(null!==t)throw t}return{}},n}(ki),Zi=function(){function e(){Ye(this,e)}var t=e.prototype;return t.getDataFromStorage=function(e){var t=this;return Pe((function(){var n,r;return Ce(this,(function(i){switch(i.label){case 0:return[4,t.getInstance().get(e)];case 1:return n=i.sent(),r={},n.forEach((function(e,t){r[t]=Ht(e)})),[2,r]}}))}))()},t.getItem=function(e){return this.getInstance().getItem(e)},t.putDataToStorage=function(e){var t=this;return Pe((function(){var n,r;return Ce(this,(function(i){switch(i.label){case 0:return n=t.getInstance(),r={},Object.entries(e).forEach((function(e){var t=We(e,2),n=t[0],i=t[1];Qe.isUndefined(i)||Qe.isNull(i)||(r[n]=qt(i))})),[4,n.set(r)];case 1:return[2,i.sent()]}}))}))()},t.setItem=function(e,t){return this.getInstance().setItem(e,t)},t.removeDataFromStorage=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){switch(n.label){case 0:return[4,t.getInstance().remove(e)];case 1:return[2,n.sent()]}}))}))()},t.removeItem=function(e){this.getInstance().removeItem(e)},t.clearStorage=function(){var e=this;return Pe((function(){return Ce(this,(function(t){switch(t.label){case 0:return[4,e.getInstance().clearAsync()];case 1:return t.sent(),[2]}}))}))()},t.clearStorageSync=function(){this.getInstance().clear()},t.getStorageInfo=function(){var e=this;return Pe((function(){return Ce(this,(function(t){switch(t.label){case 0:return[4,e.getInstance().getInfo()];case 1:return[2,t.sent()]}}))}))()},t.getStorageInfoSync=function(){return this.getInstance().getStorageInfo()},e}(),Bi=new WeakMap,zi=function(e){it(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),Si(at(r=t.call(this)),Bi,{writable:!0,value:void 0}),Ai(at(r),Bi,e),r}return n.prototype.getInstance=function(){return new xi(Pi(this,Bi))},n}(Zi),Wi=new WeakMap,Fi=function(e){it(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),Si(at(r=t.call(this)),Wi,{writable:!0,value:void 0}),Ai(at(r),Wi,e),r}return n.prototype.getInstance=function(){return new ji(Pi(this,Wi))},n}(Zi),Gi=new zi(i),Vi=(null===(Oi=Ue())||void 0===Oi?void 0:Oi.zaloVersion)||"",Hi=(null===(Ni=Ue())||void 0===Ni?void 0:Ni.platformName)||"unknown";!!Qe.isString(Vi)&&parseInt(Vi,10)>={android:12100571,iOS:400,wp:0,unknown:0}[Hi]&&(null===(Ci=Ue())||void 0===Ci?void 0:Ci.appEnv.isMp)&&(Gi=new Fi(i));var Ki=Gi,Ji=[Gr({data:pi.record(Cr(),pi.any())}).optional()];function qi(e){return Qi.apply(this,arguments)}function Qi(){return Qi=Pe((function(e){return Ce(this,(function(t){return[2,nn("setStorage",Ji,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp||Le.isMpWeb?[4,Ki.putDataToStorage(e.data)]:[3,2];case 1:return[2,t.sent()];case 2:return[2,Promise.reject(Ze("setStorage",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Qi.apply(this,arguments)}var Yi=[Gr({keys:pi.array(Cr())}).optional()];function $i(e){return Xi.apply(this,arguments)}function Xi(){return Xi=Pe((function(e){return Ce(this,(function(t){return[2,nn("getStorage",Yi,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp||Le.isMpWeb?[4,Ki.getDataFromStorage(e.keys)]:[3,2];case 1:return[2,t.sent()];case 2:return[2,Promise.reject(Ze("getStorage",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Xi.apply(this,arguments)}function ea(e){return ta.apply(this,arguments)}function ta(){return(ta=Pe((function(e){return Ce(this,(function(t){return[2,nn("getStorageInfo",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp||Le.isMpWeb?[4,Ki.getStorageInfo()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,Promise.reject(Ze("getStorageInfo",{}))]}}))})))]}))}))).apply(this,arguments)}var na=[Gr({keys:pi.array(Cr())}).optional()];function ra(e){return ia.apply(this,arguments)}function ia(){return ia=Pe((function(e){return Ce(this,(function(t){return[2,nn("removeStorage",na,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp||Le.isMpWeb?[4,Ki.removeDataFromStorage(e.keys)]:[3,2];case 1:return[2,t.sent()];case 2:return[2,Promise.reject(Ze("removeStorage",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),ia.apply(this,arguments)}var aa=[Gr({prefix:Cr().optional()}).optional()];function oa(e){return sa.apply(this,arguments)}function sa(){return(sa=Pe((function(e){return Ce(this,(function(t){return[2,nn("clearStorage",aa,[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp||Le.isMpWeb?[4,Ki.clearStorage()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,Promise.reject(Ze("clearStorage",{}))]}}))})))]}))}))).apply(this,arguments)}var ua=function(){var e=Pe((function(e,t){var n,r,a,o;return Ce(this,(function(s){switch(s.label){case 0:return(r=t)?[3,2]:[4,Xt()];case 1:r=!s.sent(),s.label=2;case 2:return n=r,[4,Wt.getAccessToken(n)];case 3:return a=s.sent(),o="id,name,user_id_by_oa,is_sensitive",o=e?"".concat(o,",picture.type(").concat(e,")"):"".concat(o,",picture"),[4,fetch("".concat(l.GET_USER_INFO,"?fields=").concat(o,"&miniapp_id=").concat(i),{headers:{access_token:a||""}}).then(function(){var e=Pe((function(e){var t,n,r,i,a,o;return Ce(this,(function(s){switch(s.label){case 0:return[4,e.json()];case 1:if(r=s.sent(),void 0!==(i=null==r?void 0:r.error)&&i<0)throw a=(null==r?void 0:r.message)||q,new Mt(i,a);return o=null==r?void 0:r.user_id_by_oa,[2,{id:null==r?void 0:r.id,name:(null==r?void 0:r.name)||"",avatar:(null==r||null===(t=r.picture)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.url)||"",idByOA:o,followedOA:!!(null==r?void 0:r.is_follower),isSensitive:null==r?void 0:r.is_sensitive}]}}))}));return function(t){return e.apply(this,arguments)}}())];case 4:return[2,s.sent()]}}))}));return function(t,n){return e.apply(this,arguments)}}(),ca=[Gr({avatarType:pi.enum(["small","normal","large"]).optional(),autoRequestPermission:pi.boolean().default(!1).optional()}).optional()];function la(e){return da.apply(this,arguments)}function da(){return da=Pe((function(e){return Ce(this,(function(t){return[2,nn("getUserInfo",ca,[e],function(){var e=Pe((function(e){var t,n,r;return Ce(this,(function(i){switch(i.label){case 0:if(!Le.isMp)return[3,4];t=null==e?void 0:e.avatarType,n=null==e?void 0:e.autoRequestPermission,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,ua(t,n)];case 2:return[2,{userInfo:i.sent()}];case 3:return r=i.sent(),[2,Promise.reject(r)];case 4:return Le.isMpWeb?[2,Promise.resolve({userInfo:{id:"3368637342326461234",name:"User Name",avatar:"https://h5.zdn.vn/static/images/avatar.png"}})]:[2,Promise.reject(Ze("getUserInfo",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),da.apply(this,arguments)}var pa=function(e){return{NONE:e?-2:0,WIFI:e?0:1,"2G":2,"3G":e?15:2,"4G":e?13:2}},fa=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("WEBVIEW_NETWORKTYPE",{url:window.location.href,featureId:""},{success:function(t){var n,r,i,a=t.network,o=(null===(n=Ue())||void 0===n||null===(r=n.platform)||void 0===r?void 0:r.isAndroid)||!1;switch(a){case pa(o).NONE:i=f.none;break;case pa(o).WIFI:i=f.wifi;break;case pa(o)["2G"]:case pa(o)["3G"]:case pa(o)["4G"]:i=f.cellular;break;default:i=f.unknown}e(i)},fail:function(e){t(e)}},{})}))]}))}));function ha(e){return ma.apply(this,arguments)}function ma(){return(ma=Pe((function(e){return Ce(this,(function(t){return[2,nn("getNetworkType",[],[e],Pe((function(){var e,t;return Ce(this,(function(n){switch(n.label){case 0:return Le.isMp?[4,fa()]:[3,2];case 1:return[2,{networkType:n.sent()}];case 2:if(Le.isMpWeb){switch(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,e.effectiveType){case"none":t=f.none;break;case"4g":t=f.wifi;break;case"3g":case"2g":t=f.cellular;break;default:t=f.unknown}return[2,Promise.resolve({networkType:t})]}return[2,Promise.reject(Ze("getNetworkType",{}))]}}))})))]}))}))).apply(this,arguments)}var va=[pi.function().args(Gr({isConnected:pi.boolean(),networkType:pi.enum(["none","wifi","cellular","unknown"])})).returns(pi.void())];function ga(e){return nn("onNetworkStatusChange",va,[e],(function(e){var t=e;if(Le.isMp)!function(e){ht.getInstance().on(m.NetworkChanged,(function(t){var n=null==t?void 0:t.state;fa().then((function(t){e({isConnected:"CONNECTED"===n,networkType:t})}))}))}(t);else if(Le.isMpWeb){var n=navigator.connection||navigator.mozConnection||navigator.webkitConnection,r=n.effectiveType;n.addEventListener("change",(function(){var e;switch(r){case"none":e=f.none;break;case"4g":e=f.wifi;break;case"3g":case"2g":e=f.cellular;break;default:e=f.unknown}t({isConnected:!0,networkType:e})}))}}))}var ya=function(){var e=Pe((function(e){var t,n,r,i,a,o;return Ce(this,(function(s){return o={subaction:0,scanning_type:Qe.isNumber(null==e?void 0:e.scanningType)?e.scanningType:0,data:{scan_from_source:Qe.isString(null==e?void 0:e.scanFromSource)?e.scanFromSource:"",expire:Qe.isNumber(null==e?void 0:e.expire)?e.expire:3e3,monitor_interval:Qe.isNumber(null==e?void 0:e.monitorInterval)?e.monitorInterval:60,domain:Qe.isString(null==e?void 0:e.domain)?e.domain:"",scan_config:{scan_time:Qe.isNumber(null==e||null===(t=e.scanConfig)||void 0===t?void 0:t.scanTime)?e.scanConfig.scanTime:15e3,time_between_scan:Qe.isNumber(null==e||null===(n=e.scanConfig)||void 0===n?void 0:n.timeBetweenScan)?e.scanConfig.timeBetweenScan:1e4,beacon_timeout:Qe.isNumber(null==e||null===(r=e.scanConfig)||void 0===r?void 0:r.beaconTimeout)?e.scanConfig.beaconTimeout:3e4,delayCheckConnectedTimeout:Qe.isNumber(null==e||null===(i=e.scanConfig)||void 0===i?void 0:i.delayCheckConnectedTimeout)?e.scanConfig.delayCheckConnectedTimeout:5e3,beaconConnectedTimeout:Qe.isNumber(null==e||null===(a=e.scanConfig)||void 0===a?void 0:a.beaconConnectedTimeout)?e.scanConfig.beaconConnectedTimeout:6e5},items:Array.isArray(null==e?void 0:e.items)?null==e?void 0:e.items:[]}},[2,new Promise((function(e,t){Zt("SCAN_IBEACON",ze({},o),{success:function(){e(!0)},fail:function(e){t(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),_a=[Gr({scanningType:pi.number().refine((function(e){return[0,1].includes(e)}),{message:"The type must be either 0 or 1"}).default(0).optional(),expire:pi.number().optional(),monitorInterval:pi.number().optional(),domain:pi.string().optional(),scanConfig:Gr({scanTime:pi.number().optional(),timeBetweenScan:pi.number().optional(),beaconTimeout:pi.number().optional(),delayCheckConnectedTimeout:pi.number().optional(),beaconConnectedTimeout:pi.number().optional()}).optional(),items:pi.array(Gr({id:pi.string().optional(),distance:pi.number().optional(),monitor:Gr({enable:pi.boolean().optional(),movingRange:pi.number().optional()}).optional()})).optional(),scanFromSource:pi.string().optional()}).optional()];function ba(e){return wa.apply(this,arguments)}function wa(){return(wa=Pe((function(e){return Ce(this,(function(t){return[2,nn("startBeaconDiscovery",_a,[e],Pe((function(){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,ya(e)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve(!0)]:[2,Promise.reject(Ze("startBeaconDiscovery",{}))]}}))})))]}))}))).apply(this,arguments)}var Ta=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("SCAN_IBEACON",{subaction:2},{success:function(){e(!0)},fail:function(e){t(e)}},{})}))]}))}));function Ea(e){return Ia.apply(this,arguments)}function Ia(){return(Ia=Pe((function(e){return Ce(this,(function(t){return[2,nn("stopBeaconDiscovery",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Ta()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve(!0)]:[2,Promise.reject(Ze("stopBeaconDiscovery",{}))]}}))})))]}))}))).apply(this,arguments)}var Pa=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("SCAN_IBEACON",{subaction:1},{success:function(t){var n={beacons:[]};Array.isArray(t)&&t.forEach((function(e){var t={uuid:e.uuid,major:e.major,minor:e.minor,distance:e.distance,rssi:e.rssi};n.beacons.push(t)})),e(n)},fail:function(e){t(e)}},{isMultiCallback:!0})}))]}))}));function Sa(e){return Aa.apply(this,arguments)}function Aa(){return(Aa=Pe((function(e){return Ce(this,(function(t){return[2,nn("getBeacons",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Pa()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({beacons:[]})]:[2,Promise.reject(Ze("getBeacons",{}))]}}))})))]}))}))).apply(this,arguments)}var Oa=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("WINDOW_CLOSE",{},{success:function(t){e(t)},fail:function(e){t(e)}},{})}))]}))}));function Na(e){return Ca.apply(this,arguments)}function Ca(){return(Ca=Pe((function(e){return Ce(this,(function(t){return[2,nn("closeApp",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Oa()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("closeApp",{}))]}}))})))]}))}))).apply(this,arguments)}var ka=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("OPEN_QR",{skipOpenLink:!0},{success:function(t){e(t)},fail:function(e){t(e)}},{})}))]}))}));function Ma(e){return Ra.apply(this,arguments)}function Ra(){return(Ra=Pe((function(e){return Ce(this,(function(t){return[2,nn("scanQRCode",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,ka()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({content:""})]:[2,Promise.reject(Ze("scanQRCode",{}))]}}))})))]}))}))).apply(this,arguments)}var Da=function(){var e=Pe((function(e,t,n,i){return Ce(this,(function(a){return[2,new Promise((function(a,o){Zt("OPEN_PROFILE",{uId:e,type:g[t],zapp:r,sourceId:n,sourceIndex:i},{success:function(){a()},fail:function(e){o(e)}},{})}))]}))}));return function(t,n,r,i){return e.apply(this,arguments)}}(),xa=[Gr({id:Cr(),type:pi.enum(["user","oa","aliasOA"]),sourceId:pi.any().optional(),sourceIndex:pi.any().optional()}).optional()];function Ua(e){return La.apply(this,arguments)}function La(){return La=Pe((function(e){return Ce(this,(function(t){return[2,nn("openProfile",xa,[e],function(){var e=Pe((function(e){var t,n,r,i;return Ce(this,(function(a){switch(a.label){case 0:return Le.isMp?(t=e.id,n=e.type,r=e.sourceId,i=e.sourceIndex,[4,Da(t,n,r,i)]):[3,2];case 1:return[2,a.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openProfile",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),La.apply(this,arguments)}var ja=function(){var e=Pe((function(e,t){var n,i,a,o=arguments;return Ce(this,(function(s){return n=o.length>2&&void 0!==o[2]?o[2]:"",i=o.length>3?o[3]:void 0,a=o.length>4?o[4]:void 0,[2,new Promise((function(o,s){Zt("OPEN_CHAT",{uId:e,type:y[t],msg:n,zapp:r,sourceId:i,sourceIndex:a},{success:function(){o()},fail:function(e){s(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),Za=[Gr({id:Cr(),type:pi.enum(["user","oa"]),sourceId:pi.any().optional(),sourceIndex:pi.any().optional(),message:Cr().optional()}).optional()];function Ba(e){return za.apply(this,arguments)}function za(){return za=Pe((function(e){return Ce(this,(function(t){return[2,nn("openChat",Za,[e],function(){var e=Pe((function(e){var t,n,r,i,a;return Ce(this,(function(o){switch(o.label){case 0:return Le.isMp?(t=e.id,n=e.type,r=e.message,i=e.sourceId,a=e.sourceIndex,[4,ja(t,n,r,i,a)]):[3,2];case 1:return[2,o.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openChat",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),za.apply(this,arguments)}function Wa(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Fa=function(){var e=Pe((function(e,t){var n,i;return Ce(this,(function(a){switch(n={},i=e,e){case"image":(null==t?void 0:t.imageUrls)?(i="multi_image",n={photoUrl:null==t?void 0:t.imageUrls}):n={photoUrl:null==t?void 0:t.imageUrl};break;case"link":n={link:null==t?void 0:t.link,title:null==t?void 0:t.title,thumb:null==t?void 0:t.thumb,description:null==t?void 0:t.description};break;case"profile":n={avt:null==t?void 0:t.avatar,uid:null==t?void 0:t.id,dpn:null==t?void 0:t.displayName}}return[2,new Promise((function(e,t){Zt("OPEN_POSTFEED",Wa(ze({type:_[i]},n),{zapp:r}),{success:function(t){e({status:null==t?void 0:t.status,shareType:null==t?void 0:t.share_type,numberOfUser:null==t?void 0:t.uid_to_size})},fail:function(e){t(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),Ga=[pi.union([Gr({type:pi.enum(["image"]),data:Gr({imageUrl:Cr().url().optional(),imageUrls:pi.array(Cr().url()).optional()})}),Gr({type:pi.enum(["link"]),data:Gr({link:Cr().url(),title:Cr().max(100).optional(),thumb:Cr().url().optional(),description:Cr().max(400).default("").optional()})}),Gr({type:pi.enum(["profile"]),data:Gr({id:Cr().optional()})})])];function Va(e){return Ha.apply(this,arguments)}function Ha(){return Ha=Pe((function(e){return Ce(this,(function(t){return[2,nn("openPostFeed",Ga,[e],function(){var e=Pe((function(e){var t,n;return Ce(this,(function(r){switch(r.label){case 0:return Le.isMp?(t=e.type,n=e.data,[4,Fa(t,n)]):[3,2];case 1:return[2,r.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({status:1,shareType:0,numberOfUser:0})]:[2,Promise.reject(Ze("openPostFeed",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Ha.apply(this,arguments)}var Ka=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("FOLLOW_OA",{uid:e,showDialogConfirm:!0,forceUpdate:!0,zapp:r},{success:function(e){t(e)},fail:function(e){n(e)}},{timeout:!1})}))]}))}));return function(t){return e.apply(this,arguments)}}(),Ja=[Gr({id:Cr(),showDialogConfirm:pi.boolean().optional()}).optional()];function qa(e){return Qa.apply(this,arguments)}function Qa(){return Qa=Pe((function(e){return Ce(this,(function(t){return[2,nn("followOA",Ja,[e],function(){var e=Pe((function(e){var t;return Ce(this,(function(n){switch(n.label){case 0:return Le.isMp?(t=e.id,[4,Ka(t)]):[3,2];case 1:return[2,n.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("followOA",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Qa.apply(this,arguments)}var Ya=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("UNFOLLOW_OA",{uid:e,forceUpdate:!0,zapp:r},{success:function(){t()},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),$a=[Gr({id:Cr()}).optional()];function Xa(e){return eo.apply(this,arguments)}function eo(){return eo=Pe((function(e){return Ce(this,(function(t){return[2,nn("unfollowOA",$a,[e],function(){var e=Pe((function(e){var t;return Ce(this,(function(n){switch(n.label){case 0:return Le.isMp?(t=e.id,[4,Ya(t)]):[3,2];case 1:return[2,n.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("unfollowOA",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),eo.apply(this,arguments)}var to=function(){var e=Pe((function(e,t,n,r,i,o){var s,c,d,p,f,h,m,v;return Ce(this,(function(g){switch(g.label){case 0:return d=new URL(location.href),p=new URLSearchParams,f="".concat(d.pathname.replace(u,"")).concat(d.search),o&&(f="/".concat(e).concat("/"===o[0]?"":"/").concat(o)),!(h=new URL("".concat(a).concat(f))).searchParams.has("env")&&(null===(s=window.APP_ENV)||void 0===s?void 0:s.length)>0&&h.searchParams.set("env",window.APP_ENV),!h.searchParams.has("version")&&(null===(c=window.APP_VERSION)||void 0===c?void 0:c.length)>0&&h.searchParams.set("version",window.APP_VERSION),p.append("title",n),p.append("description",r||""),p.append("thumbnail",i||""),p.append("url",h.href),p.append("accessToken",t||""),m={headers:{"Content-Type":"application/x-www-form-urlencoded"}},[4,fetch(l.CREATE_SHARE_LINK,ze({method:"POST",body:p},m))];case 1:return[4,g.sent().json()];case 2:if(!(v=g.sent())||0!==v.err)throw Lt.error.cannotGetShareInfo();return h.search="".concat(h.search,"&zshareId=").concat(v.data.shareId),[2,Wa(ze({},v.data),{shareableLink:h.href})]}}))}));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),no=function(){var e=Pe((function(e,t){var n,a,o,s,u,c,l,d,p,f,h,m;return Ce(this,(function(v){switch(v.label){case 0:switch(n={},a=e,e){case"text":return[3,1];case"image":return[3,2];case"gif":return[3,3];case"video":return[3,4];case"link":return[3,5];case"oa":return[3,6];case"zmp":return[3,7];case"zmp_deep_link":return[3,10]}return[3,13];case 1:return n={text:null==t?void 0:t.text,desc:(null==t?void 0:t.desc)||(null==t?void 0:t.description),autoParseLink:(null==t?void 0:t.autoParseLink)?1:0},[3,14];case 2:return c=[],l=(null===(s=Ue())||void 0===s?void 0:s.zaloVersion)||0,d=(null===(u=Ue())||void 0===u?void 0:u.platformName)||"unknown",Number(l)>=le[d]&&(a="multi_image"),Array.isArray(null==t?void 0:t.imageUrls)&&(null==t?void 0:t.imageUrls.length)>0?c=null==t?void 0:t.imageUrls:c.push(null==t?void 0:t.imageUrl),n={photoUrls:c,photoUrl:null==t?void 0:t.imageUrl,caption:null==t?void 0:t.caption},[3,14];case 3:return n={photoUrl:null==t?void 0:t.imageUrl,gifUrl:null==t?void 0:t.gifUrl,width:null==t?void 0:t.width,height:null==t?void 0:t.height},[3,14];case 4:return n={videoThumb:null==t?void 0:t.videoThumb,videoUrl:null==t?void 0:t.videoUrl,width:null==t?void 0:t.width,height:null==t?void 0:t.height},[3,14];case 5:return n={link:null==t?void 0:t.link,chatOnly:(null==t?void 0:t.chatOnly)?1:0},[3,14];case 6:return n={uid:null==t?void 0:t.id},[3,14];case 7:case 10:return[4,Wt.getAccessToken()];case 8:case 11:return o=v.sent(),[4,to(i,o||"",(null==t?void 0:t.title)||"",(null==t?void 0:t.description)||"",(null==t?void 0:t.thumbnail)||"",null==t?void 0:t.path)];case 9:return p=v.sent(),n={data:{ZInstantAPIInfo:{url:"".concat(p.zinstantApi),zinstantdata_id:"templateId=".concat(p.ztemplateId,"&appId=").concat(i,"&shareId=").concat(p.shareId)},previewMsgText:{msg:{en:"Zalo Mini Program",vi:"Chương trình nhỏ"}},enableReactions:1}},[3,14];case 12:return f=v.sent().shareableLink,h=new URL(f),m=h.searchParams.getAll("zshareId"),h.searchParams.delete("zshareId"),m.length>0&&h.searchParams.append("zshareId",m[0]),n={link:h.href,chatOnly:0},[3,14];case 13:return[3,14];case 14:return[2,new Promise((function(e,t){Zt("OPEN_SHARESHEET",Wa(ze({type:w[a]},n),{zapp:r}),{success:function(t){e({status:null==t?void 0:t.status,shareType:null==t?void 0:t.share_type,numberOfUser:null==t?void 0:t.uid_to_size})},fail:function(e){t(e)}},{timeout:!1})}))]}}))}));return function(t,n){return e.apply(this,arguments)}}(),ro=[pi.union([Gr({type:pi.enum(["text"]),data:Gr({text:Cr(),description:Cr().default("").optional(),autoParseLink:pi.boolean().default(!1).optional()})}),Gr({type:pi.enum(["image"]),data:Gr({imageUrl:Cr().url().optional(),imageUrls:pi.array(Cr().url()).max(10).optional()})}),Gr({type:pi.enum(["link"]),data:Gr({link:Cr().url(),chatOnly:pi.boolean().optional()})}),Gr({type:pi.enum(["oa"]),data:Gr({id:Cr()})}),Gr({type:pi.enum(["gif"]),data:Gr({gifUrl:Cr().url(),imageUrl:Cr().url().optional(),width:kr().min(0).optional(),height:kr().min(0).optional()})}),Gr({type:pi.enum(["video"]),data:Gr({videoThumb:Cr().url(),videoUrl:Cr().url(),width:kr().min(0).optional(),height:kr().min(0).optional()})}),Gr({type:pi.enum(["zmp","zmp_deep_link"]),data:Gr({title:Cr().max(100),thumbnail:Cr().url(),path:Cr().optional(),description:Cr().max(400).default("").optional()})})])];function io(e){return ao.apply(this,arguments)}function ao(){return ao=Pe((function(e){return Ce(this,(function(t){return[2,nn("openShareSheet",ro,[e],function(){var e=Pe((function(e){var t,n;return Ce(this,(function(r){switch(r.label){case 0:return Le.isMp?(t=e.type,n=e.data,[4,no(t,n)]):[3,2];case 1:return[2,r.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({status:2,shareType:0,numberOfUser:0})]:[2,Promise.reject(Ze("openShareSheet",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),ao.apply(this,arguments)}var oo=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("REQUEST_PERMISSION_CAMERA",{},{success:function(t){var n,r;(null===(n=Ue())||void 0===n||null===(r=n.platform)||void 0===r?void 0:r.isAndroid)?e({userAllow:void 0===t.error_code||(null==t?void 0:t.error_code)>=0,message:void 0===t.error_code?"User allowed":null==t?void 0:t.error_message}):e({userAllow:(null==t?void 0:t.error_code)>=0,message:null==t?void 0:t.error_message})},fail:function(n){var r,i;(null===(r=Ue())||void 0===r||null===(i=r.platform)||void 0===i?void 0:i.isAndroid)&&"number"==typeof(null==n?void 0:n.code)?e({userAllow:(null==n?void 0:n.code)>=0,message:null==n?void 0:n.message}):t(n)}},{isMultiCallback:!0})}))]}))}));function so(e){return uo.apply(this,arguments)}function uo(){return(uo=Pe((function(e){return Ce(this,(function(t){return[2,nn("requestCameraPermission",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,oo()];case 1:return[2,e.sent()]}}))})))]}))}))).apply(this,arguments)}var co=function(){var e=Pe((function(e,t,n){return Ce(this,(function(r){return[2,new Promise((function(r,i){Zt("CREATE_SHORTCUT",{url:e,title:t,iconUrl:n},{success:function(e){r(e)},fail:function(e){i(e)}},{})}))]}))}));return function(t,n,r){return e.apply(this,arguments)}}(),lo=Pe((function(){var e,t,n,r=arguments;return Ce(this,(function(a){switch(a.label){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:i,t=r.length>1&&void 0!==r[1]?r[1]:0,n=dn(),[4,It(e,t,n.version)];case 1:return[2,a.sent()]}}))})),po=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("OPEN_OUTAPP",{url:e},{success:function(){t()},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),fo=[Gr({params:pi.record(Cr(),Cr()).optional()}).optional()];function ho(e){return mo.apply(this,arguments)}function mo(){return mo=Pe((function(e){return Ce(this,(function(t){return[2,nn("createShortcut",fo,[e],function(){var e=Pe((function(e){var t,n,r,o,s,u,c,l;return Ce(this,(function(d){switch(d.label){case 0:return Le.isMp?[4,lo(i,0)]:[3,6];case 1:return r=d.sent(),o=null===(t=Ue())||void 0===t||null===(n=t.platform)||void 0===n?void 0:n.isIOS,s=r.logoUrl||Jt("og:image:url")||"",u=r.name||document.title,(c=(null==e?void 0:e.params)?new URLSearchParams(null==e?void 0:e.params):new URLSearchParams).append("utm_source","zalo-shortcut"),c.append("utm_medium","default"),c.append("utm_campaign","default"),o?(c.append("appId",i),c.append("appName",u),c.append("appIcon",s),l="https://mini.zalo.me/shortcut.html?".concat(c.toString()),[4,po(encodeURI(l))]):[3,3];case 2:return d.sent(),[3,5];case 3:return[4,co("".concat(a,"/").concat(i,"/?").concat(c.toString()),u,s)];case 4:d.sent(),d.label=5;case 5:return[2,Lt.success()];case 6:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("createShortcut",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),mo.apply(this,arguments)}var vo=function(){var e=Pe((function(e,t,n){return Ce(this,(function(i){return[2,new Promise((function(i,a){Zt("PROMPT_AUTHENTICATION",{secret_data:e,app_id:r,ui:{title:null==t?void 0:t.title,sub_title:null==t?void 0:t.subTitle,negative_text:null==t?void 0:t.negativeButtonText},require_fingerprint:n?1:0},{success:function(e){var t,n,r,a;i({code:null==e?void 0:e.error_code,message:null==e?void 0:e.error_message,data:{domain:null==e||null===(t=e.data)||void 0===t?void 0:t.domain,code:null==e||null===(n=e.data)||void 0===n?void 0:n.error_code,message:null==e||null===(r=e.data)||void 0===r?void 0:r.error_message,payToken:null==e||null===(a=e.data)||void 0===a?void 0:a.pay_token}})},fail:function(e){a(e)}},{})}))]}))}));return function(t,n,r){return e.apply(this,arguments)}}(),go=[Gr({secretData:Cr(),ui:Gr({title:Cr().default("Xác thực").optional(),subTitle:Cr().default("Sử dụng sinh trắc học của bạn để xác thực").optional(),negativeButtonText:Cr().default("Đóng").optional()}).optional(),requireFingerprint:Dr().default(!0).optional()}).optional()];function yo(e){return _o.apply(this,arguments)}function _o(){return _o=Pe((function(e){return Ce(this,(function(t){return[2,nn("openBioAuthentication",go,[e],function(){var e=Pe((function(e){var t,n,r;return Ce(this,(function(i){switch(i.label){case 0:return Le.isMp?(t=e.secretData,n=e.ui,r=e.requireFingerprint,[4,vo(t,n,r)]):[3,2];case 1:return[2,i.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({code:0,message:"OK",data:{domain:"",code:0,message:"",payToken:""}})]:[2,Promise.reject(Ze("openBioAuthentication",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),_o.apply(this,arguments)}var bo=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("PROMPT_AUTHENTICATION_CHECK_STATE",{},{success:function(t){e(null==t?void 0:t.bio_state)},fail:function(e){t(e)}},{actionName:"action.prompt.authentication.check_state"})}))]}))}));function wo(e){return To.apply(this,arguments)}function To(){return(To=Pe((function(e){return Ce(this,(function(t){return[2,nn("checkStateBioAuthentication",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,bo()]:[3,2];case 1:return[2,{bioState:e.sent()}];case 2:return Le.isMpWeb?[2,Promise.resolve({bioState:""})]:[2,Promise.reject(Ze("checkStateBioAuthentication",{}))]}}))})))]}))}))).apply(this,arguments)}var Eo=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("SHOW_TOAST",{toast:e},{success:function(){t()},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),Io=[Gr({message:Cr()}).optional()];function Po(e){return So.apply(this,arguments)}function So(){return So=Pe((function(e){return Ce(this,(function(t){return[2,nn("showToast",Io,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Eo(e.message)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("showToast",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),So.apply(this,arguments)}var Ao=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("HIDE_KEYBOARD",{},{success:function(){e()},fail:function(e){t(e)}},{})}))]}))}));function Oo(e){return No.apply(this,arguments)}function No(){return(No=Pe((function(e){return Ce(this,(function(t){return[2,nn("hideKeyboard",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Ao()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("hideKeyboard",{}))]}}))})))]}))}))).apply(this,arguments)}var Co=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("OPEN_PHONE",{phoneNum:e,phoneCode:e},{success:function(){t()},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),ko=[Gr({phoneNumber:Cr()})];function Mo(e){return Ro.apply(this,arguments)}function Ro(){return Ro=Pe((function(e){return Ce(this,(function(t){return[2,nn("openPhone",ko,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Co(e.phoneNumber)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openPhone",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Ro.apply(this,arguments)}var Do=function(){var e=Pe((function(e,t){return Ce(this,(function(n){return[2,new Promise((function(n,r){Zt("OPEN_SMS",{content:t,phoneCode:e},{success:function(){n()},fail:function(e){r(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),xo=[Gr({content:Cr(),phoneNumber:Cr()})];function Uo(e){return Lo.apply(this,arguments)}function Lo(){return Lo=Pe((function(e){return Ce(this,(function(t){return[2,nn("openSMS",xo,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Do(e.phoneNumber,e.content)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openSMS",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Lo.apply(this,arguments)}var jo=function(){var e=Pe((function(e){var t,n=arguments;return Ce(this,(function(i){return t=n.length>1&&void 0!==n[1]?n[1]:"",[2,new Promise((function(n,i){Zt("VIEW_MYQR",{dpn:t,uid:e,zapp:r},{success:function(){n()},fail:function(e){i(e)}},{timeout:!1})}))]}))}));return function(t){return e.apply(this,arguments)}}(),Zo=[Gr({id:Cr(),displayName:Cr().default("").optional()})];function Bo(e){return zo.apply(this,arguments)}function zo(){return zo=Pe((function(e){return Ce(this,(function(t){return[2,nn("viewOAQr",Zo,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,jo(e.id,e.displayName)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("viewOAQr",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),zo.apply(this,arguments)}var Wo=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("KEEP_SCREEN",{data:{keep_screen_on:e?1:0}},{success:function(){t()},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),Fo=[Gr({keepScreenOn:Dr()})];function Go(e){return Vo.apply(this,arguments)}function Vo(){return Vo=Pe((function(e){return Ce(this,(function(t){return[2,nn("keepScreen",Fo,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Wo(e.keepScreenOn)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("keepScreen",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Vo.apply(this,arguments)}function Ho(e){return Ko.apply(this,arguments)}function Ko(){return(Ko=Pe((function(e){return Ce(this,(function(t){return[2,nn("onKeepScreen",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Wo(!0)]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("onKeepScreen",{}))]}}))})))]}))}))).apply(this,arguments)}function Jo(e){return qo.apply(this,arguments)}function qo(){return(qo=Pe((function(e){return Ce(this,(function(t){return[2,nn("offKeepScreen",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Wo(!1)]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("offKeepScreen",{}))]}}))})))]}))}))).apply(this,arguments)}var Qo=function(){var e=Pe((function(e,t,n){var r;return Ce(this,(function(i){return r={},e?r={imageBase64Data:e}:t&&(r={imageUrl:t}),[2,new Promise((function(e,t){Zt("SAVE_IMAGE_GALLERY",Wa(ze({},r),{onProgress:n}),{success:function(){e()},fail:function(e){t(e)}},{})}))]}))}));return function(t,n,r){return e.apply(this,arguments)}}(),Yo=[Gr({imageBase64Data:Cr().optional(),imageUrl:Cr().url().optional()}).optional()];function $o(e){return Xo.apply(this,arguments)}function Xo(){return Xo=Pe((function(e){return Ce(this,(function(t){return[2,nn("saveImageToGallery",Yo,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Qo(e.imageBase64Data,e.imageUrl,e.onProgress)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("saveImageToGallery",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Xo.apply(this,arguments)}var es=function(){var e=Pe((function(e,t){var n;return Ce(this,(function(r){return{},n={videoUrl:e,onProgress:t},[2,new Promise((function(e,t){Zt("SAVE_VIDEO_GALLERY",ze({},n),{success:function(){e()},fail:function(e){t(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),ts=[Gr({videoUrl:Cr().url()}).optional()];function ns(e){return rs.apply(this,arguments)}function rs(){return rs=Pe((function(e){return Ce(this,(function(t){return[2,nn("saveVideoToGallery",ts,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,es(e.videoUrl,e.onProgress)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("saveVideoToGallery",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),rs.apply(this,arguments)}var is=function(){var e=Pe((function(e){var t,n,r,i,a,s,u=arguments;return Ce(this,(function(c){switch(c.label){case 0:t=u.length>1&&void 0!==u[1]?u[1]:"/",n=u.length>2&&void 0!==u[2]?u[2]:{},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,lo(e,0)];case 2:return r=c.sent(),[3,4];case 3:return c.sent(),[3,4];case 4:i={appId:e},r&&(i.appName=r.name,i.appAvtUrl=r.logoUrl),a="".concat(o,"/").concat(e).concat(t);try{s=new URL(a),Object.entries(n).forEach((function(e){var t=We(e,2),n=t[0],r=t[1];s.searchParams.append(n,String(r))})),a=s.href}catch(e){}return[2,new Promise((function(e,t){Zt("OPEN_MP",{mpUrl:a,mpInfo:i},{success:function(){e()},fail:function(e){t(e)}},{})}))]}}))}));return function(t){return e.apply(this,arguments)}}(),as=[Gr({appId:Cr(),path:Cr().optional(),params:pi.record(Cr(),Cr()).optional()})];function os(e){return ss.apply(this,arguments)}function ss(){return ss=Pe((function(e){return Ce(this,(function(t){return[2,nn("openMiniApp",as,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,is(e.appId,e.path,e.params)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openMiniApp",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),ss.apply(this,arguments)}var us=Pe((function(){var e,t,n=arguments;return Ce(this,(function(r){return e=n.length>0&&void 0!==n[0]?n[0]:"oneShot",t=n.length>1?n[1]:void 0,[2,new Promise((function(n,r){Zt("INTERACTIVE_VIBRATION",{type:E[e],vibrate_time:t},{success:function(){n()},fail:function(e){r(e)}},{})}))]}))})),cs=[Gr({type:pi.enum(["oneShot"]).default("oneShot"),milliseconds:kr().optional()})];function ls(e){return ds.apply(this,arguments)}function ds(){return ds=Pe((function(e){return Ce(this,(function(t){return[2,nn("vibrate",cs,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,us(null==e?void 0:e.type,null==e?void 0:e.milliseconds)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("vibrate",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),ds.apply(this,arguments)}var ps=function(){var e=Pe((function(e,t){var n,r,i,a;return Ce(this,(function(o){return n=new URL(e),r=n.href.includes("vnpay"),i=n.searchParams.get("typeInapp"),a=Qe.isEmpty(t)?void 0:{modal_style:(null==t?void 0:t.style)?St(null==t?void 0:t.style):"bottom_sheet",left_button:(null==t?void 0:t.leftButton)?St(null==t?void 0:t.leftButton):"back"},!r&&Qe.isEmpty(i)&&n.searchParams.set("typeInapp","1"),[2,new Promise((function(e,t){Zt("OPEN_INAPP",{url:n.href,style:a},{success:function(){e()},fail:function(e){t(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),fs=[Gr({url:Cr(),config:Gr({style:pi.enum(["bottomSheet","normal"]).default("bottomSheet").optional(),leftButton:pi.enum(["back","none"]).default("back").optional()}).optional()})];function hs(e){return ms.apply(this,arguments)}function ms(){return ms=Pe((function(e){return Ce(this,(function(t){return[2,nn("openWebview",fs,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,ps(e.url,e.config)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openWebview",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),ms.apply(this,arguments)}function vs(){var e={},t=window.location.href;try{var n=new URL(t).searchParams.toString();n&&(e=gt.getParamsAsObject(n))}catch(e){throw new Error("Invalid URL")}return e}function gs(){return nn("getRouteParams",[],[],(function(){return vs()}))}function ys(e){return _s.apply(this,arguments)}function _s(){return(_s=Pe((function(e){return Ce(this,(function(t){return[2,nn("getAppInfo",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,lo()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({description:"",name:"",version:"",appUrl:"",qrCodeUrl:""})]:[2,Promise.reject(Ze("getAppInfo",{}))]}}))})))]}))}))).apply(this,arguments)}var bs=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("WEBVIEW_SET_RESULT",{result:qt(e)},{success:function(){t()},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),ws=[Gr({data:pi.any()})];function Ts(e){return Es.apply(this,arguments)}function Es(){return Es=Pe((function(e){return Ce(this,(function(t){return[2,nn("sendDataToPreviousMiniApp",ws,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,bs(e.data)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("sendDataToPreviousMiniApp",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Es.apply(this,arguments)}var Is=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){var n,r;Zt("MP_GET_NUMBER",{forceUpdate:!0},{success:function(n){var r={};if(null==n?void 0:n.token)return r.token=null==n?void 0:n.token,e(r);t(Lt.error.clientNotSupport())},fail:function(e){t(e)}},{delay:(null===(n=Ue())||void 0===n||null===(r=n.platform)||void 0===r?void 0:r.isIOS)?400:0})}))]}))}));function Ps(e){return Ss.apply(this,arguments)}function Ss(){return(Ss=Pe((function(e){return Ce(this,(function(t){return[2,nn("getPhoneNumber",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Is()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({number:""})]:[2,Promise.reject(Ze("getPhoneNumber",{}))]}}))})))]}))}))).apply(this,arguments)}var As=Pe((function(){var e,t=arguments;return Ce(this,(function(n){return e=t.length>0&&void 0!==t[0]?t[0]:1,[2,new Promise((function(t,n){Zt("MP_OPEN_PROFILE_PICKER",{maxProfile:e},{success:function(e){Array.isArray(e)?t(e.map((function(e){return e.id}))):t([])},fail:function(e){n(e)}},{isMultiCallback:!0})}))]}))})),Os=[Gr({maxProfile:kr().min(1).max(10).optional().default(1)})];function Ns(e){return Cs.apply(this,arguments)}function Cs(){return Cs=Pe((function(e){return Ce(this,(function(t){return[2,nn("openProfilePicker",Os,[e],function(){var e=Pe((function(e){var t,n,r,i,a;return Ce(this,(function(o){switch(o.label){case 0:return Le.isMp?[4,As(null==e?void 0:e.maxProfile)]:[3,8];case 1:if(!((t=o.sent()).length>0))return[3,7];o.label=2;case 2:return o.trys.push([2,6,,7]),[4,Wt.getAccessToken()];case 3:return r=o.sent(),[4,fetch(l.GET_LIST_USER_INFO,{method:"POST",headers:{"Content-Type":"application/json",access_token:r||""},body:JSON.stringify({fields:"id,name,picture",user_ids:t})})];case 4:return[4,o.sent().json()];case 5:if(0!==(i=o.sent()).error||!i.data)throw new Error(i.message);return n=t.map((function(e){var t,n,r,a,o,s,u,c,l,d,p;return{id:(null===(t=i.data[e])||void 0===t||null===(n=t.user_info)||void 0===n?void 0:n.user_id_by_app)||"",profile:{name:null===(r=i.data[e])||void 0===r||null===(a=r.user_info)||void 0===a?void 0:a.name,avatar:null===(o=i.data[e])||void 0===o||null===(s=o.user_info)||void 0===s||null===(u=s.picture)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.url},code:0!==(null===(l=i.data[e])||void 0===l?void 0:l.error)?-1:0,message:"Get profile: ".concat(Qe.isUndefined(null===(d=i.data[e])||void 0===d?void 0:d.message)?"Unknown error":null===(p=i.data[e])||void 0===p?void 0:p.message)}})),[3,7];case 6:return a=o.sent(),n=t.map((function(e){return{id:e,profile:{name:"",avatar:""},code:-1,message:"Can't get profile: ".concat(a.message)}})),[3,7];case 7:return[2,{users:n||[]}];case 8:return Le.isMpWeb?[2,Promise.resolve({users:[]})]:[2,Promise.reject(Ze("openProfilePicker",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Cs.apply(this,arguments)}var ks=function(){var e=Pe((function(e,t,n){var r;return Ce(this,(function(i){return r=t&&Qe.isString(t)&&t.length>0?"wpa_wpa2":"open",[2,new Promise((function(i,a){Zt("MP_JOIN_WIFI",{ssid:e,securityType:r,password:t,hiddenSsid:n},{success:function(e){i(e)},fail:function(e){a(e)}},{})}))]}))}));return function(t,n,r){return e.apply(this,arguments)}}(),Ms=[Gr({SSID:Cr(),password:Cr().optional(),hiddenSSID:Dr().optional()})];function Rs(e){return Ds.apply(this,arguments)}function Ds(){return Ds=Pe((function(e){return Ce(this,(function(t){return[2,nn("connectWifi",Ms,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,ks(e.SSID,e.password,e.hiddenSSID)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("connectWifi",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Ds.apply(this,arguments)}var xs=function(){var e=Pe((function(e,t,n,r,i,a){var o,s;return Ce(this,(function(u){return o={type:0,url:t,max_size:n||1048576},s={enable:1,aspect_ratio:"1:1"},[2,new Promise((function(t,n){Zt("PICK_MEDIA",{media_type:I[e],edit_view:ze({},s,r),silent_request:i,upload:o,max_select_items:a},{success:function(e){t(null==e?void 0:e.result_content)},fail:function(e){n(e)}},{isMultiCallback:!0})}))]}))}));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),Us=[Gr({type:pi.enum(["video","photo","file","zcamera","zcamera_photo","zcamera_video","zcamera_scan"]),serverUploadUrl:Cr().url(),maxItemSize:kr().min(0).optional(),editView:Gr({enable:Dr().optional(),aspectRatio:Cr().regex(/^d+:d+$/).optional()}).optional(),silentRequest:Dr().optional(),maxSelectItem:kr().min(1).optional()})];function Ls(e){return js.apply(this,arguments)}function js(){return js=Pe((function(e){return Ce(this,(function(t){return[2,nn("openMediaPicker",Us,[e],function(){var e=Pe((function(e){var t,n,r,i,a,o;return Ce(this,(function(s){switch(s.label){case 0:return Le.isMp?(i={},Qe.isUndefined(null===(t=e.editView)||void 0===t?void 0:t.enable)||(null===(n=e.editView)||void 0===n?void 0:n.enable)?i.enable=1:i.enable=0,i.aspect_ratio=null===(r=e.editView)||void 0===r?void 0:r.aspectRatio,a=!0===e.silentRequest?1:0,o=e.maxSelectItem,[4,xs(e.type,e.serverUploadUrl,e.maxItemSize,i,a,o)]):[3,2];case 1:return[2,{data:s.sent()}];case 2:return Le.isMpWeb?[2,Promise.resolve({data:""})]:[2,Promise.reject(Ze("openMediaPicker",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),js.apply(this,arguments)}var Zs=[Gr({title:Cr().max(100),description:Cr().max(400).default(""),thumbnail:Cr().url().optional(),path:Cr().optional()})];function Bs(e){return zs.apply(this,arguments)}function zs(){return zs=Pe((function(e){return Ce(this,(function(t){return[2,nn("getShareableLink",Zs,[e],function(){var e=Pe((function(e){var t;return Ce(this,(function(n){switch(n.label){case 0:return[4,Wt.getAccessToken()];case 1:return t=n.sent(),[4,to(window.APP_ID,t||"",e.title,e.description,e.thumbnail,e.path)];case 2:return[2,n.sent().shareableLink]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),zs.apply(this,arguments)}var Ws=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("MP_CLOSE_LOADINGVIEW",{at:(new Date).getTime(),when:e,url:location.href},{success:function(e){t(e)},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}();function Fs(e){return Gs.apply(this,arguments)}function Gs(){return(Gs=Pe((function(e){return Ce(this,(function(t){return[2,nn("closeLoading",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Ws("user action")]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("closeLoading",{}))]}}))})))]}))}))).apply(this,arguments)}function Vs(e){return Hs.apply(this,arguments)}function Hs(){return Hs=Pe((function(e){return Ce(this,(function(t){return[2,nn("requestUpdateZalo",[],[e],Pe((function(){var e,t,n;return Ce(this,(function(r){switch(r.label){case 0:return Le.isMp?(n=(null===(e=Ue())||void 0===e||null===(t=e.platform)||void 0===t?void 0:t.isIOS)?"https://apps.apple.com/vn/app/zalo/id579523206":"https://play.google.com/store/apps/details?id=com.zing.zalo",[4,po(n)]):[3,2];case 1:return[2,r.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("requestUpdateZalo",{}))]}}))})))]}))})),Hs.apply(this,arguments)}var Ks=ht.getInstance();Ks.addListener=function(e,t,n){var r=e;return Ks.addListener(m[r],t,n)};var Js=[pi.function()];function qs(e){return nn("onConfirmToExit",Js,[e],(function(e){var t=e;Le.isMp&&(Ks.on(m.AppClose,t,'{"handle_h5": 1}'),hi.setNavigationBarLeftButton(void 0,2))}))}function Qs(){return nn("offConfirmToExit",[],[],(function(){Le.isMp&&(Ks.off(m.AppClose),hi.setNavigationBarLeftButton(void 0,0))}))}function Ys(){return nn("getDeviceId",[],[],(function(){return Le.isMp&&Wt.getSync(c.DEVICE_ID)||""}))}function $s(e){return Xs.apply(this,arguments)}function Xs(){return(Xs=Pe((function(e){return Ce(this,(function(t){return[2,nn("getDeviceIdAsync",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Wt.jumpAndGetToken(c.DEVICE_ID)]:[3,2];case 1:return[2,e.sent()||""];case 2:return[2,Promise.resolve("")]}}))})))]}))}))).apply(this,arguments)}function eu(){return nn("getContext",[],[],(function(){if(Le.isMp){var e=Wt.getSync(c.CONTEXT_ID)||"";return{type:Wt.getSync(c.CONTEXT_TYPE)||"",id:e}}return{type:"",id:""}}))}function tu(e){return nu.apply(this,arguments)}function nu(){return(nu=Pe((function(e){return Ce(this,(function(t){return[2,nn("getContextAsync",[],[e],Pe((function(){var e;return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Wt.jumpAndGetToken(c.CONTEXT_ID)]:[3,3];case 1:return e=t.sent()||"",[4,Wt.jumpAndGetToken(c.CONTEXT_TYPE)];case 2:return[2,{type:t.sent()||"",id:e}];case 3:return[2,Promise.resolve({type:"",id:""})]}}))})))]}))}))).apply(this,arguments)}function ru(e){return iu.apply(this,arguments)}function iu(){return(iu=Pe((function(e){return Ce(this,(function(t){return[2,nn("getAuthCode",[],[e],Pe((function(){var e,t;return Ce(this,(function(n){switch(n.label){case 0:return Le.isMp?[4,Wt.jumpAndGetToken(c.ZOAUTH,!0)]:[3,4];case 1:return e=n.sent()||"",[4,Wt.jumpAndGetToken(c.ZOAUTH_VRF)];case 2:return t=n.sent()||"",[4,Wt.verifyUserAuthorized()];case 3:if(n.sent())return[2,{authCode:e,authCodeVerify:t}];throw Pt([{action:"getAuthCode",error:-104,message:"no user auth",data:{}}]),Lt.error.loginFailed("User Authentication Required");case 4:return[2,Promise.resolve({authCode:"",authCodeVerify:""})]}}))})))]}))}))).apply(this,arguments)}function au(e){return ou.apply(this,arguments)}function ou(){return(ou=Pe((function(e){return Ce(this,(function(t){return[2,nn("getZPIToken",[],[e],Pe((function(){var e,t,n,r;return Ce(this,(function(i){switch(i.label){case 0:return Le.isMp?[4,Wt.jumpAndGetToken(c.UTOKEN_ZPI)]:[3,5];case 1:return e=i.sent()||"",[4,Wt.jumpAndGetToken(c.GTOKEN_ZPI)];case 2:return t=i.sent()||"",[4,Wt.jumpAndGetToken(c.ZPP_ZPI)];case 3:return n=i.sent()||"",[4,Wt.jumpAndGetToken(c.ZPT_ZPI)];case 4:return r=i.sent()||"",[2,{utoken:e,gtoken:t,zpp:n,zpt:r}];case 5:return[2,Promise.resolve({utoken:"",gtoken:"",zpp:"",zpt:""})]}}))})))]}))}))).apply(this,arguments)}var su=[Cr()];function uu(e){return nn("setAccessToken",su,[e],(function(e){var t=e;Wt.setAccessToken(t)}))}var cu=[Gr({url:Cr().url()})];function lu(e){return du.apply(this,arguments)}function du(){return du=Pe((function(e){return Ce(this,(function(t){return[2,nn("openOutApp",cu,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,po(e.url)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openOutApp",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),du.apply(this,arguments)}var pu=[Gr({count:kr().min(1).optional().default(1),sourceType:pi.array(pi.enum(["album","camera"])).max(2).default(["album","camera"]).optional(),cameraType:pi.enum(["back","front"]).default("front").optional()})];function fu(e){return hu.apply(this,arguments)}function hu(){return hu=Pe((function(e){return Ce(this,(function(t){return[2,nn("chooseImage",pu,[e],function(){var e=Pe((function(e){var t,n,r,i;return Ce(this,(function(a){return t=e.sourceType||["album","camera"],n=e.cameraType||"front",r=e.count||1,(i=document.createElement("input")).type="file",i.multiple=r>1,i.accept="image/*",i.style.display="none",1===t.length&&t.includes("camera")&&(i.accept="front"===n?"zcamera/photo-frontfacing":"zcamera/photo-backfacing",i.capture="front"===n?"user":"environment"),[2,new Promise((function(e,t){i.addEventListener("change",(function(n){var i,a=(null==n||null===(i=n.target)||void 0===i?void 0:i.files)||[];if(a.length>r)t(new Error("You are only allowed to choose a maximum of ".concat(r," images at a time")));else{var o={filePaths:[],tempFiles:[]};Array.from(a).forEach((function(e){o.filePaths.push(URL.createObjectURL(e)),o.tempFiles.push({path:URL.createObjectURL(e),size:e.size})})),e(o)}})),document.body.appendChild(i),i.click()}))]}))}));return function(t){return e.apply(this,arguments)}}())]}))})),hu.apply(this,arguments)}var mu=Pe((function(){var e,t,n=arguments;return Ce(this,(function(r){return e=n.length>0&&void 0!==n[0]&&n[0],t=n.length>1&&void 0!==n[1]?n[1]:"Cho phép Zalo truy cập vào vị trí của thiết bị này?",[2,new Promise((function(n,r){Zt("GET_LOCATION",{silent_request:e,permission_description:t,forceUpdate:!0},{success:function(e){var t={};if(null==e?void 0:e.token)return t.token=null==e?void 0:e.token,n(t);r(Lt.error.clientNotSupport())},fail:function(e){r(e)}},{isMultiCallback:!0,timeout:!1})}))]}))}));function vu(e){return gu.apply(this,arguments)}function gu(){return(gu=Pe((function(e){return Ce(this,(function(t){return[2,nn("getLocation",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,mu()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({longitude:"105.788026",latitude:"21.0258773",timestamp:(new Date).getTime().toString(),provider:"fused"})]:[2,Promise.reject(Ze("getLocation",{}))]}}))})))]}))}))).apply(this,arguments)}var yu=[pi.function().args(Gr({data:pi.any()})).returns(pi.void())];function _u(e){return nn("onCallbackData",yu,[e],(function(){!function(e){ht.getInstance().on(m.OnDataCallback,(function(t){e({data:t})}))}(e)}))}var bu=function(){var e=Pe((function(e){var t,n,r,a,o,s,u,c,l,d,p;return Ce(this,(function(f){switch(f.label){case 0:return e||(e=vs()),"object"==typeof e&&((n=e.zmpOrderId||e.orderId)||(t=e.appTransID||e.apptransid||e.transId)),"string"==typeof e&&(r=gt.getParameterByName("orderId",e),a=gt.getParameterByName("appTransID",e)||gt.getParameterByName("apptransid",e),t=r||a),o={headers:{authorization:"Bearer "}},[4,Wt.getAccessToken().catch((function(){throw Lt.error.loginRequired}))];case 1:return s=f.sent(),o.headers.authorization="Bearer ".concat(s),u=new URL(he),c={orderId:n||"",transId:t||"",appId:i},u.search=new URLSearchParams(c).toString(),[4,fetch(u.toString(),o)];case 2:return[4,f.sent().json()];case 3:if(!(l=f.sent()).data)throw Lt.error.badRequest(l.msg);return d=l.data||{},p={err:l.err,msg:l.msg},0!==Object.keys(d).length&&d.constructor===Object&&Object.assign(p,ze({msg:d.resultMessage},d)),[2,p]}}))}));return function(t){return e.apply(this,arguments)}}(),wu=function(){var e=Pe((function(e,t,n,r,a,o,s){var u,c,l,d,p,f,h,v,g,y,_,b,w,T,E,I,P,S,A,O;return Ce(this,(function(N){switch(N.label){case 0:u=i,(c=new URLSearchParams).append("amount",e.toString()),c.append("item",encodeURIComponent(JSON.stringify(t))),c.append("appId",u),c.append("mac",r),n&&c.append("desc",encodeURIComponent(n)),a&&(l=a,"object"==typeof a&&(l=JSON.stringify(a)),c.append("extradata",encodeURIComponent(l))),o&&(d=o,"object"==typeof o&&(d=JSON.stringify(o)),c.append("payload",encodeURIComponent(d))),s&&("string"==typeof s?(c.append("method",s),c.append("isCustom","false")):"object"==typeof s&&(c.append("method",s.id),c.append("isCustom",JSON.stringify(s.isCustom)))),p={headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:"Bearer "}},N.label=1;case 1:return N.trys.push([1,6,,7]),[4,Wt.getAccessToken().catch((function(){throw Lt.error.loginRequired}))];case 2:return f=N.sent(),p.headers.authorization="Bearer ".concat(f),[4,fetch(pe,Wa(ze({method:"POST"},p),{body:c}))];case 3:return[4,N.sent().json()];case 4:if(!(h=N.sent()).data||0!==h.err)throw Lt.error.badRequest(h.msg);return v=h.data.id,g=h.data.jwt,y=h.data.messageToken||"",_=window.APP_VERSION,b=window.APP_ENV,w={miniAppId:u,orderId:v},T=h.data.method,E=h.data.isCustom,g&&(w.token=g),_&&(w.version=_),b&&(w.env=b),T&&(w.method=T),E&&(w.isCustom=E),I=gt.encode(w),P=new URL("?".concat(I),"https://payment-mini.zalo.me").toString(),S=Ot(),A=At()&&S<742?"normal":"bottomSheet",lt.enablePaymentDone=ht.getInstance().eventNames().includes(m.PaymentDone),[4,ps(P,{style:A}).then((function(){var e=!1;ht.getInstance().once(m.WebviewClosed,(function(){setTimeout(Pe((function(){var t;return Ce(this,(function(n){switch(n.label){case 0:return e?[3,2]:(ht.getInstance().emit(m.PaymentDone,v,{orderId:v}),[4,bu({zmpOrderId:v})]);case 1:(t=n.sent()).err>=0&&!t.isCustom&&ht.getInstance().emit(m.PaymentClose,t.err,Wa(ze({},t),{zmpOrderId:v})),n.label=2;case 2:return[2]}}))})),500)})),ht.getInstance().once(m.OpenApp,(function(){e=!0})),ht.getInstance().once(m.PaymentDone,(function(){e=!0,lt.enablePaymentDone=!1}))}))];case 5:return N.sent(),[2,{orderId:v,messageToken:y}];case 6:throw O=N.sent(),console.log("Internal error"),O;case 7:return[2]}}))}));return function(t,n,r,i,a,o,s){return e.apply(this,arguments)}}(),Tu=[Gr({amount:pi.union([Cr(),kr()]),item:pi.array(pi.record(Cr(),pi.any())),desc:pi.string(),mac:pi.string(),extradata:pi.any().optional(),payload:pi.any().optional(),method:pi.union([pi.string(),pi.object({id:pi.string(),isCustom:pi.boolean()})]).optional()})];function Eu(e){return Iu.apply(this,arguments)}function Iu(){return Iu=Pe((function(e){return Ce(this,(function(t){return[2,nn("createOrder",Tu,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,wu(e.amount,e.item,e.desc,e.mac,e.extradata,e.payload,e.method)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({orderId:"",messageToken:""})]:[2,Promise.reject(Ze("createOrder",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Iu.apply(this,arguments)}var Pu=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("MP_CONFIRM_REQUEST_PAYMENT",{},{success:function(){e()},fail:function(e){t(e)}},{})}))]}))})),Su=function(){var e=Pe((function(e,t,n,r,a){var o,s,u,c,l,d,p,f,h,m,v,g;return Ce(this,(function(y){switch(y.label){case 0:o=i,(s=new URLSearchParams).append("amount",e.toString()),s.append("appId",o),t&&s.append("desc",encodeURIComponent(t)),n&&s.append("method",n),r&&s.append("transId",r),a&&s.append("mac",a),u={headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:"Bearer "}},y.label=1;case 1:return y.trys.push([1,10,,11]),[4,Wt.getAccessToken().catch((function(){throw Lt.error.loginRequired}))];case 2:return l=y.sent(),u.headers.authorization="Bearer ".concat(l),console.log("_purchase"),[4,Wt.jumpAndGetToken()];case 3:if(y.sent(),d=null===(c=Wt.miniProgramConfig)||void 0===c?void 0:c.showConfirmToPayment,console.log("showConfirmToPayment",d),!d)return[3,7];y.label=4;case 4:return y.trys.push([4,6,,7]),[4,Pu()];case 5:return y.sent(),[3,7];case 6:throw p=y.sent(),console.error("Failed:",p),p;case 7:return[4,fetch(me,Wa(ze({method:"POST"},u),{body:s}))];case 8:return[4,y.sent().json()];case 9:if(!(f=y.sent()).data||0!==f.err)throw Lt.error.badRequest(f.msg);return h=f.data.id,m=f.data.messageToken||"",v=f.data.transId||"",[2,{orderId:h,messageToken:m,transId:v}];case 10:throw g=y.sent(),console.log("Internal error"),g;case 11:return[2]}}))}));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),Au=[Gr({amount:pi.union([pi.string(),pi.number()]),desc:pi.string(),method:pi.string(),transId:pi.string().optional(),mac:pi.string().optional()})];function Ou(e){return Nu.apply(this,arguments)}function Nu(){return Nu=Pe((function(e){return Ce(this,(function(t){return[2,nn("purchase",Au,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Su(e.amount,e.desc,e.method,null==e?void 0:e.transId,null==e?void 0:e.mac)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({orderId:"",messageToken:"",transId:""})]:[2,Promise.reject(Ze("purchase",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Nu.apply(this,arguments)}var Cu=function(){var e=Pe((function(e,t){return Ce(this,(function(n){return[2,new Promise((function(n,r){var i=e&&(null==e?void 0:e.length)>0;Zt("MP_SELECT_PAYMENT_METHOD",{isBinding:i,channels:e,selectedMethod:t,forceUpdate:!0},{success:function(e){console.log(e),n(e)},fail:function(e){r(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),ku=[Gr({channels:Fr(Gr({method:Cr(),subMethod:Cr().optional(),subInfo:Cr().optional()})).optional(),selectedMethod:Gr({method:Cr(),subMethod:Cr().optional()}).optional()}).optional()];function Mu(e){return Ru.apply(this,arguments)}function Ru(){return Ru=Pe((function(e){return Ce(this,(function(t){return[2,nn("selectPaymentMethod",ku,[e],function(){var e=Pe((function(e){var t,n;return Ce(this,(function(r){switch(r.label){case 0:return Le.isMp?(t=e.channels,n=e.selectedMethod,[4,Cu(t,n)]):[3,2];case 1:return[2,r.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({method:""})]:[2,Promise.reject(Ze("selectPaymentMethod",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Ru.apply(this,arguments)}var Du=[Gr({data:pi.union([Cr(),pi.record(Cr(),Cr().nullish())])})];function xu(e){return Uu.apply(this,arguments)}function Uu(){return Uu=Pe((function(e){return Ce(this,(function(t){return[2,nn("checkTransaction",Du,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,bu(e.data)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({msg:"Success",orderId:"",resultCode:1,transTime:(new Date).getTime().toString(),createdAt:(new Date).getTime().toString(),transId:""})]:[2,Promise.reject(Ze("checkTransaction",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Uu.apply(this,arguments)}var Lu=function(){var e=Pe((function(e,t,n,r,a,o){var s,u,c,l,d,p,f,h,m,v,g,y,_,b;return Ce(this,(function(w){switch(w.label){case 0:d=i,(p=new URLSearchParams).append("payType",t||P.SUBSCRIPTION),f=S.UNKNOW,n===ge&&(f=S.IMMEDIATE_AND_CHARGE_FULL_PRICE),n===ve&&(f=S.DEFERRED),p.append("utm",a||"default"),p.append("merchantTransId",o||""),p.append("prorationMode",f.toString()),p.append("appId",d),r&&p.append("method",r),h="",(null===(s=Ue())||void 0===s||null===(u=s.platform)||void 0===u?void 0:u.isIOS)?h="ios":(null===(c=Ue())||void 0===c||null===(l=c.platform)||void 0===l?void 0:l.isAndroid)&&(h="android"),p.append("os",h),p.append("productId",e),m={headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:"Bearer "}},w.label=1;case 1:return w.trys.push([1,5,,6]),[4,Wt.getAccessToken().catch((function(){throw Lt.error.loginRequired}))];case 2:return v=w.sent(),m.headers.authorization="Bearer ".concat(v),[4,fetch(fe,Wa(ze({method:"POST"},m),{body:p}))];case 3:return[4,w.sent().json()];case 4:if(!(g=w.sent()).data||!g.data.store||0!==g.err)throw Lt.error.createIAPOrderFailed(g.err);return y=g.data.store,_=g.data.orderId,[2,new Promise((function(e,t){Zt("IAP_REQUESTPAYMENT",ze({},y),{success:function(){e({orderId:_})},fail:function(e){t(e)}})}))];case 5:throw b=w.sent(),console.log("Internal error"),b;case 6:return[2]}}))}));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),ju=[Gr({productId:Cr(),payType:pi.enum(["ONETIME","SUBSCRIPTION"]).optional(),prorationMode:pi.enum(["DEFERRED","IMMEDIATE_AND_CHARGE_FULL_PRICE"]).default("DEFERRED").optional(),utm:Cr().optional(),method:pi.enum(["IAP","IAP_SANDBOX"]).optional(),merchantTransId:Cr().optional()})];function Zu(e){return Bu.apply(this,arguments)}function Bu(){return Bu=Pe((function(e){return Ce(this,(function(t){return[2,nn("createOrderIAP",ju,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,Lu(e.productId,e.payType,e.prorationMode,e.method,e.utm,e.merchantTransId)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({orderId:""})]:[2,Promise.reject(Ze("createOrderIAP",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Bu.apply(this,arguments)}var zu=[Gr({hide:Dr().default(!1).optional()}).optional()];function Wu(e){return Fu.apply(this,arguments)}function Fu(){return Fu=Pe((function(e){return Ce(this,(function(t){return[2,nn("setAndroidBottomNavigationBar",zu,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,hi.setAndroidBottomNavigationBar(e.hide)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("setAndroidBottomNavigationBar",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Fu.apply(this,arguments)}var Gu=[Gr({hide:Dr().default(!1).optional()}).optional()];function Vu(e){return Hu.apply(this,arguments)}function Hu(){return Hu=Pe((function(e){return Ce(this,(function(t){return[2,nn("setIOSBottomSafeArea",Gu,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,hi.setIOSBottomSafeArea(e.hide)]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("setIOSBottomSafeArea",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Hu.apply(this,arguments)}var Ku=[Gr({type:pi.enum(["normal","hidden","transparent"]).default("normal").optional(),color:pi.string().optional()}).optional()];function Ju(e){return qu.apply(this,arguments)}function qu(){return qu=Pe((function(e){return Ce(this,(function(t){return[2,nn("setStatusBar",Ku,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){switch(t.label){case 0:return Le.isMp?[4,hi.configHeader({statusBarType:e.type,headerColor:e.color})]:[3,2];case 1:return[2,t.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("setStatusBar",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),qu.apply(this,arguments)}var Qu=[Gr({headerTextColor:pi.enum(["black","white"]).optional(),headerColor:pi.string().optional(),actionBar:Gr({hide:pi.boolean().optional(),title:pi.string().optional(),leftButton:pi.enum(["back","none"]).optional(),textAlign:pi.enum(["left","center"]).default("left").optional()}).optional(),statusBarType:pi.enum(["normal","hidden","transparent"]).optional(),hideAndroidBottomNavigationBar:pi.boolean().optional(),hideIOSSafeAreaBottom:pi.boolean().optional()})];function Yu(e){return $u.apply(this,arguments)}function $u(){return $u=Pe((function(e){return Ce(this,(function(t){return[2,nn("configAppView",Qu,[e],function(){var e=Pe((function(e){var t,n,r,i,a,o,s;return Ce(this,(function(u){switch(u.label){case 0:return Le.isMp?Qe.isUndefined(null===(t=e.actionBar)||void 0===t?void 0:t.leftButton)?[3,2]:[4,hi.setNavigationBarLeftButton(null===(o=e.actionBar)||void 0===o?void 0:o.leftButton)]:[3,13];case 1:u.sent(),u.label=2;case 2:return Qe.isUndefined(null===(n=e.actionBar)||void 0===n?void 0:n.title)||!(null===(r=e.actionBar)||void 0===r?void 0:r.title)?[3,4]:[4,hi.setNavigationBarTitle(null===(s=e.actionBar)||void 0===s?void 0:s.title)];case 3:u.sent(),u.label=4;case 4:return[4,hi.configHeader({hideActionBar:null===(i=e.actionBar)||void 0===i?void 0:i.hide,statusBarType:e.statusBarType,headerTextColor:e.headerTextColor,headerColor:e.headerColor,textAlign:null===(a=e.actionBar)||void 0===a?void 0:a.textAlign})];case 5:u.sent(),u.label=6;case 6:return u.trys.push([6,11,,12]),"boolean"!=typeof e.hideAndroidBottomNavigationBar?[3,8]:[4,hi.setAndroidBottomNavigationBar(e.hideAndroidBottomNavigationBar)];case 7:u.sent(),u.label=8;case 8:return"boolean"!=typeof e.hideIOSSafeAreaBottom?[3,10]:[4,hi.setIOSBottomSafeArea(e.hideIOSSafeAreaBottom)];case 9:u.sent(),u.label=10;case 10:return[3,12];case 11:return u.sent(),[3,12];case 12:return[2];case 13:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("configAppView",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),$u.apply(this,arguments)}var Xu=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("MA_MENU_MINIMIZE",{},{success:function(t){e(t)},fail:function(e){t(e)}},{})}))]}))}));function ec(e){return tc.apply(this,arguments)}function tc(){return(tc=Pe((function(e){return Ce(this,(function(t){return[2,nn("minimizeApp",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Xu()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("minimizeApp",{}))]}}))})))]}))}))).apply(this,arguments)}var nc=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("MA_MENU_PERMISSION",{},{success:function(t){e(t)},fail:function(e){t(e)}},{}),e()}))]}))}));function rc(e){return ic.apply(this,arguments)}function ic(){return(ic=Pe((function(e){return Ce(this,(function(t){return[2,nn("openPermissionSetting",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,nc()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openPermissionSetting",{}))]}}))})))]}))}))).apply(this,arguments)}var ac=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("MP_ADD_MYFAVORITES",{timestamp:(new Date).getTime()},{success:function(t){e(t)},fail:function(e){t(e)}},{})}))]}))}));function oc(e){return sc.apply(this,arguments)}function sc(){return(sc=Pe((function(e){return Ce(this,(function(t){return[2,nn("favoriteApp",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,ac()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("favoriteApp",{}))]}}))})))]}))}))).apply(this,arguments)}var uc=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("OPEN_GROUPLIST",{},{success:function(t){e(t)},fail:function(e){t(e)}},{})}))]}))}));function cc(e){return lc.apply(this,arguments)}function lc(){return(lc=Pe((function(e){return Ce(this,(function(t){return[2,nn("openGroupList",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,uc()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openGroupList",{}))]}}))})))]}))}))).apply(this,arguments)}var dc=Pe((function(){var e;return Ce(this,(function(t){switch(t.label){case 0:return[4,Wt.getAccessToken()];case 1:return e=t.sent(),[2,new Promise((function(t,n){Zt("MP_SEND_NOTIFICATION",{accessToken:e},{success:function(e){t(e)},fail:function(e){n(e)}},{delay:500})}))]}}))}));function pc(e){return fc.apply(this,arguments)}function fc(){return(fc=Pe((function(e){return Ce(this,(function(t){return[2,nn("requestSendNotification",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,dc()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("requestSendNotification",{}))]}}))})))]}))}))).apply(this,arguments)}var hc=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("MP_ADD_RATING",{},{success:function(t){e(t)},fail:function(e){t(e)}},{})}))]}))}));function mc(e){return vc.apply(this,arguments)}function vc(){return(vc=Pe((function(e){return Ce(this,(function(t){return[2,nn("addRating",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,hc()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({})]:[2,Promise.reject(Ze("addRating",{}))]}}))})))]}))}))).apply(this,arguments)}var gc,yc=(gc=Pe((function(e,t,n){var r,i;return Ce(this,(function(a){switch(a.label){case 0:return(r=new URLSearchParams).append("appId",t),r.append("accessToken",n),r.append("oaId",e),i={headers:{"Content-Type":"application/x-www-form-urlencoded"}},[4,fetch(l.CHECK_INTERACT_OA,ze({method:"POST",body:r},i))];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()]}}))})),function(e,t,n){return gc.apply(this,arguments)}),_c=function(){var e=Pe((function(e){return Ce(this,(function(t){return[2,new Promise((function(t,n){Zt("MP_INTERACT_OA",{oaId:e,forceUpdate:!0},{success:function(e){t(e)},fail:function(e){n(e)}},{})}))]}))}));return function(t){return e.apply(this,arguments)}}(),bc=[Gr({oaId:Cr()})];function wc(e){return Tc.apply(this,arguments)}function Tc(){return Tc=Pe((function(e){return Ce(this,(function(t){return[2,nn("interactOA",bc,[e],function(){var e=Pe((function(e){var t,n,r;return Ce(this,(function(a){switch(a.label){case 0:return Le.isMp?(t=e.oaId,[4,Wt.getAccessToken()]):[3,5];case 1:return!(n=a.sent())||Qe.isEmpty(n)?[3,3]:[4,yc(t,i,n)];case 2:if(0===(null==(r=a.sent())?void 0:r.err))return[2,Promise.resolve({})];a.label=3;case 3:return[4,_c(t)];case 4:return[2,a.sent()];case 5:return Le.isMpWeb?[2,Promise.resolve({})]:[2,Promise.reject(Ze("interactOA",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Tc.apply(this,arguments)}var Ec=[Gr({oaId:Cr()})];function Ic(e){return Pc.apply(this,arguments)}function Pc(){return Pc=Pe((function(e){return Ce(this,(function(t){return[2,nn("isAllowedInteractWithOA",Ec,[e],function(){var e=Pe((function(e){var t,n,r;return Ce(this,(function(a){switch(a.label){case 0:return Le.isMp?(t=e.oaId,[4,Wt.getAccessToken()]):[3,4];case 1:return!(n=a.sent())||Qe.isEmpty(n)?[3,3]:[4,yc(t,i,n)];case 2:return r=a.sent(),[2,Promise.resolve({status:0===(null==r?void 0:r.err)})];case 3:return[2,Promise.resolve({status:!1})];case 4:return Le.isMpWeb?[2,Promise.resolve({status:!1})]:[2,Promise.reject(Ze("IsAllowedInteractWithOA",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Pc.apply(this,arguments)}function Sc(e){return Ac.apply(this,arguments)}function Ac(){return(Ac=Pe((function(e){return Ce(this,(function(t){return[2,nn("getSetting",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,xt()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({authSetting:{}})]:[2,Promise.reject(Ze("getSetting",{}))]}}))})))]}))}))).apply(this,arguments)}var Oc=pi.enum(["scope.userInfo","scope.userLocation","scope.userPhonenumber"]),Nc=[Gr({scopes:pi.array(Oc).max(2).optional()}).optional()];function Cc(e){return kc.apply(this,arguments)}function kc(){return kc=Pe((function(e){return Ce(this,(function(t){return[2,nn("authorize",Nc,[e],function(){var e=Pe((function(e){var t;return Ce(this,(function(n){switch(n.label){case 0:return Le.isMp?(t=null==e?void 0:e.scopes,Nt(724,573)?[2,Promise.reject(Lt.error.clientNotSupport())]:[4,Bt(null!=t?t:void 0)]):[3,2];case 1:return[2,n.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({})]:[2,Promise.reject(Ze("authorize",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),kc.apply(this,arguments)}var Mc=Pe((function(){return Ce(this,(function(e){return[2,new Promise(function(){var e=Pe((function(e,t){var n;return Ce(this,(function(r){switch(r.label){case 0:return Qe.isUndefined(ZaloJavaScriptInterface)||"function"!=typeof ZaloJavaScriptInterface.checkCameraPermission?[3,2]:[4,ZaloJavaScriptInterface.checkCameraPermission()];case 1:return n=r.sent(),[2,e({userAllow:"grant"===n})];case 2:return t(Lt.error.clientNotSupport()),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}())]}))}));function Rc(e){return nn("checkZaloCameraPermission",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,Mc()];case 1:return[2,e.sent()]}}))})))}var Dc=Pe((function(){return Ce(this,(function(e){return[2,new Promise(function(){var e=Pe((function(e,t){var n,r,i;return Ce(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Wt.jumpAndGetToken()];case 1:return a.sent(),r=null===(n=Wt.miniProgramConfig)||void 0===n?void 0:n.userId,e(r),[3,3];case 2:return i=a.sent(),t(i),[3,3];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}())]}))}));function xc(e){return Uc.apply(this,arguments)}function Uc(){return(Uc=Pe((function(e){return Ce(this,(function(t){return[2,nn("getUserID",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Dc()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve(void 0)]:[2,Promise.reject(Ze("getUserID",{}))]}}))})))]}))}))).apply(this,arguments)}var Lc=Pe((function(){return Ce(this,(function(e){return[2,new Promise(function(){var e=Pe((function(e,t){var n,r,i;return Ce(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Wt.jumpAndGetToken()];case 1:return a.sent(),r=null===(n=Wt.miniProgramConfig)||void 0===n?void 0:n.idToken,e(r),[3,3];case 2:return i=a.sent(),t(i),[3,3];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}())]}))}));function jc(e){return Zc.apply(this,arguments)}function Zc(){return(Zc=Pe((function(e){return Ce(this,(function(t){return[2,nn("getIDToken",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,Lc()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve(void 0)]:[2,Promise.reject(Ze("getIDToken",{}))]}}))})))]}))}))).apply(this,arguments)}var Bc={format:R.JPEG,quality:D.NORMAL,mirrored:!1,useVideoSourceSize:!1},zc={width:1024,height:768,facingMode:M.FRONT,mirrored:!1,audio:!1,video:!0},Wc=function(){function e(t){var n,r,i,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=this;Ye(this,e),this._videoEnabled=!0,this._audioEnabled=null,this.tick=function(){if(u.haveVideoStream()&&u._userRequestFrameCallback){var e=u.getCanvas();if(u.drawFrame(),e){var t={data:e.toDataURL(R.PNG),width:e.width,height:e.height};ht.getInstance().emit(k.OnFrameCallback,0,t),requestAnimationFrame(u.tick)}}},this._videoElement=t,this._mediaConstraints=null!=s?s:null,this._facingMode=null!==(n=null==s?void 0:s.facingMode)&&void 0!==n?n:zc.facingMode,this._cameraList=[],this._stream=null,this._selectedDeviceId=null!==(r=null==s?void 0:s.deviceId)&&void 0!==r?r:"",this._canvasElement=null,this._ctx=null,this._hasUserMedia=!1,this._mirror=null!==(i=null==s?void 0:s.mirrored)&&void 0!==i?i:zc.mirrored,this._userRequestFrameCallback=!1,this._audioEnabled=null!==(a=null==s?void 0:s.audio)&&void 0!==a?a:zc.audio,this._videoEnabled=null!==(o=null==s?void 0:s.video)&&void 0!==o?o:zc.video}var t=e.prototype;return t.on=function(e,t){ht.getInstance().on(e,(function(e){t(e)})),e===k.OnFrameCallback&&(this._userRequestFrameCallback=!0,this.tick())},t.off=function(e){ht.getInstance().off(e),e===k.OnFrameCallback&&(this._userRequestFrameCallback=!1)},t.getQualityNumber=function(e){switch(e){case"high":return.9;case"normal":default:return.6;case"low":return.2}},t.getFacingMode=function(){return this._facingMode},t.getCameraList=function(){return this._cameraList},t.getCameraCount=function(){return this._cameraList.length},t.getSelectedDeviceId=function(){return this._selectedDeviceId},t.setDeviceId=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){switch(n.label){case 0:return t._selectedDeviceId=e,t._hasUserMedia?[4,t.stream()]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))()},t.getVideoInputs=function(e){var t=this;return this._cameraList=[],e.forEach((function(e){"videoinput"===e.kind&&t._cameraList.push(e)})),this._cameraList},t.updateMediaConstraints=function(e){var t=this;return Pe((function(){var n,r,i,a,o,s;return Ce(this,(function(u){switch(u.label){case 0:return Qe.isEmpty(e)?[2]:JSON.stringify(e)!==JSON.stringify(t._mediaConstraints)?(t._mediaConstraints=e,t._facingMode=null!==(n=null==e?void 0:e.facingMode)&&void 0!==n?n:t._facingMode,t._selectedDeviceId=null!==(r=null==e?void 0:e.deviceId)&&void 0!==r?r:t._selectedDeviceId,t._mirror=null!==(i=null==e?void 0:e.mirrored)&&void 0!==i?i:t._mirror,t._audioEnabled=null!==(a=null==e?void 0:e.audio)&&void 0!==a?a:t._audioEnabled,t._videoEnabled=null!==(o=null==e?void 0:e.video)&&void 0!==o?o:t._videoEnabled,t._selectedDeviceId=null!==(s=null==e?void 0:e.deviceId)&&void 0!==s?s:t._selectedDeviceId,t._hasUserMedia?[4,t.stream()]:[3,2]):[2];case 1:u.sent(),u.label=2;case 2:return[2]}}))}))()},t.getCurrentMediaConstraints=function(){var e=this._mediaConstraints,t={};this._videoElement.width=(null==e?void 0:e.width)||this._videoElement.width||zc.width,this._videoElement.height=(null==e?void 0:e.height)||this._videoElement.height||zc.height;var n=!1!==this._videoEnabled,r=!1!==this._audioEnabled;return n&&(""==this._selectedDeviceId&&null!==this._facingMode?t.facingMode=this._facingMode:t.deviceId={exact:this._selectedDeviceId},t.width={exact:this._videoElement.width},t.height={exact:this._videoElement.height}),{video:!!n&&t,audio:r}},t.selectCamera=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._cameraList[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;if(this._facingMode==M.FRONT&&a.label.toLowerCase().includes("front")||this._facingMode==M.BACK&&a.label.toLowerCase().includes("back")){this._selectedDeviceId=a.deviceId;break}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},t.flip=function(){var e=this;return Pe((function(){return Ce(this,(function(t){switch(t.label){case 0:return e._facingMode=e._facingMode==M.FRONT?M.BACK:M.FRONT,e._videoElement.style.transform="",e.selectCamera(),e._hasUserMedia?[4,e.stream()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))()},t.start=function(){var e=this;return Pe((function(){var t,n;return Ce(this,(function(r){return t=ht.getInstance(),n=function(t){try{e._hasUserMedia&&e.stop()}catch(e){}},t.off(m.AppPaused,n),t.on(m.AppPaused,n),[2,new Promise(function(){var t=Pe((function(t,n){var r;return Ce(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.stream()];case 1:return i.sent(),ht.getInstance().emit(k.OnStartCallback,0),t(e._selectedDeviceId),[3,3];case 2:return r=i.sent(),n(r),[3,3];case 3:return[2]}}))}));return function(e,n){return t.apply(this,arguments)}}())]}))}))()},t.info=function(){var e=this;return Pe((function(){return Ce(this,(function(t){return[2,new Promise((function(t,n){navigator.mediaDevices.enumerateDevices().then((function(n){e.getVideoInputs(n),t(e._cameraList)})).catch((function(e){n(e)}))}))]}))}))()},t.stream=function(){var e=this;return Pe((function(){return Ce(this,(function(t){return[2,new Promise((function(t,n){try{e._stop();var r=e.getCurrentMediaConstraints();if(!1===r.video&&!r.audio)return void t(e._facingMode);navigator.mediaDevices.getUserMedia(r).then(function(){var n=Pe((function(n){return Ce(this,(function(r){switch(r.label){case 0:return[4,e.info()];case 1:return r.sent(),e.selectCamera(),e.handleUserMedia(null,n),t(e._facingMode),[2]}}))}));return function(e){return n.apply(this,arguments)}}()).catch((function(t){e.handleUserMedia(t),n(t)}))}catch(e){n(e)}}))]}))}))()},t.handleUserMedia=function(e,t){var n=this;if(!e&&t){this._stream=t;try{this._videoElement&&(this._videoElement.srcObject=t,(this._facingMode==M.FRONT||this._mirror)&&(this._videoElement.style.transform="scale(-1,1)"),this._videoElement.onloadedmetadata=function(){n._userRequestFrameCallback&&n.tick()},this._videoElement.play().then((function(){n._hasUserMedia=!0})).catch((function(e){n._hasUserMedia=!1})))}catch(e){this._hasUserMedia=!1}}else this._hasUserMedia=!1},t.updateTrackEnable=function(e,t){var n=this;return Pe((function(){return Ce(this,(function(r){switch(r.label){case 0:if(e===x.VIDEO){if(n._videoEnabled===t)return[2];n._videoEnabled=t}else{if(n._audioEnabled===t)return[2];n._audioEnabled=t}return[4,n.stream()];case 1:return r.sent(),[2]}}))}))()},t.pause=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){switch(n.label){case 0:return[4,t.updateTrackEnable(e,!1)];case 1:return n.sent(),[2]}}))}))()},t.resume=function(e){var t=this;return Pe((function(){return Ce(this,(function(n){switch(n.label){case 0:return[4,t.updateTrackEnable(e,!0)];case 1:return n.sent(),[2]}}))}))()},t.isUsing=function(){return this._hasUserMedia},t.stop=function(){this._stop(),ht.getInstance().emit(k.OnStopCallback,0)},t._stop=function(){e.stopMediaStream(this._stream),this._hasUserMedia=!1},t.setFacingMode=function(e){this._facingMode=e},t.setMirror=function(e){this._mirror=e,this._videoElement&&(this._videoElement.style.transform=e?"scale(-1,1)":"")},t.takePhoto=function(e){if(!this._hasUserMedia)return null;var t=e||{},n=this.getCanvas(t);if(this.drawFrame(t),n){var r=t.format||Bc.format;return{data:n.toDataURL(r,this.getQualityNumber(t.quality)),width:n.width,height:n.height}}return null},t.haveVideoStream=function(){var e=this._videoElement;return e&&e.videoHeight>0&&this._hasUserMedia},t.getCanvas=function(e){var t=this._videoElement,n=e||{};if(!this.haveVideoStream())return null;if(!this._ctx){var r=t.videoWidth,i=t.videoHeight;if(!n.useVideoSourceSize){var a=r/i;i=(r=n.minScreenshotWidth||t.clientWidth)/a,n.minScreenshotHeight&&i<n.minScreenshotHeight&&(r=(i=n.minScreenshotHeight)*a)}this._canvasElement=document.createElement("canvas"),this._canvasElement.width=(null==n?void 0:n.width)||r,this._canvasElement.height=(null==n?void 0:n.height)||i,this._ctx=this._canvasElement.getContext("2d")}return this._canvasElement},t.drawFrame=function(e){var t=this._videoElement,n=e||{};if(t&&this._ctx&&this._canvasElement){var r=this._canvasElement,i=this._ctx;r.width=(null==n?void 0:n.width)||r.width,r.height=(null==n?void 0:n.height)||r.height,((null==n?void 0:n.mirrored)||this._mirror||this._facingMode===M.FRONT)&&(i.translate(r.width,0),i.scale(-1,1)),i.drawImage(t,0,0,r.width,r.height),((null==n?void 0:n.mirrored)||this._mirror||this._facingMode===M.FRONT)&&(i.scale(-1,1),i.translate(-r.width,0))}},e.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},e}(),Fc=Gr({play:pi.function(),pause:pi.function()}).refine((function(e){return"play"in e&&"pause"in e}),{message:"Invalid HTMLVideoElement"}),Gc=[Gr({videoElement:Fc,mediaConstraints:pi.object({width:pi.number().min(100).optional(),height:pi.number().min(100).optional(),facingMode:pi.string().optional(),audio:pi.boolean().optional(),video:pi.boolean().optional(),deviceId:pi.string().optional(),mirrored:pi.boolean().optional()}).nullish()}).optional()];function Vc(e){return nn("createCameraContext",Gc,[e],(function(e){return new Wc(e.videoElement,e.mediaConstraints)}))}var Hc=function(){function e(){var t,n;Ye(this,e),this.sdkLoaded=!1,this.queue=[];var r=window.AdtimaZMA={config:{cateId:null===(t=window.zmpGlobal)||void 0===t||null===(n=t.appInfo)||void 0===n?void 0:n.cateType,appId:window.APP_ID},queue:[],load:function(e,t){r.queue=Ne(r.queue).concat([[e,t]])}}}var t=e.prototype;return t.loadSDK=function(){var e=this,t=document.createElement("script");t.src="https://adtima-static.zascdn.me/resource/js/zma/sdk.js?q=".concat(Math.floor((new Date).getTime()/864e5)),t.onload=function(){e.sdkLoaded=!0,e.processQueue()},t.onerror=function(){e.sdkLoaded=!0},document.body.appendChild(t)},t.load=function(e,t){var n;Qe.isFunction(null===(n=window.AdtimaZMA)||void 0===n?void 0:n.load)&&window.AdtimaZMA.load(e,t)},t.display=function(e){var t;this.sdkLoaded?Qe.isFunction(null===(t=window.AdtimaZMA)||void 0===t?void 0:t.display)&&window.AdtimaZMA.display(e):this.queue.push(this.display.bind(this,e))},t.refresh=function(e){var t;this.sdkLoaded?Qe.isFunction(null===(t=window.AdtimaZMA)||void 0===t?void 0:t.refresh)&&window.AdtimaZMA.refresh(e):this.queue.push(this.refresh.bind(this,e))},t.processQueue=function(){for(;this.queue.length>0;){var e=this.queue.shift();e&&e()}},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();function Kc(e){return Jc.apply(this,arguments)}function Jc(){return(Jc=Pe((function(e){return Ce(this,(function(t){return[2,nn("setupAd",[],[e],(function(){return Hc.getInstance().loadSDK()}))]}))}))).apply(this,arguments)}var qc=[Gr({ids:pi.union([pi.string(),pi.array(pi.string())]),config:Gr({display:pi.boolean().optional(),onClose:pi.function().optional()}).optional()})];function Qc(e){return Yc.apply(this,arguments)}function Yc(){return Yc=Pe((function(e){return Ce(this,(function(t){return[2,nn("loadAd",qc,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){return Hc.getInstance().load(e.ids,e.config),[2]}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Yc.apply(this,arguments)}var $c=[Gr({id:pi.string()})];function Xc(e){return el.apply(this,arguments)}function el(){return el=Pe((function(e){return Ce(this,(function(t){return[2,nn("displayAd",$c,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){return Hc.getInstance().display(e.id),[2]}))}));return function(t){return e.apply(this,arguments)}}())]}))})),el.apply(this,arguments)}var tl=[Gr({id:pi.string().optional()}).optional()];function nl(e){return rl.apply(this,arguments)}function rl(){return rl=Pe((function(e){return Ce(this,(function(t){return[2,nn("refreshAd",tl,[e],function(){var e=Pe((function(e){return Ce(this,(function(t){return Hc.getInstance().refresh(e.id),[2]}))}));return function(t){return e.apply(this,arguments)}}())]}))})),rl.apply(this,arguments)}var il=[Gr({id:Cr(),guidingText:Cr().optional(),color:Cr().optional(),onStatusChange:pi.function().optional(),onError:pi.function().optional()}).catchall(pi.any())];function al(e){return ol.apply(this,arguments)}function ol(){return ol=Pe((function(t){return Ce(this,(function(n){return[2,nn("showOAWidget",il,[t],function(){var t=Pe((function(t){var n,r,i,a,o,s,u,c;return Ce(this,(function(l){if(Le.isMp){try{n=document.getElementById(t.id),r=t.onStatusChange,i=t.guidingText,a=t.color,o=e(t,["onStatusChange","guidingText","color"]),n&&(s=document.createElement("iframe"),u="ifOAF-".concat(t.id,"-").concat(Date.now()),(c=new URL("https://h5.zalo.me/widgets/oa_widget.html")).searchParams.set("id",u),c.searchParams.set("appId",window.APP_ID),i&&c.searchParams.set("guidingText",i),a&&c.searchParams.set("color",a),Object.entries(o).forEach((function(e){var t=We(e,2),n=t[0],r=t[1];r&&c.searchParams.set("data-".concat(n),String(r))})),s.id=u,s.src=c.href,s.style.width="100%",s.style.height="100%",s.style.border="none",n.innerHTML=s.outerHTML,window.addEventListener("message",function(){var e=Pe((function(e){var t,n,i,a,o,s,l,d;return Ce(this,(function(p){switch(p.label){case 0:return t=e.data,e.origin.startsWith("https://h5.zalo.me")?(n=document.getElementById(u),i=t.type,(a=new URL(t.href)).origin!==c.origin||a.pathname!==c.pathname||t.id!==u?[3,3]:"followOA"!==i&&"getOAInfo"!==i?[3,2]:[4,Wt.jumpAndGetToken()]):[3,3];case 1:return p.sent(),l=null===(o=Wt.miniProgramConfig)||void 0===o?void 0:o.jwt,null==n||null===(s=n.contentWindow)||void 0===s||s.postMessage({type:i,payload:{jwt:l}},"*"),[3,3];case 2:"oaInfo"===i?null==r||r(null===(d=t.payload)||void 0===d?void 0:d.followed):"openOA"===i?Da(t.payload.id,"oa"):"heightChange"===i&&(n.style.height="".concat(t.payload,"px")),p.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),!1))}catch(e){console.log(e)}return[2,Promise.resolve()]}return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("openMiniApp",{}))]}))}));return function(e){return t.apply(this,arguments)}}())]}))})),ol.apply(this,arguments)}var sl=[pi.object({id:pi.string(),type:pi.string(),text:pi.string(),color:pi.string().optional(),disabled:pi.boolean().optional(),onDataReceived:pi.function().optional(),onError:pi.function().optional()}).catchall(pi.any())];function ul(e){return cl.apply(this,arguments)}function cl(){return cl=Pe((function(t){return Ce(this,(function(n){return[2,nn("showFunctionButtonWidget",sl,[t],function(){var t=Pe((function(t){var n,r,i,a,o,s,u;return Ce(this,(function(c){if(Le.isMp){try{n=document.getElementById(t.id),r=t.onDataReceived,i=t.onError,a=e(t,["onDataReceived","onError"]),n&&(o=document.createElement("iframe"),s="ifFBW-".concat(t.id,"-").concat(Date.now()),(u=new URL("https://h5.zalo.me/widgets/function_button_widget.html")).searchParams.set("id",s),u.searchParams.set("appId",window.APP_ID),Object.entries(a).forEach((function(e){var t=We(e,2),n=t[0],r=t[1];r&&u.searchParams.set("data-".concat(n),String(r))})),o.id=s,o.src=u.href,o.style.width="100%",o.style.height="100%",o.style.border="none",Object.entries(a).forEach((function(e){var t=We(e,2),n=t[0],r=t[1];r&&o.setAttribute("data-".concat(n),String(r))})),n.innerHTML=o.outerHTML,window.addEventListener("message",function(){var e=Pe((function(e){var t,n,o,c,l,d,p,f,h,m,v,g;return Ce(this,(function(y){switch(y.label){case 0:return t=e.data,e.origin.startsWith("https://h5.zalo.me")?(n=document.getElementById(s),o=t.type,(c=new URL(t.href)).origin!==u.origin||c.pathname!==u.pathname||t.id!==s?[3,4]:"buttonClicked"!==o?[3,3]:[4,Wt.jumpAndGetToken()]):[3,4];case 1:return y.sent(),f=null===(l=Wt.miniProgramConfig)||void 0===l?void 0:l.jwt,h=null===(d=Wt.miniProgramConfig)||void 0===d?void 0:d.encryptKey,[4,on()];case 2:return m=y.sent(),null==n||null===(p=n.contentWindow)||void 0===p||p.postMessage({type:o,payload:{jwt:f,encryptKey:h,accessToken:m}},"*"),[3,4];case 3:"onSuccess"===o?(null==(v=t.payload)?void 0:v.type)===a.type&&(null==r||r(null==v?void 0:v.data)):"onError"===o&&(null==(g=t.payload)?void 0:g.type)===a.type&&(null==i||i(null==g?void 0:g.data)),y.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),!1))}catch(e){console.log(e)}return[2,Promise.resolve()]}return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("showFunctionButtonWidget",{}))]}))}));return function(e){return t.apply(this,arguments)}}())]}))})),cl.apply(this,arguments)}var ll=function(){var e=Pe((function(e,t){var n;return Ce(this,(function(r){return n={},"cccd"===e&&(n={mrz:null==t?void 0:t.mrz}),[2,new Promise((function(t,r){Zt("SCAN_NFC",{type:b[e],data:n},{success:function(n){if("cccd"===e){var r,i,a,o,s,u,c,l,d,p,f,h,m,v,g,y,_,b,w,T,E={dg1:null!==(r=n.dg1)&&void 0!==r?r:"",dg2:null!==(i=n.dg2)&&void 0!==i?i:"",dg3:null!==(a=n.dg3)&&void 0!==a?a:"",dg4:null!==(o=n.dg4)&&void 0!==o?o:"",dg5:null!==(s=n.dg5)&&void 0!==s?s:"",dg6:null!==(u=n.dg6)&&void 0!==u?u:"",dg7:null!==(c=n.dg7)&&void 0!==c?c:"",dg8:null!==(l=n.dg8)&&void 0!==l?l:"",dg9:null!==(d=n.dg9)&&void 0!==d?d:"",dg10:null!==(p=n.dg10)&&void 0!==p?p:"",dg11:null!==(f=n.dg11)&&void 0!==f?f:"",dg12:null!==(h=n.dg12)&&void 0!==h?h:"",dg13:null!==(m=n.dg13)&&void 0!==m?m:"",dg14:null!==(v=n.dg14)&&void 0!==v?v:"",dg15:null!==(g=n.dg15)&&void 0!==g?g:"",dg16:null!==(y=n.dg16)&&void 0!==y?y:"",sod:null!==(_=n.sod)&&void 0!==_?_:"",challenge:null!==(b=n.challenge)&&void 0!==b?b:"",aAResult:null!==(w=n.aAResult)&&void 0!==w?w:"",eACCAResult:null!==(T=n.eACCAResult)&&void 0!==T?T:""};t(E)}else t({})},fail:function(e){r(e)}},{timeout:!1})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),dl=[Gr({type:pi.enum(["cccd"]),data:Gr({mrz:Cr().max(90)})})];function pl(e){return fl.apply(this,arguments)}function fl(){return fl=Pe((function(e){return Ce(this,(function(t){return[2,nn("scanNFC",dl,[e],function(){var e=Pe((function(e){var t,n;return Ce(this,(function(r){switch(r.label){case 0:return Le.isMp?Nt(754,620)?[2,Promise.reject(Lt.error.clientNotSupport())]:(t=e.type,n=e.data,[4,ll(t,n)]):[3,2];case 1:return[2,r.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({})]:[2,Promise.reject(Ze("scanNFC",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),fl.apply(this,arguments)}var hl=Pe((function(){return Ce(this,(function(e){return[2,new Promise((function(e,t){Zt("CHECK_NFC",{},{success:function(t){e(t)},fail:function(e){t(e)}},{timeout:!1})}))]}))}));function ml(e){return vl.apply(this,arguments)}function vl(){return(vl=Pe((function(e){return Ce(this,(function(t){return[2,nn("checkNFC",[],[e],Pe((function(){return Ce(this,(function(e){switch(e.label){case 0:return Le.isMp?[4,hl()]:[3,2];case 1:return[2,e.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve({})]:[2,Promise.reject(Ze("checkNFC",{}))]}}))})))]}))}))).apply(this,arguments)}var gl=[pi.string().trim().min(1)];var yl=[pi.string().trim().min(1),pi.string().trim()];var _l=[pi.string().trim().min(1)];var bl={getItem:function(e){return nn("getItem",gl,[e],(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Le.isMp||Le.isMpWeb){if(Nt(757,625))throw Lt.error.clientNotSupport();return Ki.getItem(t[0])}throw Ze("getItem",{})}))},setItem:function(e,t){return nn("setItem",yl,[e,t],(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Le.isMp||Le.isMpWeb){if(Nt(757,625))throw Lt.error.clientNotSupport();return Ki.setItem(t[0],t[1])}throw Ze("setItem",{})}))},clear:function(){return nn("clear",[],[],(function(){if(Le.isMp||Le.isMpWeb){if(Nt(757,625))throw Lt.error.clientNotSupport();return Ki.clearStorageSync()}throw Ze("clear",{})}))},removeItem:function(e){return nn("removeItem",_l,[e],(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Le.isMp||Le.isMpWeb){if(Nt(757,625))throw Lt.error.clientNotSupport();return Ki.removeItem(t[0])}throw Ze("removeItem",{})}))},getStorageInfo:function(){return nn("getStorageInfoSync",[],[],(function(){if(Le.isMp||Le.isMpWeb){if(Nt(757,625))throw Lt.error.clientNotSupport();return Ki.getStorageInfoSync()}throw Ze("getStorageInfoSync",{})}))}},wl={purchase:Ou,createOrder:Eu,checkTransaction:xu,createOrderIAP:Zu,selectPaymentMethod:Mu},Tl=wl,El=function(){var e=Pe((function(e,t){return Ce(this,(function(n){return[2,new Promise((function(n,r){Zt("SAVE_FILE",{fileUrl:e,onProgress:t},{success:function(e){n()},fail:function(e){r(e)}},{})}))]}))}));return function(t,n){return e.apply(this,arguments)}}(),Il=[Gr({url:pi.string().url()}).optional()];function Pl(e){return Sl.apply(this,arguments)}function Sl(){return Sl=Pe((function(e){return Ce(this,(function(t){return[2,nn("downloadFile",Il,[e],function(){var e=Pe((function(e){var t;return Ce(this,(function(n){switch(n.label){case 0:return Le.isMp?(t=e.url,[4,El(t,e.onProgress)]):[3,2];case 1:return[2,n.sent()];case 2:return Le.isMpWeb?[2,Promise.resolve()]:[2,Promise.reject(Ze("downloadFile",{}))]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),Sl.apply(this,arguments)}var Al=pi.enum(["APP_INITIALIZING","APP_READY"]),Ol=pi.any();var Nl={logEvent:function(e,t){return nn("logEvent",[Al,Ol],[e,t],(function(e,t){if(Le.isMp||Le.isMpWeb){var n,r,i,a=Wa(ze({},"object"==typeof t&&null!==t?t:{}),{duration:Math.round(performance.now()),timestamp:Date.now()});return null===window||void 0===window||null===(n=window.zmpGlobal)||void 0===n||null===(r=n.eventManager)||void 0===r||null===(i=r.logEventForClient)||void 0===i||i.call(r,{type:d.DEV_TRACKING,eventCode:"APP_INITIALIZING"===e?p.APP_INITIALIZING:p.APP_READY}),Pt([{action:"zmp.app.lifecycle.tracking",error:0,message:"",data:ze({eventType:e},a)}])}throw Ze("logEvent",{})}))}};window.ZaloMiniAppSDK={getVersion:ln},rn();var Cl=Object.freeze({__proto__:null,get Events(){return m},get EventName(){return m},get CameraEvents(){return k},login:rn,getAccessToken:on,getVersion:ln,getSystemInfo:pn,setNavigationBarTitle:vi,setNavigationBarColor:_i,setNavigationBarLeftButton:Ti,setStorage:qi,getStorage:$i,getStorageInfo:ea,removeStorage:ra,clearStorage:oa,getUserInfo:la,getNetworkType:ha,onNetworkStatusChange:ga,startBeaconDiscovery:ba,stopBeaconDiscovery:Ea,getBeacons:Sa,closeApp:Na,scanQRCode:Ma,openProfile:Ua,openChat:Ba,openPostFeed:Va,followOA:qa,unfollowOA:Xa,openShareSheet:io,requestCameraPermission:so,createShortcut:ho,openBioAuthentication:yo,checkStateBioAuthentication:wo,showToast:Po,hideKeyboard:Oo,openPhone:Mo,openSMS:Uo,viewOAQr:Bo,keepScreen:Go,onKeepScreen:Ho,offKeepScreen:Jo,saveImageToGallery:$o,saveVideoToGallery:ns,openMiniApp:os,vibrate:ls,openWebview:hs,getRouteParams:gs,getAppInfo:ys,sendDataToPreviousMiniApp:Ts,getPhoneNumber:Ps,openProfilePicker:Ns,connectWifi:Rs,openMediaPicker:Ls,getShareableLink:Bs,closeLoading:Fs,requestUpdateZalo:Vs,onConfirmToExit:qs,offConfirmToExit:Qs,getDeviceId:Ys,getDeviceIdAsync:$s,getContext:eu,getContextAsync:tu,getAuthCode:ru,getZPIToken:au,setAccessToken:uu,openOutApp:lu,chooseImage:fu,getLocation:vu,onCallbackData:_u,createOrder:Eu,purchase:Ou,selectPaymentMethod:Mu,checkTransaction:xu,createOrderIAP:Zu,events:Ks,setAndroidBottomNavigationBar:Wu,setIOSBottomSafeArea:Vu,setStatusBar:Ju,configAppView:Yu,minimizeApp:ec,openPermissionSetting:rc,favoriteApp:oc,openGroupList:cc,requestSendNotification:pc,addRating:mc,interactOA:wc,interactOa:wc,isAllowedInteractWithOA:Ic,getSetting:Sc,authorize:Cc,checkZaloCameraPermission:Rc,getUserID:xc,getIDToken:jc,createCameraContext:Vc,setupAd:Kc,loadAd:Qc,displayAd:Xc,refreshAd:nl,showOAWidget:al,showFunctionButtonWidget:ul,scanNFC:pl,checkNFC:ml,nativeStorage:bl,Payment:wl,CheckoutSDK:Tl,downloadFile:Pl,trackingManager:Nl,get FacingMode(){return M},get PhotoFormat(){return R},get PhotoQuality(){return D},get StreamType(){return x},ZMACameraImp:Wc}),kl=e(Cl,["createOrder","checkTransaction","createOrderIAP","selectPaymentMethod","purchase"]);!function(){var e,t=null===(e=Ue())||void 0===e?void 0:e.appEnv;(null==t?void 0:t.isMp)&&(window.ZaloMiniAppSDK={},Object.assign(window.ZaloMiniAppSDK,Cl))}();export{O as AndroidBottomNavigationBarType,k as CameraEvents,y as ChatType,Tl as CheckoutSDK,m as EventName,m as Events,M as FacingMode,P as IAPPayType,N as IOSSafeAreaBottomType,v as JumpStatus,I as MediaPickerType,f as NetworkType,T as OrientationType,wl as Payment,R as PhotoFormat,D as PhotoQuality,h as PlatformType,_ as PostFeedType,g as ProfileType,S as ProrationMode,b as ScanNFCType,w as ShareSheetType,A as StatusBarType,x as StreamType,C as TextAlignType,E as VibrateType,Wc as ZMACameraImp,mc as addRating,Cc as authorize,ml as checkNFC,wo as checkStateBioAuthentication,xu as checkTransaction,Rc as checkZaloCameraPermission,fu as chooseImage,oa as clearStorage,Na as closeApp,Fs as closeLoading,Yu as configAppView,Rs as connectWifi,Vc as createCameraContext,Eu as createOrder,Zu as createOrderIAP,ho as createShortcut,kl as default,Xc as displayAd,Pl as downloadFile,Ks as events,oc as favoriteApp,qa as followOA,on as getAccessToken,ys as getAppInfo,ru as getAuthCode,Sa as getBeacons,eu as getContext,tu as getContextAsync,Ys as getDeviceId,$s as getDeviceIdAsync,jc as getIDToken,vu as getLocation,ha as getNetworkType,Ps as getPhoneNumber,gs as getRouteParams,Sc as getSetting,Bs as getShareableLink,$i as getStorage,ea as getStorageInfo,pn as getSystemInfo,xc as getUserID,la as getUserInfo,ln as getVersion,au as getZPIToken,Oo as hideKeyboard,wc as interactOA,wc as interactOa,Ic as isAllowedInteractWithOA,Go as keepScreen,Qc as loadAd,rn as login,ec as minimizeApp,bl as nativeStorage,Qs as offConfirmToExit,Jo as offKeepScreen,_u as onCallbackData,qs as onConfirmToExit,Ho as onKeepScreen,ga as onNetworkStatusChange,yo as openBioAuthentication,Ba as openChat,cc as openGroupList,Ls as openMediaPicker,os as openMiniApp,lu as openOutApp,rc as openPermissionSetting,Mo as openPhone,Va as openPostFeed,Ua as openProfile,Ns as openProfilePicker,Uo as openSMS,io as openShareSheet,hs as openWebview,Ou as purchase,nl as refreshAd,ra as removeStorage,so as requestCameraPermission,pc as requestSendNotification,Vs as requestUpdateZalo,$o as saveImageToGallery,ns as saveVideoToGallery,pl as scanNFC,Ma as scanQRCode,Mu as selectPaymentMethod,Ts as sendDataToPreviousMiniApp,uu as setAccessToken,Wu as setAndroidBottomNavigationBar,Vu as setIOSBottomSafeArea,_i as setNavigationBarColor,Ti as setNavigationBarLeftButton,vi as setNavigationBarTitle,Ju as setStatusBar,qi as setStorage,Kc as setupAd,ul as showFunctionButtonWidget,al as showOAWidget,Po as showToast,ba as startBeaconDiscovery,Ea as stopBeaconDiscovery,Nl as trackingManager,Xa as unfollowOA,ls as vibrate,Bo as viewOAQr};
