import r from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import o from"../utils/query-string.js";import{APIS as e}from"../constants.js";import t from"../utils/lodash.js";import n from"../utils/request.js";import a from"../appEnv/getEnv.js";import{__generator as i}from'./../external/tslib/tslib.es6.js';var s,d=(s=r((function(r,n,a){var s,d,l,u;return i(this,(function(i){switch(i.label){case 0:return s={appId:r,versionStatus:n},t.isUndefined(a)||(s.currentVersion=a),d=o.appendToUrl(e.GET_APP_INFO,s),[4,fetch(d,{credentials:"include"})];case 1:return(l=i.sent()).ok?[4,l.json()]:[3,3];case 2:if((u=i.sent()).err<0||!u.data)throw new Error(u);return[2,{name:u.data.name,version:u.data.version,description:u.data.description,appUrl:u.data.appUrl,qrCodeUrl:u.data.qrCodeUrl,logoUrl:u.data.logoUrl,cateID:u.data.cateType}];case 3:throw new Error("Can't get app info")}}))})),function(r,o,e){return s.apply(this,arguments)});function l(r){try{var o=r.map((function(r){return{action:r.action,error:r.error,message:r.message,data:r.data}}));n.execute(e.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(o)},(function(){}))}catch(r){}}var u=function(r){return r.replace(/[A-Z]/g,(function(r){return"_".concat(r.toLowerCase())}))},c=function(){var r;return"android"===((null===(r=a())||void 0===r?void 0:r.platformName)||"").toLowerCase()},p=function(){var r;return"ios"===((null===(r=a())||void 0===r?void 0:r.platformName)||"").toLowerCase()},f=function(){var r=0;if(window.zaloVersionCode)r=window.zaloVersionCode;else{var o,e=Number((null===(o=a())||void 0===o?void 0:o.zaloVersion)||"");if(e>=24112e3)r=e;else{var t,n=((null===(t=a())||void 0===t?void 0:t.platformName)||"").toLowerCase();"android"===n?r=e%1e4:"ios"===n&&(r=e)}}return r},m=function(r,o){var e=f();return c()&&e<r||p()&&e<o};export{u as camelToSnakeCase,d as getAppInfo,f as getZaloVersionCode,m as isAPINotSupport,c as isAndroid,p as isIOS,l as sendLogData};
